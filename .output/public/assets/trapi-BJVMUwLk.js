import{r as et,j as O,g as Nr,R as pn}from"./main-Bxfe4Qal.js";import{m as Pr,b as Ar,u as Wn,O as Mr,a as Ir,I as Fr,S as Or,F as Yn,L as Lr}from"./Loading-0cuKiJyU.js";import{B as gn}from"./Box-CViFGFuH.js";import{B as Dr,g as Mt,d as It,f as gt,i as Ct,j as Ft,w as Re,e as Yt,h as At,m as le,l as yn,k as mn}from"./createSimplePaletteValueFilter-BgnxeUzB.js";import{b as jr}from"./AlertProvider-CS83QDva.js";import{D as qr,a as zr,b as Br}from"./DialogTitle-BsB0Df6C.js";import{u as wt}from"./IconButton-D-WOROUy.js";import{B as Hr,c as Kn,d as Ur,a as Jn}from"./CircularProgress-B8CBKe07.js";import{u as ue,f as Qe,I as Vr}from"./Input-DrgcAPlg.js";import{T as qe}from"./Typography-S0UZMlvX.js";import{c as Gr}from"./Modal-CENjY7I_.js";import{D as Xr}from"./ListItemText-BgG2IG-P.js";import{B as _n}from"./Button-CpGhMJw8.js";import{s as ve}from"./queryGraph-B-h_kUel.js";function Wr(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n]||!e.components[n].defaultProps)return r;const i={...r},o=e.components[n].defaultProps;let s;for(s in o)i[s]===void 0&&(i[s]=o[s]);return i}const Yr=(t,e={})=>n=>{const{defaultTheme:r,withTheme:i=!1,name:o,...s}=e;let l=o;const u=Pr(t,{defaultTheme:r,Component:n,name:o||n.displayName,classNamePrefix:l,...s}),a=et.forwardRef(function(p,h){const{classes:y,...v}=p,x=u({...n.defaultProps,...p});let _,w=v;return(typeof o=="string"||i)&&(_=Ar()||r,o&&(w=Wr({theme:_,name:o,props:v})),i&&!w.theme&&(w.theme=_)),O.jsx(n,{ref:h,classes:x,...w})});return Dr(a,n),a};function Kr(t){return Mt("PrivateSwitchBase",t)}It("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Jr=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${Ct(i)}`],input:["input"]};return Ft(o,Kr,e)},Qr=gt(Hr)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Zr=gt("input",{shouldForwardProp:Re})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ti=et.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,defaultChecked:s,disabled:l,disableFocusRipple:u=!1,edge:a=!1,icon:c,id:p,inputProps:h,inputRef:y,name:v,onBlur:x,onChange:_,onFocus:w,readOnly:S,required:T=!1,tabIndex:m,type:C,value:$,slots:E={},slotProps:f={},...d}=e,[g,b]=Wn({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),k=ue(),R=A=>{w&&w(A),k&&k.onFocus&&k.onFocus(A)},q=A=>{x&&x(A),k&&k.onBlur&&k.onBlur(A)},W=A=>{if(A.nativeEvent.defaultPrevented)return;const H=A.target.checked;b(H),_&&_(A,H)};let G=l;k&&typeof G>"u"&&(G=k.disabled);const F=C==="checkbox"||C==="radio",U={...e,checked:g,disabled:G,disableFocusRipple:u,edge:a},P=Jr(U),J={slots:E,slotProps:{input:h,...f}},[I,D]=wt("root",{ref:n,elementType:Qr,className:P.root,shouldForwardComponentProp:!0,externalForwardedProps:{...J,component:"span",...d},getSlotProps:A=>({...A,onFocus:H=>{var Z;(Z=A.onFocus)==null||Z.call(A,H),R(H)},onBlur:H=>{var Z;(Z=A.onBlur)==null||Z.call(A,H),q(H)}}),ownerState:U,additionalProps:{centerRipple:!0,focusRipple:!u,disabled:G,role:void 0,tabIndex:null}}),[N,nt]=wt("input",{ref:y,elementType:Zr,className:P.input,externalForwardedProps:J,getSlotProps:A=>({...A,onChange:H=>{var Z;(Z=A.onChange)==null||Z.call(A,H),W(H)}}),ownerState:U,additionalProps:{autoFocus:r,checked:i,defaultChecked:s,disabled:G,id:F?p:void 0,name:v,readOnly:S,required:T,tabIndex:m,type:C,...C==="checkbox"&&$===void 0?{}:{value:$}}});return O.jsxs(I,{...D,children:[O.jsx(N,{...nt}),g?o:c]})});function ei(t){return Mt("MuiDialogContentText",t)}It("MuiDialogContentText",["root"]);const ni=t=>{const{classes:e}=t,r=Ft({root:["root"]},ei,e);return{...e,...r}},ri=gt(qe,{shouldForwardProp:t=>Re(t)||t==="classes",name:"MuiDialogContentText",slot:"Root"})({}),ii=et.forwardRef(function(e,n){const r=Yt({props:e,name:"MuiDialogContentText"}),{children:i,className:o,...s}=r,l=ni(s);return O.jsx(ri,{component:"p",variant:"body1",color:"textSecondary",ref:n,ownerState:s,className:At(l.root,o),...r,classes:l})});function oi(t){return Mt("MuiFormControlLabel",t)}const Qt=It("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),si=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,s={root:["root",n&&"disabled",`labelPlacement${Ct(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Ft(s,oi,e)},ai=gt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Qt.label}`]:e.label},e.root,e[`labelPlacement${Ct(n.labelPlacement)}`]]}})(le(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Qt.disabled}`]:{cursor:"default"},[`& .${Qt.label}`]:{[`&.${Qt.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),li=gt("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(le(({theme:t})=>({[`&.${Qt.error}`]:{color:(t.vars||t).palette.error.main}}))),xn=et.forwardRef(function(e,n){const r=Yt({props:e,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:s={},control:l,disabled:u,disableTypography:a,inputRef:c,label:p,labelPlacement:h="end",name:y,onChange:v,required:x,slots:_={},slotProps:w={},value:S,...T}=r,m=ue(),C=u??l.props.disabled??(m==null?void 0:m.disabled),$=x??l.props.required,E={disabled:C,required:$};["checked","name","onChange","value","inputRef"].forEach(W=>{typeof l.props[W]>"u"&&typeof r[W]<"u"&&(E[W]=r[W])});const f=Qe({props:r,muiFormControl:m,states:["error"]}),d={...r,disabled:C,labelPlacement:h,required:$,error:f.error},g=si(d),b={slots:_,slotProps:{...s,...w}},[k,R]=wt("typography",{elementType:qe,externalForwardedProps:b,ownerState:d});let q=p;return q!=null&&q.type!==qe&&!a&&(q=O.jsx(k,{component:"span",...R,className:At(g.label,R==null?void 0:R.className),children:q})),O.jsxs(ai,{className:At(g.root,o),ownerState:d,ref:n,...T,children:[et.cloneElement(l,E),$?O.jsxs("div",{children:[q,O.jsxs(li,{ownerState:d,"aria-hidden":!0,className:g.asterisk,children:[" ","*"]})]}):q]})});function ui(t){return Mt("MuiFormGroup",t)}It("MuiFormGroup",["root","row","error"]);const ci=t=>{const{classes:e,row:n,error:r}=t;return Ft({root:["root",n&&"row",r&&"error"]},ui,e)},fi=gt("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),hi=et.forwardRef(function(e,n){const r=Yt({props:e,name:"MuiFormGroup"}),{className:i,row:o=!1,...s}=r,l=ue(),u=Qe({props:r,muiFormControl:l,states:["error"]}),a={...r,row:o,error:u.error},c=ci(a);return O.jsx(fi,{className:At(c.root,i),ownerState:a,ref:n,...s})});function di(t){return Mt("MuiFormHelperText",t)}const vn=It("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var wn;const pi=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:s,focused:l,required:u}=t,a={root:["root",i&&"disabled",o&&"error",r&&`size${Ct(r)}`,n&&"contained",l&&"focused",s&&"filled",u&&"required"]};return Ft(a,di,e)},gi=gt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Ct(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(le(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${vn.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${vn.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),yi=et.forwardRef(function(e,n){const r=Yt({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:s="p",disabled:l,error:u,filled:a,focused:c,margin:p,required:h,variant:y,...v}=r,x=ue(),_=Qe({props:r,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),w={...r,component:s,contained:_.variant==="filled"||_.variant==="outlined",variant:_.variant,size:_.size,disabled:_.disabled,error:_.error,filled:_.filled,focused:_.focused,required:_.required};delete w.ownerState;const S=pi(w);return O.jsx(gi,{as:s,className:At(S.root,o),ref:n,...v,ownerState:w,children:i===" "?wn||(wn=O.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):i})}),mi=Kn(O.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),_i=Kn(O.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),xi=gt("span",{shouldForwardProp:Re})({position:"relative",display:"flex"}),vi=gt(mi)({transform:"scale(1)"}),wi=gt(_i)(le(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function Qn(t){const{checked:e=!1,classes:n={},fontSize:r}=t,i={...t,checked:e};return O.jsxs(xi,{className:n.root,ownerState:i,children:[O.jsx(vi,{fontSize:r,className:n.background,ownerState:i}),O.jsx(wi,{fontSize:r,className:n.dot,ownerState:i})]})}const Zn=et.createContext(void 0);function bi(){return et.useContext(Zn)}function ki(t){return Mt("MuiRadio",t)}const bn=It("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Si=t=>{const{classes:e,color:n,size:r}=t,i={root:["root",`color${Ct(n)}`,r!=="medium"&&`size${Ct(r)}`]};return{...e,...Ft(i,ki,e)}},Ei=gt(ti,{shouldForwardProp:t=>Re(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size!=="medium"&&e[`size${Ct(n.size)}`],e[`color${Ct(n.color)}`]]}})(le(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${bn.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:yn(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(mn()).map(([e])=>({props:{color:e,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:yn(t.palette[e].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(mn()).map(([e])=>({props:{color:e,disabled:!1},style:{[`&.${bn.checked}`]:{color:(t.vars||t).palette[e].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Ci(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}const $i=O.jsx(Qn,{checked:!0}),Ri=O.jsx(Qn,{}),kn=et.forwardRef(function(e,n){const r=Yt({props:e,name:"MuiRadio"}),{checked:i,checkedIcon:o=$i,color:s="primary",icon:l=Ri,name:u,onChange:a,size:c="medium",className:p,disabled:h,disableRipple:y=!1,slots:v={},slotProps:x={},inputProps:_,...w}=r,S=ue();let T=h;S&&typeof T>"u"&&(T=S.disabled),T??(T=!1);const m={...r,disabled:T,disableRipple:y,color:s,size:c},C=Si(m),$=bi();let E=i;const f=Gr(a,$&&$.onChange);let d=u;$&&(typeof E>"u"&&(E=Ci($.value,r.value)),typeof d>"u"&&(d=$.name));const g=x.input??_,[b,k]=wt("root",{ref:n,elementType:Ei,className:At(C.root,p),shouldForwardComponentProp:!0,externalForwardedProps:{slots:v,slotProps:x,...w},getSlotProps:R=>({...R,onChange:(q,...W)=>{var G;(G=R.onChange)==null||G.call(R,q,...W),f(q,...W)}}),ownerState:m,additionalProps:{type:"radio",icon:et.cloneElement(l,{fontSize:l.props.fontSize??c}),checkedIcon:et.cloneElement(o,{fontSize:o.props.fontSize??c}),disabled:T,name:d,checked:E,slots:v,slotProps:{input:typeof g=="function"?g(m):g}}});return O.jsx(b,{...k,classes:C})});function Ti(t){return Mt("MuiRadioGroup",t)}It("MuiRadioGroup",["root","row","error"]);const Ni=t=>{const{classes:e,row:n,error:r}=t;return Ft({root:["root",n&&"row",r&&"error"]},Ti,e)},Pi=et.forwardRef(function(e,n){const{actions:r,children:i,className:o,defaultValue:s,name:l,onChange:u,value:a,...c}=e,p=et.useRef(null),h=Ni(e),[y,v]=Wn({controlled:a,default:s,name:"RadioGroup"});et.useImperativeHandle(r,()=>({focus:()=>{let S=p.current.querySelector("input:not(:disabled):checked");S||(S=p.current.querySelector("input:not(:disabled)")),S&&S.focus()}}),[]);const x=Ur(n,p),_=Jn(l),w=et.useMemo(()=>({name:_,onChange(S){v(S.target.value),u&&u(S,S.target.value)},value:y}),[_,u,v,y]);return O.jsx(Zn.Provider,{value:w,children:O.jsx(hi,{role:"radiogroup",ref:x,className:At(h.root,o),...c,children:i})})});function Ai(t){return Mt("MuiTextField",t)}It("MuiTextField",["root"]);const Mi={standard:Vr,filled:Ir,outlined:Mr},Ii=t=>{const{classes:e}=t;return Ft({root:["root"]},Ai,e)},Fi=gt(Yn,{name:"MuiTextField",slot:"Root"})({}),Oi=et.forwardRef(function(e,n){const r=Yt({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:s,className:l,color:u="primary",defaultValue:a,disabled:c=!1,error:p=!1,FormHelperTextProps:h,fullWidth:y=!1,helperText:v,id:x,InputLabelProps:_,inputProps:w,InputProps:S,inputRef:T,label:m,maxRows:C,minRows:$,multiline:E=!1,name:f,onBlur:d,onChange:g,onFocus:b,placeholder:k,required:R=!1,rows:q,select:W=!1,SelectProps:G,slots:F={},slotProps:U={},type:P,value:J,variant:I="outlined",...D}=r,N={...r,autoFocus:o,color:u,disabled:c,error:p,fullWidth:y,multiline:E,required:R,select:W,variant:I},nt=Ii(N),A=Jn(x),H=v&&A?`${A}-helper-text`:void 0,Z=m&&A?`${A}-label`:void 0,z=Mi[I],j={slots:F,slotProps:{input:S,inputLabel:_,htmlInput:w,formHelperText:h,select:G,...U}},Y={},M=j.slotProps.inputLabel;I==="outlined"&&(M&&typeof M.shrink<"u"&&(Y.notched=M.shrink),Y.label=m),W&&((!G||!G.native)&&(Y.id=void 0),Y["aria-describedby"]=void 0);const[tt,rt]=wt("root",{elementType:Fi,shouldForwardComponentProp:!0,externalForwardedProps:{...j,...D},ownerState:N,className:At(nt.root,l),ref:n,additionalProps:{disabled:c,error:p,fullWidth:y,required:R,color:u,variant:I}}),[X,K]=wt("input",{elementType:z,externalForwardedProps:j,additionalProps:Y,ownerState:N}),[B,dt]=wt("inputLabel",{elementType:Fr,externalForwardedProps:j,ownerState:N}),[L,Q]=wt("htmlInput",{elementType:"input",externalForwardedProps:j,ownerState:N}),[_t,Rt]=wt("formHelperText",{elementType:yi,externalForwardedProps:j,ownerState:N}),[pt,Ot]=wt("select",{elementType:Or,externalForwardedProps:j,ownerState:N}),it=O.jsx(X,{"aria-describedby":H,autoComplete:i,autoFocus:o,defaultValue:a,fullWidth:y,multiline:E,name:f,rows:q,maxRows:C,minRows:$,type:P,value:J,id:A,inputRef:T,onBlur:d,onChange:g,onFocus:b,placeholder:k,inputProps:Q,slots:{input:F.htmlInput?L:void 0},...K});return O.jsxs(tt,{...rt,children:[m!=null&&m!==""&&O.jsx(B,{htmlFor:A,id:Z,...dt,children:m}),W?O.jsx(pt,{"aria-describedby":H,id:A,labelId:Z,value:J,input:it,...Ot,children:s}):it,v&&O.jsx(_t,{id:H,...Rt,children:v})]})}),Li=Yr({root:{justifyContent:"center"}})(jr);function Xu(t,e){const[n,r]=et.useState(!!t),[i,o]=et.useState(e||""),[s,l]=et.useState("");function u(h){l(""),h&&o(h),r(!0)}function a(){l(""),o(""),r(!1)}function c(h){l(h),r(!1)}function p(){return s?O.jsx(gn,{mt:10,children:O.jsx(Li,{severity:"error",children:s})}):n?O.jsx(gn,{mt:10,children:O.jsx(Lr,{positionStatic:!0,message:i})}):null}return{setLoading:u,setSuccess:a,setFailure:c,Display:et.useCallback(p,[n,s]),displayPage:!n&&!s}}function Te(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Di(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=Te(i),n.then(o=>{o.onclose=()=>n=void 0},()=>{}),n};return(i,o)=>r().then(s=>o(s.transaction(e,i).objectStore(e)))}let Fe;function Ze(){return Fe||(Fe=Di("keyval-store","keyval")),Fe}function Wu(t,e=Ze()){return e("readonly",n=>Te(n.get(t)))}function Yu(t,e,n=Ze()){return n("readwrite",r=>(r.put(e,t),Te(r.transaction)))}function Ku(t,e=Ze()){return e("readwrite",n=>(n.delete(t),Te(n.transaction)))}function Ju(t,e){const[n,r]=et.useState(t);return et.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t]),n}var ji={value:()=>{}};function Ne(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ye(n)}function ye(t){this._=t}function qi(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ye.prototype=Ne.prototype={constructor:ye,on:function(t,e){var n=this._,r=qi(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=zi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Sn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Sn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ye(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function zi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Sn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ji,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ze="http://www.w3.org/1999/xhtml";const En={svg:"http://www.w3.org/2000/svg",xhtml:ze,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),En.hasOwnProperty(e)?{space:En[e],local:t}:t}function Bi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ze&&e.documentElement.namespaceURI===ze?e.createElement(t):e.createElementNS(n,t)}}function Hi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tr(t){var e=Pe(t);return(e.local?Hi:Bi)(e)}function Ui(){}function tn(t){return t==null?Ui:function(){return this.querySelector(t)}}function Vi(t){typeof t!="function"&&(t=tn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=new Array(s),u,a,c=0;c<s;++c)(u=o[c])&&(a=t.call(u,u.__data__,c,o))&&("__data__"in u&&(a.__data__=u.__data__),l[c]=a);return new ut(r,this._parents)}function er(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Gi(){return[]}function nr(t){return t==null?Gi:function(){return this.querySelectorAll(t)}}function Xi(t){return function(){return er(t.apply(this,arguments))}}function Wi(t){typeof t=="function"?t=Xi(t):t=nr(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&(r.push(t.call(u,u.__data__,a,s)),i.push(u));return new ut(r,i)}function rr(t){return function(){return this.matches(t)}}function ir(t){return function(e){return e.matches(t)}}var Yi=Array.prototype.find;function Ki(t){return function(){return Yi.call(this.children,t)}}function Ji(){return this.firstElementChild}function Qi(t){return this.select(t==null?Ji:Ki(typeof t=="function"?t:ir(t)))}var Zi=Array.prototype.filter;function to(){return Array.from(this.children)}function eo(t){return function(){return Zi.call(this.children,t)}}function no(t){return this.selectAll(t==null?to:eo(typeof t=="function"?t:ir(t)))}function ro(t){typeof t!="function"&&(t=rr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new ut(r,this._parents)}function or(t){return new Array(t.length)}function io(){return new ut(this._enter||this._groups.map(or),this._parents)}function we(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}we.prototype={constructor:we,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function oo(t){return function(){return t}}function so(t,e,n,r,i,o){for(var s=0,l,u=e.length,a=o.length;s<a;++s)(l=e[s])?(l.__data__=o[s],r[s]=l):n[s]=new we(t,o[s]);for(;s<u;++s)(l=e[s])&&(i[s]=l)}function ao(t,e,n,r,i,o,s){var l,u,a=new Map,c=e.length,p=o.length,h=new Array(c),y;for(l=0;l<c;++l)(u=e[l])&&(h[l]=y=s.call(u,u.__data__,l,e)+"",a.has(y)?i[l]=u:a.set(y,u));for(l=0;l<p;++l)y=s.call(t,o[l],l,o)+"",(u=a.get(y))?(r[l]=u,u.__data__=o[l],a.delete(y)):n[l]=new we(t,o[l]);for(l=0;l<c;++l)(u=e[l])&&a.get(h[l])===u&&(i[l]=u)}function lo(t){return t.__data__}function uo(t,e){if(!arguments.length)return Array.from(this,lo);var n=e?ao:so,r=this._parents,i=this._groups;typeof t!="function"&&(t=oo(t));for(var o=i.length,s=new Array(o),l=new Array(o),u=new Array(o),a=0;a<o;++a){var c=r[a],p=i[a],h=p.length,y=co(t.call(c,c&&c.__data__,a,r)),v=y.length,x=l[a]=new Array(v),_=s[a]=new Array(v),w=u[a]=new Array(h);n(c,p,x,_,w,y,e);for(var S=0,T=0,m,C;S<v;++S)if(m=x[S]){for(S>=T&&(T=S+1);!(C=_[T])&&++T<v;);m._next=C||null}}return s=new ut(s,r),s._enter=l,s._exit=u,s}function co(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fo(){return new ut(this._exit||this._groups.map(or),this._parents)}function ho(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function po(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),l=new Array(i),u=0;u<s;++u)for(var a=n[u],c=r[u],p=a.length,h=l[u]=new Array(p),y,v=0;v<p;++v)(y=a[v]||c[v])&&(h[v]=y);for(;u<i;++u)l[u]=n[u];return new ut(l,this._parents)}function go(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function yo(t){t||(t=mo);function e(p,h){return p&&h?t(p.__data__,h.__data__):!p-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],l=s.length,u=i[o]=new Array(l),a,c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new ut(i,this._parents).order()}function mo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _o(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xo(){return Array.from(this)}function vo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function wo(){let t=0;for(const e of this)++t;return t}function bo(){return!this.node()}function ko(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,l;o<s;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function So(t){return function(){this.removeAttribute(t)}}function Eo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Co(t,e){return function(){this.setAttribute(t,e)}}function $o(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ro(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function To(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function No(t,e){var n=Pe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Eo:So:typeof e=="function"?n.local?To:Ro:n.local?$o:Co)(n,e))}function sr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Po(t){return function(){this.style.removeProperty(t)}}function Ao(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Mo(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Io(t,e,n){return arguments.length>1?this.each((e==null?Po:typeof e=="function"?Mo:Ao)(t,e,n??"")):Xt(this.node(),t)}function Xt(t,e){return t.style.getPropertyValue(e)||sr(t).getComputedStyle(t,null).getPropertyValue(e)}function Fo(t){return function(){delete this[t]}}function Oo(t,e){return function(){this[t]=e}}function Lo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Do(t,e){return arguments.length>1?this.each((e==null?Fo:typeof e=="function"?Lo:Oo)(t,e)):this.node()[t]}function ar(t){return t.trim().split(/^|\s+/)}function en(t){return t.classList||new lr(t)}function lr(t){this._node=t,this._names=ar(t.getAttribute("class")||"")}lr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ur(t,e){for(var n=en(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function cr(t,e){for(var n=en(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function jo(t){return function(){ur(this,t)}}function qo(t){return function(){cr(this,t)}}function zo(t,e){return function(){(e.apply(this,arguments)?ur:cr)(this,t)}}function Bo(t,e){var n=ar(t+"");if(arguments.length<2){for(var r=en(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?zo:e?jo:qo)(n,e))}function Ho(){this.textContent=""}function Uo(t){return function(){this.textContent=t}}function Vo(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Go(t){return arguments.length?this.each(t==null?Ho:(typeof t=="function"?Vo:Uo)(t)):this.node().textContent}function Xo(){this.innerHTML=""}function Wo(t){return function(){this.innerHTML=t}}function Yo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ko(t){return arguments.length?this.each(t==null?Xo:(typeof t=="function"?Yo:Wo)(t)):this.node().innerHTML}function Jo(){this.nextSibling&&this.parentNode.appendChild(this)}function Qo(){return this.each(Jo)}function Zo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ts(){return this.each(Zo)}function es(t){var e=typeof t=="function"?t:tr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ns(){return null}function rs(t,e){var n=typeof t=="function"?t:tr(t),r=e==null?ns:typeof e=="function"?e:tn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function is(){var t=this.parentNode;t&&t.removeChild(this)}function os(){return this.each(is)}function ss(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function as(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ls(t){return this.select(t?as:ss)}function us(t){return arguments.length?this.property("__data__",t):this.node().__data__}function cs(t){return function(e){t.call(this,e,this.__data__)}}function fs(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function hs(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ds(t,e,n){return function(){var r=this.__on,i,o=cs(e);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ps(t,e,n){var r=fs(t+""),i,o=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,c;u<a;++u)for(i=0,c=l[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(l=e?ds:hs,i=0;i<o;++i)this.each(l(r[i],e,n));return this}function fr(t,e,n){var r=sr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function gs(t,e){return function(){return fr(this,t,e)}}function ys(t,e){return function(){return fr(this,t,e.apply(this,arguments))}}function ms(t,e){return this.each((typeof e=="function"?ys:gs)(t,e))}function*_s(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var nn=[null];function ut(t,e){this._groups=t,this._parents=e}function ce(){return new ut([[document.documentElement]],nn)}function xs(){return this}ut.prototype=ce.prototype={constructor:ut,select:Vi,selectAll:Wi,selectChild:Qi,selectChildren:no,filter:ro,data:uo,enter:io,exit:fo,join:ho,merge:po,selection:xs,order:go,sort:yo,call:_o,nodes:xo,node:vo,size:wo,empty:bo,each:ko,attr:No,style:Io,property:Do,classed:Bo,text:Go,html:Ko,raise:Qo,lower:ts,append:es,insert:rs,remove:os,clone:ls,datum:us,on:ps,dispatch:ms,[Symbol.iterator]:_s};function at(t){return typeof t=="string"?new ut([[document.querySelector(t)]],[document.documentElement]):new ut([[t]],nn)}function vs(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Cn(t,e){if(t=vs(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function V(t){return typeof t=="string"?new ut([document.querySelectorAll(t)],[document.documentElement]):new ut([er(t)],nn)}const ws={passive:!1},re={capture:!0,passive:!1};function Oe(t){t.stopImmediatePropagation()}function Vt(t){t.preventDefault(),t.stopImmediatePropagation()}function bs(t){var e=t.document.documentElement,n=at(t).on("dragstart.drag",Vt,re);"onselectstart"in e?n.on("selectstart.drag",Vt,re):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ks(t,e){var n=t.document.documentElement,r=at(t).on("dragstart.drag",null);e&&(r.on("click.drag",Vt,re),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const he=t=>()=>t;function Be(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:l,dx:u,dy:a,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:c}})}Be.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ss(t){return!t.ctrlKey&&!t.button}function Es(){return this.parentNode}function Cs(t,e){return e??{x:t.x,y:t.y}}function $s(){return navigator.maxTouchPoints||"ontouchstart"in this}function hr(){var t=Ss,e=Es,n=Cs,r=$s,i={},o=Ne("start","drag","end"),s=0,l,u,a,c,p=0;function h(m){m.on("mousedown.drag",y).filter(r).on("touchstart.drag",_).on("touchmove.drag",w,ws).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(m,C){if(!(c||!t.call(this,m,C))){var $=T(this,e.call(this,m,C),m,C,"mouse");$&&(at(m.view).on("mousemove.drag",v,re).on("mouseup.drag",x,re),bs(m.view),Oe(m),a=!1,l=m.clientX,u=m.clientY,$("start",m))}}function v(m){if(Vt(m),!a){var C=m.clientX-l,$=m.clientY-u;a=C*C+$*$>p}i.mouse("drag",m)}function x(m){at(m.view).on("mousemove.drag mouseup.drag",null),ks(m.view,a),Vt(m),i.mouse("end",m)}function _(m,C){if(t.call(this,m,C)){var $=m.changedTouches,E=e.call(this,m,C),f=$.length,d,g;for(d=0;d<f;++d)(g=T(this,E,m,C,$[d].identifier,$[d]))&&(Oe(m),g("start",m,$[d]))}}function w(m){var C=m.changedTouches,$=C.length,E,f;for(E=0;E<$;++E)(f=i[C[E].identifier])&&(Vt(m),f("drag",m,C[E]))}function S(m){var C=m.changedTouches,$=C.length,E,f;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<$;++E)(f=i[C[E].identifier])&&(Oe(m),f("end",m,C[E]))}function T(m,C,$,E,f,d){var g=o.copy(),b=Cn(d||$,C),k,R,q;if((q=n.call(m,new Be("beforestart",{sourceEvent:$,target:h,identifier:f,active:s,x:b[0],y:b[1],dx:0,dy:0,dispatch:g}),E))!=null)return k=q.x-b[0]||0,R=q.y-b[1]||0,function W(G,F,U){var P=b,J;switch(G){case"start":i[f]=W,J=s++;break;case"end":delete i[f],--s;case"drag":b=Cn(U||F,C),J=s;break}g.call(G,m,new Be(G,{sourceEvent:F,subject:q,target:h,identifier:f,active:J,x:b[0]+k,y:b[1]+R,dx:b[0]-P[0],dy:b[1]-P[1],dispatch:g}),E)}}return h.filter=function(m){return arguments.length?(t=typeof m=="function"?m:he(!!m),h):t},h.container=function(m){return arguments.length?(e=typeof m=="function"?m:he(m),h):e},h.subject=function(m){return arguments.length?(n=typeof m=="function"?m:he(m),h):n},h.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:he(!!m),h):r},h.on=function(){var m=o.on.apply(o,arguments);return m===o?h:m},h.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,h):Math.sqrt(p)},h}function rn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function fe(){}var ie=.7,be=1/ie,Gt="\\s*([+-]?\\d+)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rs=/^#([0-9a-f]{3,8})$/,Ts=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),Ns=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Ps=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${oe}\\)$`),As=new RegExp(`^rgba\\(${bt},${bt},${bt},${oe}\\)$`),Ms=new RegExp(`^hsl\\(${oe},${bt},${bt}\\)$`),Is=new RegExp(`^hsla\\(${oe},${bt},${bt},${oe}\\)$`),$n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rn(fe,se,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Rn,formatHex:Rn,formatHex8:Fs,formatHsl:Os,formatRgb:Tn,toString:Tn});function Rn(){return this.rgb().formatHex()}function Fs(){return this.rgb().formatHex8()}function Os(){return pr(this).formatHsl()}function Tn(){return this.rgb().formatRgb()}function se(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Rs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Nn(e):n===3?new ht(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?de(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?de(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ts.exec(t))?new ht(e[1],e[2],e[3],1):(e=Ns.exec(t))?new ht(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ps.exec(t))?de(e[1],e[2],e[3],e[4]):(e=As.exec(t))?de(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ms.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Is.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):$n.hasOwnProperty(t)?Nn($n[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function Nn(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function de(t,e,n,r){return r<=0&&(t=e=n=NaN),new ht(t,e,n,r)}function Ls(t){return t instanceof fe||(t=se(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function He(t,e,n,r){return arguments.length===1?Ls(t):new ht(t,e,n,r??1)}function ht(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}rn(ht,He,dr(fe,{brighter(t){return t=t==null?be:Math.pow(be,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ie:Math.pow(ie,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(jt(this.r),jt(this.g),jt(this.b),ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:Ds,formatRgb:An,toString:An}));function Pn(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function Ds(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function An(){const t=ke(this.opacity);return`${t===1?"rgb(":"rgba("}${jt(this.r)}, ${jt(this.g)}, ${jt(this.b)}${t===1?")":`, ${t})`}`}function ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function jt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Dt(t){return t=jt(t),(t<16?"0":"")+t.toString(16)}function Mn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new yt(t,e,n,r)}function pr(t){if(t instanceof yt)return new yt(t.h,t.s,t.l,t.opacity);if(t instanceof fe||(t=se(t)),!t)return new yt;if(t instanceof yt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-i,u=(o+i)/2;return l?(e===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-e)/l+2:s=(e-n)/l+4,l/=u<.5?o+i:2-o-i,s*=60):l=u>0&&u<1?0:s,new yt(s,l,u,t.opacity)}function js(t,e,n,r){return arguments.length===1?pr(t):new yt(t,e,n,r??1)}function yt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rn(yt,js,dr(fe,{brighter(t){return t=t==null?be:Math.pow(be,t),new yt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ie:Math.pow(ie,t),new yt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ht(Le(t>=240?t-240:t+120,i,r),Le(t,i,r),Le(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new yt(In(this.h),pe(this.s),pe(this.l),ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ke(this.opacity);return`${t===1?"hsl(":"hsla("}${In(this.h)}, ${pe(this.s)*100}%, ${pe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function In(t){return t=(t||0)%360,t<0?t+360:t}function pe(t){return Math.max(0,Math.min(1,t||0))}function Le(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gr=t=>()=>t;function qs(t,e){return function(n){return t+n*e}}function zs(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Bs(t){return(t=+t)==1?yr:function(e,n){return n-e?zs(e,n,t):gr(isNaN(e)?n:e)}}function yr(t,e){var n=e-t;return n?qs(t,n):gr(isNaN(t)?e:t)}const Fn=function t(e){var n=Bs(e);function r(i,o){var s=n((i=He(i)).r,(o=He(o)).r),l=n(i.g,o.g),u=n(i.b,o.b),a=yr(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=l(c),i.b=u(c),i.opacity=a(c),i+""}}return r.gamma=t,r}(1);function Tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,De=new RegExp(Ue.source,"g");function Hs(t){return function(){return t}}function Us(t){return function(e){return t(e)+""}}function Vs(t,e){var n=Ue.lastIndex=De.lastIndex=0,r,i,o,s=-1,l=[],u=[];for(t=t+"",e=e+"";(r=Ue.exec(t))&&(i=De.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:Tt(r,i)})),n=De.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?u[0]?Us(u[0].x):Hs(e):(e=u.length,function(a){for(var c=0,p;c<e;++c)l[(p=u[c]).i]=p.x(a);return l.join("")})}var On=180/Math.PI,Ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mr(t,e,n,r,i,o){var s,l,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*On,skewX:Math.atan(u)*On,scaleX:s,scaleY:l}}var ge;function Gs(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ve:mr(e.a,e.b,e.c,e.d,e.e,e.f)}function Xs(t){return t==null||(ge||(ge=document.createElementNS("http://www.w3.org/2000/svg","g")),ge.setAttribute("transform",t),!(t=ge.transform.baseVal.consolidate()))?Ve:(t=t.matrix,mr(t.a,t.b,t.c,t.d,t.e,t.f))}function _r(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function o(a,c,p,h,y,v){if(a!==p||c!==h){var x=y.push("translate(",null,e,null,n);v.push({i:x-4,x:Tt(a,p)},{i:x-2,x:Tt(c,h)})}else(p||h)&&y.push("translate("+p+e+h+n)}function s(a,c,p,h){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),h.push({i:p.push(i(p)+"rotate(",null,r)-2,x:Tt(a,c)})):c&&p.push(i(p)+"rotate("+c+r)}function l(a,c,p,h){a!==c?h.push({i:p.push(i(p)+"skewX(",null,r)-2,x:Tt(a,c)}):c&&p.push(i(p)+"skewX("+c+r)}function u(a,c,p,h,y,v){if(a!==p||c!==h){var x=y.push(i(y)+"scale(",null,",",null,")");v.push({i:x-4,x:Tt(a,p)},{i:x-2,x:Tt(c,h)})}else(p!==1||h!==1)&&y.push(i(y)+"scale("+p+","+h+")")}return function(a,c){var p=[],h=[];return a=t(a),c=t(c),o(a.translateX,a.translateY,c.translateX,c.translateY,p,h),s(a.rotate,c.rotate,p,h),l(a.skewX,c.skewX,p,h),u(a.scaleX,a.scaleY,c.scaleX,c.scaleY,p,h),a=c=null,function(y){for(var v=-1,x=h.length,_;++v<x;)p[(_=h[v]).i]=_.x(y);return p.join("")}}}var Ws=_r(Gs,"px, ","px)","deg)"),Ys=_r(Xs,", ",")",")"),Wt=0,Zt=0,Jt=0,xr=1e3,Se,te,Ee=0,qt=0,Ae=0,ae=typeof performance=="object"&&performance.now?performance:Date,vr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function on(){return qt||(vr(Ks),qt=ae.now()+Ae)}function Ks(){qt=0}function Ce(){this._call=this._time=this._next=null}Ce.prototype=sn.prototype={constructor:Ce,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?on():+n)+(e==null?0:+e),!this._next&&te!==this&&(te?te._next=this:Se=this,te=this),this._call=t,this._time=n,Ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ge())}};function sn(t,e,n){var r=new Ce;return r.restart(t,e,n),r}function Js(){on(),++Wt;for(var t=Se,e;t;)(e=qt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Wt}function Ln(){qt=(Ee=ae.now())+Ae,Wt=Zt=0;try{Js()}finally{Wt=0,Zs(),qt=0}}function Qs(){var t=ae.now(),e=t-Ee;e>xr&&(Ae-=e,Ee=t)}function Zs(){for(var t,e=Se,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Se=n);te=t,Ge(r)}function Ge(t){if(!Wt){Zt&&(Zt=clearTimeout(Zt));var e=t-qt;e>24?(t<1/0&&(Zt=setTimeout(Ln,t-ae.now()-Ae)),Jt&&(Jt=clearInterval(Jt))):(Jt||(Ee=ae.now(),Jt=setInterval(Qs,xr)),Wt=1,vr(Ln))}}function Dn(t,e,n){var r=new Ce;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ta=Ne("start","end","cancel","interrupt"),ea=[],wr=0,jn=1,Xe=2,me=3,qn=4,We=5,_e=6;function Me(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;na(t,n,{name:e,index:r,group:i,on:ta,tween:ea,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:wr})}function an(t,e){var n=mt(t,e);if(n.state>wr)throw new Error("too late; already scheduled");return n}function kt(t,e){var n=mt(t,e);if(n.state>me)throw new Error("too late; already running");return n}function mt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function na(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=sn(o,0,n.time);function o(a){n.state=jn,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var c,p,h,y;if(n.state!==jn)return u();for(c in r)if(y=r[c],y.name===n.name){if(y.state===me)return Dn(s);y.state===qn?(y.state=_e,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[c]):+c<e&&(y.state=_e,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[c])}if(Dn(function(){n.state===me&&(n.state=qn,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=Xe,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Xe){for(n.state=me,i=new Array(h=n.tween.length),c=0,p=-1;c<h;++c)(y=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(a){for(var c=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=We,1),p=-1,h=i.length;++p<h;)i[p].call(t,c);n.state===We&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=_e,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function ra(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Xe&&r.state<We,r.state=_e,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function ia(t){return this.each(function(){ra(this,t)})}function oa(t,e){var n,r;return function(){var i=kt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function sa(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=kt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var l={name:e,value:n},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=l;break}u===a&&i.push(l)}o.tween=i}}function aa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=mt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?oa:sa)(n,t,e))}function ln(t,e,n){var r=t._id;return t.each(function(){var i=kt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return mt(i,r).value[e]}}function br(t,e){var n;return(typeof e=="number"?Tt:e instanceof se?Fn:(n=se(e))?(e=n,Fn):Vs)(t,e)}function la(t){return function(){this.removeAttribute(t)}}function ua(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ca(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function fa(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function ha(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function da(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function pa(t,e){var n=Pe(t),r=n==="transform"?Ys:br;return this.attrTween(t,typeof e=="function"?(n.local?da:ha)(n,r,ln(this,"attr."+t,e)):e==null?(n.local?ua:la)(n):(n.local?fa:ca)(n,r,e))}function ga(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ya(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ma(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ya(t,o)),n}return i._value=e,i}function _a(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ga(t,o)),n}return i._value=e,i}function xa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Pe(t);return this.tween(n,(r.local?ma:_a)(r,e))}function va(t,e){return function(){an(this,t).delay=+e.apply(this,arguments)}}function wa(t,e){return e=+e,function(){an(this,t).delay=e}}function ba(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?va:wa)(e,t)):mt(this.node(),e).delay}function ka(t,e){return function(){kt(this,t).duration=+e.apply(this,arguments)}}function Sa(t,e){return e=+e,function(){kt(this,t).duration=e}}function Ea(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ka:Sa)(e,t)):mt(this.node(),e).duration}function Ca(t,e){if(typeof e!="function")throw new Error;return function(){kt(this,t).ease=e}}function $a(t){var e=this._id;return arguments.length?this.each(Ca(e,t)):mt(this.node(),e).ease}function Ra(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;kt(this,t).ease=n}}function Ta(t){if(typeof t!="function")throw new Error;return this.each(Ra(this._id,t))}function Na(t){typeof t!="function"&&(t=rr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new $t(r,this._parents,this._name,this._id)}function Pa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var u=e[l],a=n[l],c=u.length,p=s[l]=new Array(c),h,y=0;y<c;++y)(h=u[y]||a[y])&&(p[y]=h);for(;l<r;++l)s[l]=e[l];return new $t(s,this._parents,this._name,this._id)}function Aa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ma(t,e,n){var r,i,o=Aa(e)?an:kt;return function(){var s=o(this,t),l=s.on;l!==r&&(i=(r=l).copy()).on(e,n),s.on=i}}function Ia(t,e){var n=this._id;return arguments.length<2?mt(this.node(),n).on.on(t):this.each(Ma(n,t,e))}function Fa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Oa(){return this.on("end.remove",Fa(this._id))}function La(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l=r[s],u=l.length,a=o[s]=new Array(u),c,p,h=0;h<u;++h)(c=l[h])&&(p=t.call(c,c.__data__,h,l))&&("__data__"in c&&(p.__data__=c.__data__),a[h]=p,Me(a[h],e,n,h,a,mt(c,n)));return new $t(o,this._parents,e,n)}function Da(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nr(t));for(var r=this._groups,i=r.length,o=[],s=[],l=0;l<i;++l)for(var u=r[l],a=u.length,c,p=0;p<a;++p)if(c=u[p]){for(var h=t.call(c,c.__data__,p,u),y,v=mt(c,n),x=0,_=h.length;x<_;++x)(y=h[x])&&Me(y,e,n,x,h,v);o.push(h),s.push(c)}return new $t(o,s,e,n)}var ja=ce.prototype.constructor;function qa(){return new ja(this._groups,this._parents)}function za(t,e){var n,r,i;return function(){var o=Xt(this,t),s=(this.style.removeProperty(t),Xt(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function kr(t){return function(){this.style.removeProperty(t)}}function Ba(t,e,n){var r,i=n+"",o;return function(){var s=Xt(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Ha(t,e,n){var r,i,o;return function(){var s=Xt(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Xt(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l))}}function Ua(t,e){var n,r,i,o="style."+e,s="end."+o,l;return function(){var u=kt(this,t),a=u.on,c=u.value[o]==null?l||(l=kr(e)):void 0;(a!==n||i!==c)&&(r=(n=a).copy()).on(s,i=c),u.on=r}}function Va(t,e,n){var r=(t+="")=="transform"?Ws:br;return e==null?this.styleTween(t,za(t,r)).on("end.style."+t,kr(t)):typeof e=="function"?this.styleTween(t,Ha(t,r,ln(this,"style."+t,e))).each(Ua(this._id,t)):this.styleTween(t,Ba(t,r,e),n).on("end.style."+t,null)}function Ga(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Xa(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ga(t,s,n)),r}return o._value=e,o}function Wa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Xa(t,e,n??""))}function Ya(t){return function(){this.textContent=t}}function Ka(t){return function(){var e=t(this);this.textContent=e??""}}function Ja(t){return this.tween("text",typeof t=="function"?Ka(ln(this,"text",t)):Ya(t==null?"":t+""))}function Qa(t){return function(e){this.textContent=t.call(this,e)}}function Za(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Qa(i)),e}return r._value=t,r}function tl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Za(t))}function el(){for(var t=this._name,e=this._id,n=Sr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)if(u=s[a]){var c=mt(u,e);Me(u,t,n,a,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $t(r,this._parents,t,n)}function nl(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var l={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var a=kt(this,r),c=a.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),a.on=e}),i===0&&o()})}var rl=0;function $t(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Sr(){return++rl}var Et=ce.prototype;$t.prototype={constructor:$t,select:La,selectAll:Da,selectChild:Et.selectChild,selectChildren:Et.selectChildren,filter:Na,merge:Pa,selection:qa,transition:el,call:Et.call,nodes:Et.nodes,node:Et.node,size:Et.size,empty:Et.empty,each:Et.each,on:Ia,attr:pa,attrTween:xa,style:Va,styleTween:Wa,text:Ja,textTween:tl,remove:Oa,tween:aa,delay:ba,duration:Ea,ease:$a,easeVarying:Ta,end:nl,[Symbol.iterator]:Et[Symbol.iterator]};function il(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Qu(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ol={time:null,delay:0,duration:250,ease:il};function sl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function al(t){var e,n;t instanceof $t?(e=t._id,t=t._name):(e=Sr(),(n=ol).time=on(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&Me(u,t,e,a,s,n||sl(u,e));return new $t(r,this._parents,t,e)}ce.prototype.interrupt=ia;ce.prototype.transition=al;const Ye=Math.PI,Ke=2*Ye,Lt=1e-6,ll=Ke-Lt;function Er(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ul(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Er;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class cl{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Er:ul(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,u=r-e,a=i-n,c=s-e,p=l-n,h=c*c+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Lt)if(!(Math.abs(p*u-a*c)>Lt)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,v=i-l,x=u*u+a*a,_=y*y+v*v,w=Math.sqrt(x),S=Math.sqrt(h),T=o*Math.tan((Ye-Math.acos((x+h-_)/(2*w*S)))/2),m=T/S,C=T/w;Math.abs(m-1)>Lt&&this._append`L${e+m*c},${n+m*p}`,this._append`A${o},${o},0,0,${+(p*y>c*v)},${this._x1=e+C*u},${this._y1=n+C*a}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),a=e+l,c=n+u,p=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${a},${c}`:(Math.abs(this._x1-a)>Lt||Math.abs(this._y1-c)>Lt)&&this._append`L${a},${c}`,r&&(h<0&&(h=h%Ke+Ke),h>ll?this._append`A${r},${r},0,1,${p},${e-l},${n-u}A${r},${r},0,1,${p},${this._x1=a},${this._y1=c}`:h>Lt&&this._append`A${r},${r},0,${+(h>=Ye)},${p},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Zu(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,s=n.length,l,u=0,a=0;for(o=0;o<s;++o)l=n[o],u+=l.x,a+=l.y;for(u=(u/s-t)*r,a=(a/s-e)*r,o=0;o<s;++o)l=n[o],l.x-=u,l.y-=a}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function fl(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Cr(this.cover(e,n),e,n,t)}function Cr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,s={data:r},l=t._x0,u=t._y0,a=t._x1,c=t._y1,p,h,y,v,x,_,w,S;if(!o)return t._root=s,t;for(;o.length;)if((x=e>=(p=(l+a)/2))?l=p:a=p,(_=n>=(h=(u+c)/2))?u=h:c=h,i=o,!(o=o[w=_<<1|x]))return i[w]=s,t;if(y=+t._x.call(null,o.data),v=+t._y.call(null,o.data),e===y&&n===v)return s.next=o,i?i[w]=s:t._root=s,t;do i=i?i[w]=new Array(4):t._root=new Array(4),(x=e>=(p=(l+a)/2))?l=p:a=p,(_=n>=(h=(u+c)/2))?u=h:c=h;while((w=_<<1|x)===(S=(v>=h)<<1|y>=p));return i[S]=o,i[w]=s,t}function hl(t){var e,n,r=t.length,i,o,s=new Array(r),l=new Array(r),u=1/0,a=1/0,c=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,l[n]=o,i<u&&(u=i),i>c&&(c=i),o<a&&(a=o),o>p&&(p=o));if(u>c||a>p)return this;for(this.cover(u,a).cover(c,p),n=0;n<r;++n)Cr(this,s[n],l[n],t[n]);return this}function dl(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s=i-n||1,l=this._root,u,a;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,u=new Array(4),u[a]=l,l=u,s*=2,a){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function pl(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function gl(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function lt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function yl(t,e,n){var r,i=this._x0,o=this._y0,s,l,u,a,c=this._x1,p=this._y1,h=[],y=this._root,v,x;for(y&&h.push(new lt(y,i,o,c,p)),n==null?n=1/0:(i=t-n,o=e-n,c=t+n,p=e+n,n*=n);v=h.pop();)if(!(!(y=v.node)||(s=v.x0)>c||(l=v.y0)>p||(u=v.x1)<i||(a=v.y1)<o))if(y.length){var _=(s+u)/2,w=(l+a)/2;h.push(new lt(y[3],_,w,u,a),new lt(y[2],s,w,_,a),new lt(y[1],_,l,u,w),new lt(y[0],s,l,_,w)),(x=(e>=w)<<1|t>=_)&&(v=h[h.length-1],h[h.length-1]=h[h.length-1-x],h[h.length-1-x]=v)}else{var S=t-+this._x.call(null,y.data),T=e-+this._y.call(null,y.data),m=S*S+T*T;if(m<n){var C=Math.sqrt(n=m);i=t-C,o=e-C,c=t+C,p=e+C,r=y.data}}return r}function ml(t){if(isNaN(c=+this._x.call(null,t))||isNaN(p=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,l=this._y0,u=this._x1,a=this._y1,c,p,h,y,v,x,_,w;if(!n)return this;if(n.length)for(;;){if((v=c>=(h=(s+u)/2))?s=h:u=h,(x=p>=(y=(l+a)/2))?l=y:a=y,e=n,!(n=n[_=x<<1|v]))return this;if(!n.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(r=e,w=_)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[_]=o:delete e[_],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[w]=n:this._root=n),this):(this._root=o,this)}function _l(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function xl(){return this._root}function vl(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function wl(t){var e=[],n,r=this._root,i,o,s,l,u;for(r&&e.push(new lt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,l=n.x1,u=n.y1)&&r.length){var a=(o+l)/2,c=(s+u)/2;(i=r[3])&&e.push(new lt(i,a,c,l,u)),(i=r[2])&&e.push(new lt(i,o,c,a,u)),(i=r[1])&&e.push(new lt(i,a,s,l,c)),(i=r[0])&&e.push(new lt(i,o,s,a,c))}return this}function bl(t){var e=[],n=[],r;for(this._root&&e.push(new lt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,l=r.y0,u=r.x1,a=r.y1,c=(s+u)/2,p=(l+a)/2;(o=i[0])&&e.push(new lt(o,s,l,c,p)),(o=i[1])&&e.push(new lt(o,c,l,u,p)),(o=i[2])&&e.push(new lt(o,s,p,c,a)),(o=i[3])&&e.push(new lt(o,c,p,u,a))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function kl(t){return t[0]}function Sl(t){return arguments.length?(this._x=t,this):this._x}function El(t){return t[1]}function Cl(t){return arguments.length?(this._y=t,this):this._y}function $r(t,e,n){var r=new un(e??kl,n??El,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function un(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function zn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ct=$r.prototype=un.prototype;ct.copy=function(){var t=new un(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=zn(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=zn(r));return t};ct.add=fl;ct.addAll=hl;ct.cover=dl;ct.data=pl;ct.extent=gl;ct.find=yl;ct.remove=ml;ct.removeAll=_l;ct.root=xl;ct.size=vl;ct.visit=wl;ct.visitAfter=bl;ct.x=Sl;ct.y=Cl;function ne(t){return function(){return t}}function $e(t){return(t()-.5)*1e-6}function $l(t){return t.x+t.vx}function Rl(t){return t.y+t.vy}function tc(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=ne(t==null?1:+t));function s(){for(var a,c=e.length,p,h,y,v,x,_,w=0;w<o;++w)for(p=$r(e,$l,Rl).visitAfter(l),a=0;a<c;++a)h=e[a],x=n[h.index],_=x*x,y=h.x+h.vx,v=h.y+h.vy,p.visit(S);function S(T,m,C,$,E){var f=T.data,d=T.r,g=x+d;if(f){if(f.index>h.index){var b=y-f.x-f.vx,k=v-f.y-f.vy,R=b*b+k*k;R<g*g&&(b===0&&(b=$e(r),R+=b*b),k===0&&(k=$e(r),R+=k*k),R=(g-(R=Math.sqrt(R)))/R*i,h.vx+=(b*=R)*(g=(d*=d)/(_+d)),h.vy+=(k*=R)*g,f.vx-=b*(g=1-g),f.vy-=k*g)}return}return m>y+g||$<y-g||C>v+g||E<v-g}}function l(a){if(a.data)return a.r=n[a.data.index];for(var c=a.r=0;c<4;++c)a[c]&&a[c].r>a.r&&(a.r=a[c].r)}function u(){if(e){var a,c=e.length,p;for(n=new Array(c),a=0;a<c;++a)p=e[a],n[p.index]=+t(p,a,e)}}return s.initialize=function(a,c){e=a,r=c,u()},s.iterations=function(a){return arguments.length?(o=+a,s):o},s.strength=function(a){return arguments.length?(i=+a,s):i},s.radius=function(a){return arguments.length?(t=typeof a=="function"?a:ne(+a),u(),s):t},s}function Tl(t){return t.index}function Bn(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function ec(t){var e=Tl,n=p,r,i=ne(30),o,s,l,u,a,c=1;t==null&&(t=[]);function p(_){return 1/Math.min(l[_.source.index],l[_.target.index])}function h(_){for(var w=0,S=t.length;w<c;++w)for(var T=0,m,C,$,E,f,d,g;T<S;++T)m=t[T],C=m.source,$=m.target,E=$.x+$.vx-C.x-C.vx||$e(a),f=$.y+$.vy-C.y-C.vy||$e(a),d=Math.sqrt(E*E+f*f),d=(d-o[T])/d*_*r[T],E*=d,f*=d,$.vx-=E*(g=u[T]),$.vy-=f*g,C.vx+=E*(g=1-g),C.vy+=f*g}function y(){if(s){var _,w=s.length,S=t.length,T=new Map(s.map((C,$)=>[e(C,$,s),C])),m;for(_=0,l=new Array(w);_<S;++_)m=t[_],m.index=_,typeof m.source!="object"&&(m.source=Bn(T,m.source)),typeof m.target!="object"&&(m.target=Bn(T,m.target)),l[m.source.index]=(l[m.source.index]||0)+1,l[m.target.index]=(l[m.target.index]||0)+1;for(_=0,u=new Array(S);_<S;++_)m=t[_],u[_]=l[m.source.index]/(l[m.source.index]+l[m.target.index]);r=new Array(S),v(),o=new Array(S),x()}}function v(){if(s)for(var _=0,w=t.length;_<w;++_)r[_]=+n(t[_],_,t)}function x(){if(s)for(var _=0,w=t.length;_<w;++_)o[_]=+i(t[_],_,t)}return h.initialize=function(_,w){s=_,a=w,y()},h.links=function(_){return arguments.length?(t=_,y(),h):t},h.id=function(_){return arguments.length?(e=_,h):e},h.iterations=function(_){return arguments.length?(c=+_,h):c},h.strength=function(_){return arguments.length?(n=typeof _=="function"?_:ne(+_),v(),h):n},h.distance=function(_){return arguments.length?(i=typeof _=="function"?_:ne(+_),x(),h):i},h}const Nl=1664525,Pl=1013904223,Hn=4294967296;function Al(){let t=1;return()=>(t=(Nl*t+Pl)%Hn)/Hn}var Ml=10,Il=Math.PI*(3-Math.sqrt(5));function nc(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,l=new Map,u=sn(p),a=Ne("tick","end"),c=Al();t==null&&(t=[]);function p(){h(),a.call("tick",e),n<r&&(u.stop(),a.call("end",e))}function h(x){var _,w=t.length,S;x===void 0&&(x=1);for(var T=0;T<x;++T)for(n+=(o-n)*i,l.forEach(function(m){m(n)}),_=0;_<w;++_)S=t[_],S.fx==null?S.x+=S.vx*=s:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=s:(S.y=S.fy,S.vy=0);return e}function y(){for(var x=0,_=t.length,w;x<_;++x){if(w=t[x],w.index=x,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var S=Ml*Math.sqrt(.5+x),T=x*Il;w.x=S*Math.cos(T),w.y=S*Math.sin(T)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function v(x){return x.initialize&&x.initialize(t,c),x}return y(),e={tick:h,restart:function(){return u.restart(p),e},stop:function(){return u.stop(),e},nodes:function(x){return arguments.length?(t=x,y(),l.forEach(v),e):t},alpha:function(x){return arguments.length?(n=+x,e):n},alphaMin:function(x){return arguments.length?(r=+x,e):r},alphaDecay:function(x){return arguments.length?(i=+x,e):+i},alphaTarget:function(x){return arguments.length?(o=+x,e):o},velocityDecay:function(x){return arguments.length?(s=1-x,e):1-s},randomSource:function(x){return arguments.length?(c=x,l.forEach(v),e):c},force:function(x,_){return arguments.length>1?(_==null?l.delete(x):l.set(x,v(_)),e):l.get(x)},find:function(x,_,w){var S=0,T=t.length,m,C,$,E,f;for(w==null?w=1/0:w*=w,S=0;S<T;++S)E=t[S],m=x-E.x,C=_-E.y,$=m*m+C*C,$<w&&(f=E,w=$);return f},on:function(x,_){return arguments.length>1?(a.on(x,_),e):a.on(x)}}}function Bt(t){return function(){return t}}function Fl(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new cl(e)}function Ol(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Rr(t){this._context=t}Rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ll(t){return new Rr(t)}function Dl(t){return t[0]}function jl(t){return t[1]}function rc(t,e){var n=Bt(!0),r=null,i=Ll,o=null,s=Fl(l);t=typeof t=="function"?t:t===void 0?Dl:Bt(t),e=typeof e=="function"?e:e===void 0?jl:Bt(e);function l(u){var a,c=(u=Ol(u)).length,p,h=!1,y;for(r==null&&(o=i(y=s())),a=0;a<=c;++a)!(a<c&&n(p=u[a],a,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(p,a,u),+e(p,a,u));if(y)return o=null,y+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Bt(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:Bt(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Bt(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),l):r},l}function ee(t,e,n){this.k=t,this.x=e,this.y=n}ee.prototype={constructor:ee,scale:function(t){return t===1?this:new ee(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ee(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ee.prototype;const cn="rgb(255, 172, 30)",fn="rgba(255, 172, 30, 0.4)";function ql(t){V(`.nodeSelector-${t} > fieldset`).style("border-width","3px").style("border-color",cn),V(`.highlight-${t}:not(.referenceNode) > .nodeDropdown`).style("background-color",fn)}function zl(t){V(`.nodeSelector-${t} > fieldset`).style("border-width",null).style("border-color",null),V(`.highlight-${t}:not(.referenceNode) > .nodeDropdown`).style("background-color",null)}function Bl(t){V(`.node-${t}`).attr("stroke-width","3px").attr("stroke",cn)}function Hl(t){V(`.node-${t}`).attr("stroke-width","0px")}function Ul(){V(".nodeCircle").attr("stroke-width","0px"),V(".nodeDropdown").style("background-color",null),V(".nodeSelector > fieldset").style("border-width",null).style("border-color",null)}function Vl(t){V(`.edgeSelector-${t} > fieldset`).style("border-width","3px").style("border-color",cn),V(`.highlight-${t} > .edgeDropdown`).style("background-color",fn)}function Gl(t){V(`.edgeSelector-${t} > fieldset`).style("border-width",null).style("border-color",null),V(`.highlight-${t} > .edgeDropdown`).style("background-color",null)}function Xl(t){V(`.edge-${t}`).attr("stroke",fn)}function Wl(t){V(`.edge-${t}`).attr("stroke","transparent")}function Yl(){V(".edgeTransparent").attr("stroke","transparent"),V(".edgeSelector > fieldset").style("border-width",null).style("border-color",null),V(".edgeDropdown").style("background-color",null)}const Nt={highlightTextEditorNode:ql,highlightGraphNode:Bl,clearTextEditorNode:zl,clearGraphNode:Hl,clearAllNodes:Ul,highlightTextEditorEdge:Vl,highlightGraphEdge:Xl,clearTextEditorEdge:Gl,clearGraphEdge:Wl,clearAllEdges:Yl};function Kl(t){return t==="target"?"source":"target"}function Tr(t,e,n,r){const i=n-t,o=r-e;return Math.atan2(o,i)}function Jl(t,e,n,r,i,o,s){const u=Math.PI/3/5,a=Tr(t,e,n,r),c=a+u*o,p=a+Math.PI-u*o,h=t+Math.cos(c)*s,y=e+Math.sin(c)*s,v=n+Math.cos(p)*s,x=r+Math.sin(p)*s,_=50;let w=o*.1+o*.3;(o===1||o===-1)&&(w+=o*.4);const S=(h+v)/2,T=(y+x)/2,m=v-h,C=x-y,$=Math.sqrt(m**2+C**2),E=m/$,d=-(C/$),g=E,b=S+_*w*d,k=T+_*w*g;return{x1:h,y1:y,qx:b,qy:k,x2:v,y2:x}}function Ql(t,e,n,r,i){const o=Tr(t,e,n,r),s=t+Math.cos(o)*i,l=e+Math.sin(o)*i;return{x:s,y:l}}function Zl(t,e,n=0){return Math.max(n,Math.min(t,e))}function je(t,e,n,r,i){const o=typeof t=="string"?t:String(t??""),s=at("body").append("svg").attr("width",300).attr("height",300),l=s.append("text").attr("font-size",r).style("visibility","hidden").text(o),u=Number(n)*2*.9;let a=o,c=0;const p=l.node();if(p&&(c=p.getComputedTextLength(),c>Number(n)*2*1.25)){for(;c>u&&a.length>0;)a=a.slice(0,-1),l.text(`${a.slice(0,-1)}...`),c=p.getComputedTextLength();a=`${a}...`}l.remove(),s.remove(),e.append("tspan").attr("x",0).attr("dy",i).text(a)}function tu(){const t=at(this),e=t.node();if(!e)return;const n=e.getComputedTextLength(),r=t.text(),i=e.parentNode;if(!i)return;const s=at(i).select("circle").attr("r"),l=Number(s);if(isNaN(l))return;const u=l*.4,a=9,c=l*2,p=`${Math.max(a,Math.min(u,c/Math.sqrt(Math.max(n,1))))}px`;t.style("font-size",p),t.text("");const h=r.split(" ");if(h.length===1||n<10)je(r,t,l,p,"0em");else{const y=Math.ceil(h.length/2),v=h.slice(0,y).join(" "),x=h.slice(y).join(" ");je(v,t,l,p,"-0.4em"),je(x,t,l,p,"1.2em")}}function eu(){const t=at(this),e=t.node();if(!e)return;let n=e.getComputedTextLength(),r=t.text();const i=e.parentNode;if(!i)return;const s=at(i).select("circle").attr("r"),l=Number(s);if(isNaN(l))return;const a=l*2*.9;for(;n>a&&r.length>0;){r=r.slice(0,-1),t.text(`${r}...`);const c=t.node();n=c?c.getComputedTextLength():0}}function nu(t){const{source:e,target:n}=t,r=(e.x+n.x)/2,i=(e.y+n.y)/2;return{x:r,y:i}}function ru(t,e,n,r,i){return(t-n)**2+(e-r)**2<=i**2}function iu(t,e=["biolink:related_to"]){return t.predicates&&t.predicates.findIndex(n=>!e.includes(n))>-1||t.predicate&&!e.includes(t.predicate)}function ou(){at(this).transition().duration(500).style("opacity",1)}function su(){at(this).transition().duration(1e3).style("opacity",0)}const st={getOtherEdgeEnd:Kl,getCurvedEdgePos:Jl,getShortenedLineEnd:Ql,getBoundedValue:Zl,ellipsisOverflow:eu,getEdgeMidpoint:nu,fitTextIntoCircle:tu,isInside:ru,shouldShowArrow:iu,showElement:ou,hideElement:su};function au(t){function e(i,o){i.active||t.alphaTarget(.01).restart(),o.fx=o.x,o.fy=o.y}function n(i,o){o.fx=i.x,o.fy=i.y}function r(i,o){i.active||t.alphaTarget(0),o.fx=null,o.fy=null}return hr().on("start",e).on("drag",n).on("end",r)}function lu(t,e,n,r,i,o){function s(a){a.active||e.stop(),a.sourceEvent.stopPropagation()}function l(a,c){const{id:p}=c,h=at(this).attr("class").split(" ")[0],y=st.getOtherEdgeEnd(h),v=c[y].x,x=c[y].y,_=st.getBoundedValue(v,n),w=st.getBoundedValue(x,r),S=st.getBoundedValue(a.x,n),T=st.getBoundedValue(a.y,r),{x:m,y:C}=st.getShortenedLineEnd(_,w,S,T,i),$=h==="source"?`${S},${T}`:`${m},${C}`,E=h==="source"?`${m},${C}`:`${S},${T}`,f=`M${$} ${E}`;let d=f;(h==="source"&&S>m||h==="target"&&S<m)&&(d=`M${E} ${$}`),at(`#${p}`).call(g=>g.select(".edgePath").attr("d",f)).call(g=>g.select(".edgeTransparent").attr("d",d)).call(g=>g.select(`.${h}`).attr("cx",S).attr("cy",T)).call(g=>g.select(`.${y}`).attr("cx",m).attr("cy",C))}function u(a,c){const p=V(".nodeCircle").data().find(v=>st.isInside(a.x,a.y,v.x,v.y,i)),{id:h}=c,y=at(this).attr("class").split(" ")[0];if(p&&p.id)o(h,{source:"subject",target:"object"}[y],p.id);else{let{x1:v,y1:x,qx:_,qy:w,x2:S,y2:T}=st.getCurvedEdgePos(c.source.x,c.source.y,c.target.x,c.target.y,c.numEdges,c.index,i);S=st.getBoundedValue(S,n),T=st.getBoundedValue(T,r),v=st.getBoundedValue(v,n),x=st.getBoundedValue(x,r);const m=`${v},${x}`,C=`${S},${T}`,$=`M${m}Q${_},${w} ${C}`;let E=$;v>S&&(E=`M${C}Q${_},${w} ${m}`),at(`#${h}`).call(f=>f.select(".edgePath").attr("d",$)).call(f=>f.select(".edgeTransparent").attr("d",E)).call(f=>f.select(".source").attr("cx",v).attr("cy",x)).call(f=>f.select(".target").attr("cx",S).attr("cy",T))}}return hr().subject(()=>t).on("start",s).on("drag",l).on("end",u)}const uu={dragNode:au,dragEdgeEnd:lu};var xe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var cu=xe.exports,Un;function fu(){return Un||(Un=1,function(t,e){((n,r)=>{t.exports=r()})(cu,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,l={},u=0,a={};function c(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(d){var g=C(d);g.chunkSize=parseInt(g.chunkSize),d.step||d.chunk||(g.chunkSize=null),this._handle=new x(g),(this._handle.streamer=this)._config=g}).call(this,f),this.parseChunk=function(d,g){var b=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<b){let R=this._config.newline;R||(k=this._config.quoteChar||'"',R=this._handle.guessLineEndings(d,k)),d=[...d.split(R).slice(b)].join(R)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(d))!==void 0&&(d=k),this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+d,k=(this._partialLine="",this._handle.parse(b,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(d=k.meta.cursor,b=(this._finished||(this._partialLine=b.substring(d-this._baseIndex),this._baseIndex=d),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:k,workerId:a.WORKER_ID,finished:b});else if(E(this._config.chunk)&&!g){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!b||!E(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),b||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(d){E(this._config.error)?this._config.error(d):s&&this._config.error&&r.postMessage({workerId:a.WORKER_ID,error:d,finished:!1})}}function p(f){var d;(f=f||{}).chunkSize||(f.chunkSize=a.RemoteChunkSize),c.call(this,f),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(g){this._input=g,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),o||(d.onload=$(this._chunkLoaded,this),d.onerror=$(this._chunkError,this)),d.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var g,b=this._config.downloadRequestHeaders;for(g in b)d.setRequestHeader(g,b[g])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,d.setRequestHeader("Range","bytes="+this._start+"-"+k));try{d.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}o&&d.status===0&&this._chunkError()}},this._chunkLoaded=function(){d.readyState===4&&(d.status<200||400<=d.status?this._chunkError():(this._start+=this._config.chunkSize||d.responseText.length,this._finished=!this._config.chunkSize||this._start>=(g=>(g=g.getResponseHeader("Content-Range"))!==null?parseInt(g.substring(g.lastIndexOf("/")+1)):-1)(d),this.parseChunk(d.responseText)))},this._chunkError=function(g){g=d.statusText||g,this._sendError(new Error(g))}}function h(f){(f=f||{}).chunkSize||(f.chunkSize=a.LocalChunkSize),c.call(this,f);var d,g,b=typeof FileReader<"u";this.stream=function(k){this._input=k,g=k.slice||k.webkitSlice||k.mozSlice,b?((d=new FileReader).onload=$(this._chunkLoaded,this),d.onerror=$(this._chunkError,this)):d=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,R=(this._config.chunkSize&&(R=Math.min(this._start+this._config.chunkSize,this._input.size),k=g.call(k,this._start,R)),d.readAsText(k,this._config.encoding));b||this._chunkLoaded({target:{result:R}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(d.error)}}function y(f){var d;c.call(this,f=f||{}),this.stream=function(g){return d=g,this._nextChunk()},this._nextChunk=function(){var g,b;if(!this._finished)return g=this._config.chunkSize,d=g?(b=d.substring(0,g),d.substring(g)):(b=d,""),this._finished=!d,this.parseChunk(b)}}function v(f){c.call(this,f=f||{});var d=[],g=!0,b=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){b&&d.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),d.length?this.parseChunk(d.shift()):g=!0},this._streamData=$(function(k){try{d.push(typeof k=="string"?k:k.toString(this._config.encoding)),g&&(g=!1,this._checkIsFinished(),this.parseChunk(d.shift()))}catch(R){this._streamError(R)}},this),this._streamError=$(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=$(function(){this._streamCleanUp(),b=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(f){var d,g,b,k,R=Math.pow(2,53),q=-R,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,U=0,P=0,J=!1,I=!1,D=[],N={data:[],errors:[],meta:{}};function nt(z){return f.skipEmptyLines==="greedy"?z.join("").trim()==="":z.length===1&&z[0].length===0}function A(){if(N&&b&&(Z("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),b=!1),f.skipEmptyLines&&(N.data=N.data.filter(function(M){return!nt(M)})),H()){let M=function(tt,rt){E(f.transformHeader)&&(tt=f.transformHeader(tt,rt)),D.push(tt)};if(N)if(Array.isArray(N.data[0])){for(var z=0;H()&&z<N.data.length;z++)N.data[z].forEach(M);N.data.splice(0,1)}else N.data.forEach(M)}function j(M,tt){for(var rt=f.header?{}:[],X=0;X<M.length;X++){var K=X,B=M[X],B=((dt,L)=>(Q=>(f.dynamicTypingFunction&&f.dynamicTyping[Q]===void 0&&(f.dynamicTyping[Q]=f.dynamicTypingFunction(Q)),(f.dynamicTyping[Q]||f.dynamicTyping)===!0))(dt)?L==="true"||L==="TRUE"||L!=="false"&&L!=="FALSE"&&((Q=>{if(W.test(Q)&&(Q=parseFloat(Q),q<Q&&Q<R))return 1})(L)?parseFloat(L):G.test(L)?new Date(L):L===""?null:L):L)(K=f.header?X>=D.length?"__parsed_extra":D[X]:K,B=f.transform?f.transform(B,K):B);K==="__parsed_extra"?(rt[K]=rt[K]||[],rt[K].push(B)):rt[K]=B}return f.header&&(X>D.length?Z("FieldMismatch","TooManyFields","Too many fields: expected "+D.length+" fields but parsed "+X,P+tt):X<D.length&&Z("FieldMismatch","TooFewFields","Too few fields: expected "+D.length+" fields but parsed "+X,P+tt)),rt}var Y;N&&(f.header||f.dynamicTyping||f.transform)&&(Y=1,!N.data.length||Array.isArray(N.data[0])?(N.data=N.data.map(j),Y=N.data.length):N.data=j(N.data,0),f.header&&N.meta&&(N.meta.fields=D),P+=Y)}function H(){return f.header&&D.length===0}function Z(z,j,Y,M){z={type:z,code:j,message:Y},M!==void 0&&(z.row=M),N.errors.push(z)}E(f.step)&&(k=f.step,f.step=function(z){N=z,H()?A():(A(),N.data.length!==0&&(U+=z.data.length,f.preview&&U>f.preview?g.abort():(N.data=N.data[0],k(N,F))))}),this.parse=function(z,j,Y){var M=f.quoteChar||'"',M=(f.newline||(f.newline=this.guessLineEndings(z,M)),b=!1,f.delimiter?E(f.delimiter)&&(f.delimiter=f.delimiter(z),N.meta.delimiter=f.delimiter):((M=((tt,rt,X,K,B)=>{var dt,L,Q,_t;B=B||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var Rt=0;Rt<B.length;Rt++){for(var pt,Ot=B[Rt],it=0,xt=0,ot=0,ft=(Q=void 0,new w({comments:K,delimiter:Ot,newline:rt,preview:10}).parse(tt)),St=0;St<ft.data.length;St++)X&&nt(ft.data[St])?ot++:(pt=ft.data[St].length,xt+=pt,Q===void 0?Q=pt:0<pt&&(it+=Math.abs(pt-Q),Q=pt));0<ft.data.length&&(xt/=ft.data.length-ot),(L===void 0||it<=L)&&(_t===void 0||_t<xt)&&1.99<xt&&(L=it,dt=Ot,_t=xt)}return{successful:!!(f.delimiter=dt),bestDelimiter:dt}})(z,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess)).successful?f.delimiter=M.bestDelimiter:(b=!0,f.delimiter=a.DefaultDelimiter),N.meta.delimiter=f.delimiter),C(f));return f.preview&&f.header&&M.preview++,d=z,g=new w(M),N=g.parse(d,j,Y),A(),J?{meta:{paused:!0}}:N||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,g.abort(),d=E(f.chunk)?"":d.substring(g.getCharIndex())},this.resume=function(){F.streamer._halted?(J=!1,F.streamer.parseChunk(d,!0)):setTimeout(F.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,g.abort(),N.meta.aborted=!0,E(f.complete)&&f.complete(N),d=""},this.guessLineEndings=function(tt,M){tt=tt.substring(0,1048576);var M=new RegExp(_(M)+"([^]*?)"+_(M),"gm"),Y=(tt=tt.replace(M,"")).split("\r"),M=tt.split(`
`),tt=1<M.length&&M[0].length<Y[0].length;if(Y.length===1||tt)return`
`;for(var rt=0,X=0;X<Y.length;X++)Y[X][0]===`
`&&rt++;return rt>=Y.length/2?`\r
`:"\r"}}function _(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(f){var d=(f=f||{}).delimiter,g=f.newline,b=f.comments,k=f.step,R=f.preview,q=f.fastMode,W=null,G=!1,F=f.quoteChar==null?'"':f.quoteChar,U=F;if(f.escapeChar!==void 0&&(U=f.escapeChar),(typeof d!="string"||-1<a.BAD_DELIMITERS.indexOf(d))&&(d=","),b===d)throw new Error("Comment character same as delimiter");b===!0?b="#":(typeof b!="string"||-1<a.BAD_DELIMITERS.indexOf(b))&&(b=!1),g!==`
`&&g!=="\r"&&g!==`\r
`&&(g=`
`);var P=0,J=!1;this.parse=function(I,D,N){if(typeof I!="string")throw new Error("Input must be a string");var nt=I.length,A=d.length,H=g.length,Z=b.length,z=E(k),j=[],Y=[],M=[],tt=P=0;if(!I)return it();if(q||q!==!1&&I.indexOf(F)===-1){for(var rt=I.split(g),X=0;X<rt.length;X++){if(M=rt[X],P+=M.length,X!==rt.length-1)P+=g.length;else if(N)return it();if(!b||M.substring(0,Z)!==b){if(z){if(j=[],_t(M.split(d)),xt(),J)return it()}else _t(M.split(d));if(R&&R<=X)return j=j.slice(0,R),it(!0)}}return it()}for(var K=I.indexOf(d,P),B=I.indexOf(g,P),dt=new RegExp(_(U)+_(F),"g"),L=I.indexOf(F,P);;)if(I[P]===F)for(L=P,P++;;){if((L=I.indexOf(F,L+1))===-1)return N||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:P}),pt();if(L===nt-1)return pt(I.substring(P,L).replace(dt,F));if(F===U&&I[L+1]===U)L++;else if(F===U||L===0||I[L-1]!==U){K!==-1&&K<L+1&&(K=I.indexOf(d,L+1));var Q=Rt((B=B!==-1&&B<L+1?I.indexOf(g,L+1):B)===-1?K:Math.min(K,B));if(I.substr(L+1+Q,A)===d){M.push(I.substring(P,L).replace(dt,F)),I[P=L+1+Q+A]!==F&&(L=I.indexOf(F,P)),K=I.indexOf(d,P),B=I.indexOf(g,P);break}if(Q=Rt(B),I.substring(L+1+Q,L+1+Q+H)===g){if(M.push(I.substring(P,L).replace(dt,F)),Ot(L+1+Q+H),K=I.indexOf(d,P),L=I.indexOf(F,P),z&&(xt(),J))return it();if(R&&j.length>=R)return it(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:P}),L++}}else if(b&&M.length===0&&I.substring(P,P+Z)===b){if(B===-1)return it();P=B+H,B=I.indexOf(g,P),K=I.indexOf(d,P)}else if(K!==-1&&(K<B||B===-1))M.push(I.substring(P,K)),P=K+A,K=I.indexOf(d,P);else{if(B===-1)break;if(M.push(I.substring(P,B)),Ot(B+H),z&&(xt(),J))return it();if(R&&j.length>=R)return it(!0)}return pt();function _t(ot){j.push(ot),tt=P}function Rt(ot){var ft=0;return ft=ot!==-1&&(ot=I.substring(L+1,ot))&&ot.trim()===""?ot.length:ft}function pt(ot){return N||(ot===void 0&&(ot=I.substring(P)),M.push(ot),P=nt,_t(M),z&&xt()),it()}function Ot(ot){P=ot,_t(M),M=[],B=I.indexOf(g,P)}function it(ot){if(f.header&&!D&&j.length&&!G){var ft=j[0],St=Object.create(null),Ie=new Set(ft);let hn=!1;for(let zt=0;zt<ft.length;zt++){let vt=ft[zt];if(St[vt=E(f.transformHeader)?f.transformHeader(vt,zt):vt]){let Kt,dn=St[vt];for(;Kt=vt+"_"+dn,dn++,Ie.has(Kt););Ie.add(Kt),ft[zt]=Kt,St[vt]++,hn=!0,(W=W===null?{}:W)[Kt]=vt}else St[vt]=1,ft[zt]=vt;Ie.add(vt)}hn&&console.warn("Duplicate headers found and renamed."),G=!0}return{data:j,errors:Y,meta:{delimiter:d,linebreak:g,aborted:J,truncated:!!ot,cursor:tt+(D||0),renamedHeaders:W}}}function xt(){k(it()),j=[],Y=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return P}}function S(f){var d=f.data,g=l[d.workerId],b=!1;if(d.error)g.userError(d.error,d.file);else if(d.results&&d.results.data){var k={abort:function(){b=!0,T(d.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(E(g.userStep)){for(var R=0;R<d.results.data.length&&(g.userStep({data:d.results.data[R],errors:d.results.errors,meta:d.results.meta},k),!b);R++);delete d.results}else E(g.userChunk)&&(g.userChunk(d.results,k,d.file),delete d.results)}d.finished&&!b&&T(d.workerId,d.results)}function T(f,d){var g=l[f];E(g.userComplete)&&g.userComplete(d),g.terminate(),delete l[f]}function m(){throw new Error("Not implemented.")}function C(f){if(typeof f!="object"||f===null)return f;var d,g=Array.isArray(f)?[]:{};for(d in f)g[d]=C(f[d]);return g}function $(f,d){return function(){f.apply(d,arguments)}}function E(f){return typeof f=="function"}return a.parse=function(f,d){var g=(d=d||{}).dynamicTyping||!1;if(E(g)&&(d.dynamicTypingFunction=g,g={}),d.dynamicTyping=g,d.transform=!!E(d.transform)&&d.transform,!d.worker||!a.WORKERS_SUPPORTED)return g=null,a.NODE_STREAM_INPUT,typeof f=="string"?(f=(b=>b.charCodeAt(0)!==65279?b:b.slice(1))(f),g=new(d.download?p:y)(d)):f.readable===!0&&E(f.read)&&E(f.on)?g=new v(d):(r.File&&f instanceof File||f instanceof Object)&&(g=new h(d)),g.stream(f);(g=(()=>{var b;return!!a.WORKERS_SUPPORTED&&(b=(()=>{var k=r.URL||r.webkitURL||null,R=n.toString();return a.BLOB_URL||(a.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",R,")();"],{type:"text/javascript"})))})(),(b=new r.Worker(b)).onmessage=S,b.id=u++,l[b.id]=b)})()).userStep=d.step,g.userChunk=d.chunk,g.userComplete=d.complete,g.userError=d.error,d.step=E(d.step),d.chunk=E(d.chunk),d.complete=E(d.complete),d.error=E(d.error),delete d.worker,g.postMessage({input:f,config:d,workerId:g.id})},a.unparse=function(f,d){var g=!1,b=!0,k=",",R=`\r
`,q='"',W=q+q,G=!1,F=null,U=!1,P=((()=>{if(typeof d=="object"){if(typeof d.delimiter!="string"||a.BAD_DELIMITERS.filter(function(D){return d.delimiter.indexOf(D)!==-1}).length||(k=d.delimiter),typeof d.quotes!="boolean"&&typeof d.quotes!="function"&&!Array.isArray(d.quotes)||(g=d.quotes),typeof d.skipEmptyLines!="boolean"&&typeof d.skipEmptyLines!="string"||(G=d.skipEmptyLines),typeof d.newline=="string"&&(R=d.newline),typeof d.quoteChar=="string"&&(q=d.quoteChar),typeof d.header=="boolean"&&(b=d.header),Array.isArray(d.columns)){if(d.columns.length===0)throw new Error("Option columns is empty");F=d.columns}d.escapeChar!==void 0&&(W=d.escapeChar+q),d.escapeFormulae instanceof RegExp?U=d.escapeFormulae:typeof d.escapeFormulae=="boolean"&&d.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(q),"g"));if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return J(null,f,G);if(typeof f[0]=="object")return J(F||Object.keys(f[0]),f,G)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||F),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),J(f.fields||[],f.data||[],G);throw new Error("Unable to serialize unrecognized input");function J(D,N,nt){var A="",H=(typeof D=="string"&&(D=JSON.parse(D)),typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(D)&&0<D.length),Z=!Array.isArray(N[0]);if(H&&b){for(var z=0;z<D.length;z++)0<z&&(A+=k),A+=I(D[z],z);0<N.length&&(A+=R)}for(var j=0;j<N.length;j++){var Y=(H?D:N[j]).length,M=!1,tt=H?Object.keys(N[j]).length===0:N[j].length===0;if(nt&&!H&&(M=nt==="greedy"?N[j].join("").trim()==="":N[j].length===1&&N[j][0].length===0),nt==="greedy"&&H){for(var rt=[],X=0;X<Y;X++){var K=Z?D[X]:X;rt.push(N[j][K])}M=rt.join("").trim()===""}if(!M){for(var B=0;B<Y;B++){0<B&&!tt&&(A+=k);var dt=H&&Z?D[B]:B;A+=I(N[j][dt],B)}j<N.length-1&&(!nt||0<Y&&!tt)&&(A+=R)}}return A}function I(D,N){var nt,A;return D==null?"":D.constructor===Date?JSON.stringify(D).slice(1,25):(A=!1,U&&typeof D=="string"&&U.test(D)&&(D="'"+D,A=!0),nt=D.toString().replace(P,W),(A=A||g===!0||typeof g=="function"&&g(D,N)||Array.isArray(g)&&g[N]||((H,Z)=>{for(var z=0;z<Z.length;z++)if(-1<H.indexOf(Z[z]))return!0;return!1})(nt,a.BAD_DELIMITERS)||-1<nt.indexOf(k)||nt.charAt(0)===" "||nt.charAt(nt.length-1)===" ")?q+nt+q:nt)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!r.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=w,a.ParserHandle=x,a.NetworkStreamer=p,a.FileStreamer=h,a.StringStreamer=y,a.ReadableStreamStreamer=v,r.jQuery&&((i=r.jQuery).fn.parse=function(f){var d=f.config||{},g=[];return this.each(function(R){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)g.push({file:this.files[q],inputElem:this,instanceConfig:i.extend({},d)})}),b(),this;function b(){if(g.length===0)E(f.complete)&&f.complete();else{var R,q,W,G,F=g[0];if(E(f.before)){var U=f.before(F.file,F.inputElem);if(typeof U=="object"){if(U.action==="abort")return R="AbortError",q=F.file,W=F.inputElem,G=U.reason,void(E(f.error)&&f.error({name:R},q,W,G));if(U.action==="skip")return void k();typeof U.config=="object"&&(F.instanceConfig=i.extend(F.instanceConfig,U.config))}else if(U==="skip")return void k()}var P=F.instanceConfig.complete;F.instanceConfig.complete=function(J){E(P)&&P(J,F.file,F.inputElem),k()},a.parse(F.file,F.instanceConfig)}}function k(){g.splice(0,1),b()}}),s&&(r.onmessage=function(f){f=f.data,a.WORKER_ID===void 0&&f&&(a.WORKER_ID=f.workerId),typeof f.input=="string"?r.postMessage({workerId:a.WORKER_ID,results:a.parse(f.input,f.config),finished:!0}):(r.File&&f.input instanceof File||f.input instanceof Object)&&(f=a.parse(f.input,f.config))&&r.postMessage({workerId:a.WORKER_ID,results:f,finished:!0})}),(p.prototype=Object.create(c.prototype)).constructor=p,(h.prototype=Object.create(c.prototype)).constructor=h,(y.prototype=Object.create(y.prototype)).constructor=y,(v.prototype=Object.create(c.prototype)).constructor=v,a})}(xe)),xe.exports}var hu=fu();const du=Nr(hu),pu=(t,e)=>{const[n,r]=et.useState(()=>{try{const o=window.localStorage.getItem(t);return o?JSON.parse(o):e}catch(o){return console.log(o),e}});return[n,o=>{try{const s=o instanceof Function?o(n):o;r(s),window.localStorage.setItem(t,JSON.stringify(s))}catch(s){console.log(s)}}]},gu=t=>Promise.resolve(du.unparse(t)),yu=t=>t.startsWith("PMID")?`https://pubmed.ncbi.nlm.nih.gov/${t.split(":")[1]}`:t.startsWith("PMC")?`https://pmc.ncbi.nlm.nih.gov/articles/${t.split(":")[1]}`:"",mu=(t,e)=>Object.values(t.analyses[0].edge_bindings).flat().map(i=>i.id).flatMap(i=>e.knowledge_graph.edges[i].attributes.filter(o=>o.attribute_type_id==="biolink:publications").flatMap(o=>o.value)).map(yu),_u=t=>{const e=Object.keys(t.results[0].node_bindings).flatMap(s=>[`${s} (Name)`,`${s} (CURIE)`]);let n=new Set;t.results.forEach(s=>{const l={};Object.entries(s.node_bindings).forEach(([u,a])=>{const c=a[0].id;l[c]=u}),Object.values(s.analyses[0].edge_bindings).flat().forEach(u=>{const{subject:a,object:c}=t.knowledge_graph.edges[u.id],p=l[a],h=l[c],y=`${p} -> ${h}`;p&&h&&n.add(y)})});const r=Array.from(n),i=[...e,...r,"Score","Publications"],o=t.results.map(s=>{const l=new Array(i.length).fill(""),u={};return Object.entries(s.node_bindings).forEach(([a,c],p)=>{const h=c[0].id;u[h]=a;const y=t.knowledge_graph.nodes[h];l[p*2]=y.name||y.categories[0],l[p*2+1]=h}),Object.values(s.analyses[0].edge_bindings).flat().forEach(a=>{const{subject:c,object:p,predicate:h,sources:y}=t.knowledge_graph.edges[a.id],v=u[c],x=u[p];if(v&&x){const _=`${u[c]} -> ${u[p]}`,w=i.findIndex(m=>m===_),S=y.find(m=>m.resource_role==="primary_knowledge_source"),T=S&&S.resource_id||void 0;l[w]+=`${l[w].length>0?`
`:""}${h}${T?` (${T})`:""}`}}),l[l.length-2]=s.score,l[l.length-1]=mu(s,t).join(`
`),l});return[i,...o]};function ic({open:t,setOpen:e,message:n,download_type:r="answer"}){const[i,o]=pn.useState("json"),[s,l]=pn.useState("ROBOKOP_message"),[u,a]=pu("query_history",{}),c=()=>{e(!1)},p=async()=>{switch(r){case"answer":{let h;if(i==="json"&&(h=new Blob([JSON.stringify({message:n},null,2)],{type:"application/json"})),i==="csv"){const v=await gu(_u(n));h=new Blob([v],{type:"text/csv"})}if(!h)break;const y=document.createElement("a");y.download=`${s}.${i}`,y.href=window.URL.createObjectURL(h),document.body.appendChild(y),y.click(),y.remove();break}case"all_queries":{const h=window.localStorage.getItem("query_history"),y=h?JSON.parse(h):{},v=new Blob([JSON.stringify({bookmarked_queries:y},null,2)],{type:"application/json"}),x=document.createElement("a");x.download=`${s}.${i}`,x.href=window.URL.createObjectURL(v),document.body.appendChild(x),x.click(),x.remove();break}case"query":{s in u||a(h=>({...h,[s]:{query_graph:n}}));break}default:c()}c()};return O.jsxs(qr,{open:t,onClose:c,"aria-labelledby":"alert-dialog-title",children:[O.jsx(zr,{id:"alert-dialog-title",children:"Download Answer"}),O.jsxs(Br,{style:{width:600,paddingTop:"1rem"},children:[O.jsx(Oi,{label:["answer","all_queries"].includes(r)?"File name":"Query Graph Name",variant:"outlined",style:{marginBottom:"1rem",width:"90%"},value:s,onChange:h=>{l(h.target.value)}}),r==="answer"&&O.jsx(Yn,{component:"fieldset",children:O.jsxs(Pi,{"aria-label":"gender",name:"gender1",value:i,onChange:h=>{o(h.target.value)},children:[O.jsx(xn,{value:"json",control:O.jsx(kn,{}),label:"JSON"}),O.jsx(xn,{value:"csv",control:O.jsx(kn,{}),label:"CSV"})]})}),i==="csv"&&O.jsx(ii,{style:{fontSize:"1em"},children:"The CSV download contains a smaller subset of the answer information. To analyze the complete properties of the answer graphs, consider using JSON."})]}),O.jsxs(Xr,{children:[O.jsx(_n,{onClick:c,color:"primary",children:"Cancel"}),O.jsx(_n,{onClick:p,color:"primary",variant:"contained",children:["answer","all_queries"].includes(r)?"Download":"Bookmark"})]})]})}const Pt={w:50,h:25},Ht={x:-54,y:-50},Vn={x:(Ht.x+(Ht.x+Pt.w))/2,y:(Ht.y+(Ht.y+Pt.h))/2},Ut={x:4,y:-50},Gn={x:(Ut.x+(Ut.x+Pt.w))/2,y:(Ut.y+(Ut.y+Pt.h))/2};function Xn(t,e){const[n,r]=e.split("--");return Object.keys(t).find(o=>{const s=o.split("--");return s.indexOf(n)>-1&&s.indexOf(r)>-1})}const xu={get:(t,e)=>{const n=Xn(t,e);let r=!1;return n?(n!==e&&(r=!0),{indices:t[n],flip:r}):{indices:[],flip:r}},set:(t,e,n)=>{const r=Xn(t,e);return r?t[r]=n:t[e]=n,!0}};function vu(t){const e=new Proxy({},xu);return t.forEach((n,r)=>{const i=e[`${n.source.id}--${n.target.id}`];i.indices.push(r),e[`${n.source.id}--${n.target.id}`]=i.indices}),t.forEach((n,r)=>{const i=e[`${n.source.id}--${n.target.id}`];n.numEdges=i.indices.length;const o=i.indices.indexOf(r);n.index=o,i.indices.length%2===0&&o===0&&(n.index=i.indices.length-1),o&&(o%2?n.index=-n.index:n.index-=1),i.flip&&(n.index=-n.index),n.strokeWidth="3"}),t}function wu(t){return t.append("g").attr("id",e=>e.id).attr("class","edge").call(e=>e.append("path").attr("stroke","#999").attr("fill","none").attr("stroke-width",n=>n.strokeWidth).attr("class","edgePath").attr("marker-end",n=>st.shouldShowArrow(n,n.symmetric)?"url(#arrow)":"")).call(e=>e.append("path").attr("stroke","transparent").attr("fill","none").attr("stroke-width",10).attr("class",n=>`edgeTransparent edge-${n.id}`).attr("id",n=>`edge${n.id}`).call(()=>e.append("text").attr("class","edgeText").attr("pointer-events","none").style("text-anchor","middle").attr("dy",n=>-n.strokeWidth).append("textPath").attr("pointer-events","none").attr("xlink:href",n=>`#edge${n.id}`).style("user-select","none").attr("startOffset","50%").text(n=>n.predicates?n.predicates.map(r=>ve.displayPredicate(r)).join(", "):"")).call(n=>n.append("title").text(r=>r.predicates?r.predicates.map(i=>ve.displayPredicate(i)).join(", "):""))).call(e=>e.append("circle").attr("r",5).attr("fill","#B5D3E3").attr("stroke","#999").attr("stroke-width",1).style("opacity",0).style("cursor","pointer").attr("class","source edgeEnd").on("mouseover",st.showElement).on("mouseout",st.hideElement)).call(e=>e.append("circle").attr("r",5).attr("fill","#B5D3E3").attr("stroke","#999").attr("stroke-width",1).style("opacity",0).style("cursor","pointer").attr("class","target edgeEnd").on("mouseover",st.showElement).on("mouseout",st.hideElement)).call(e=>e.append("g").attr("class","edgeButtons").call(n=>n.append("rect").attr("rx",5).attr("ry",5).attr("transform",`translate(${Ht.x},${Ht.y})`).attr("width",Pt.w).attr("height",Pt.h).attr("stroke","black").attr("fill","white").style("filter","url(#buttonShadow)").style("display","none").attr("class",r=>`${r.id} deleteRect`)).call(n=>n.append("text").attr("dx",Vn.x).attr("dy",Vn.y).style("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class",r=>`${r.id} deleteLabel`).style("display","none").text("delete")).call(n=>n.append("rect").attr("rx",5).attr("ry",5).attr("transform",`translate(${Ut.x},${Ut.y})`).attr("width",Pt.w).attr("height",Pt.h).attr("stroke","black").attr("fill","white").style("filter","url(#buttonShadow)").style("display","none").attr("class",r=>`${r.id} editRect`)).call(n=>n.append("text").attr("dx",Gn.x).attr("dy",Gn.y).style("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class",r=>`${r.id} editLabel`).style("display","none").text("edit")))}function bu(t){return t.call(e=>e.select("title").text(n=>n.predicates?n.predicates.map(r=>ve.displayPredicate(r)).join(", "):"")).call(e=>e.select(".edgePath").attr("marker-end",n=>st.shouldShowArrow(n,n.symmetric)?"url(#arrow)":"")).call(e=>e.select("text").select("textPath").text(n=>n.predicates?n.predicates.map(r=>ve.displayPredicate(r)).join(", "):""))}function ku(t){return t.remove()}function Su(t,e){V(".edgeTransparent").on("click",(n,r)=>{t!==r.id?(n.stopPropagation(),V(".deleteRect,.deleteLabel,.editRect,.editLabel").style("display","none"),V(`.${r.id}`).style("display","inherit").raise(),e(r.id),at(`#${r.id}`).raise(),Nt.clearAllEdges(),Nt.clearAllNodes(),Nt.highlightTextEditorEdge(r.id),Nt.highlightGraphEdge(r.id)):e("")})}function Eu(t,e){V(".edgeButtons > .deleteRect").on("click",(n,r)=>{const{id:i}=r;e(""),t(i)})}function Cu(t,e){V(".edgeButtons > .editRect").on("click",(n,r)=>{const{id:i}=r,o=at(`#${i} > .source`).node();e(""),t(i,o,"editEdge")})}function $u(t){V(".edgeTransparent").on("mouseover",(e,n)=>{const{id:r}=n;V(`#${r} > .source, #${r} > .target`).transition().duration(500).style("opacity",1),(t===r||!t)&&(Nt.highlightTextEditorEdge(r),Nt.highlightGraphEdge(r))}).on("mouseout",(e,n)=>{const{id:r}=n;V(`#${r} > .source, #${r} > .target`).transition().duration(1e3).style("opacity",0),(t!==r||!t)&&(Nt.clearTextEditorEdge(r),Nt.clearGraphEdge(r))})}function Ru(t,e,n,r,i){V(".edge").call(o=>o.selectAll(".edgeEnd").call(uu.dragEdgeEnd(o,t,e,n,r,i)))}function Tu(){V(".edgeTransparent").on("mouseover",null).on("mouseout",null)}function Nu(){V(".edgeTransparent").on("click",null)}const oc={enter:wu,update:bu,exit:ku,addEdgeCurveProperties:vu,attachEdgeClick:Su,attachDeleteClick:Eu,attachEditClick:Cu,attachMouseHover:$u,attachDrag:Ru,removeClicks:Nu,removeMouseHover:Tu};function Je(t,e){const n=[];return!t||t.constructor!==Object?(n.push(`${e} is not a valid JSON object`),n):t.nodes?Array.isArray(t.nodes)?(n.push(`${e} nodes should be an object`),n):(new Set(Object.keys(t.nodes)).size===Object.keys(t.nodes).length||n.push(`There are multiple ${e.toLowerCase()} nodes with the same ID`),t.edges?Array.isArray(t.edges)?(n.push(`${e} edges should be an object`),n):(Object.keys(t.edges).reduce((s,l)=>{const u=t.edges[l];return s&&u&&u.subject&&u.object&&t.nodes&&t.nodes[u.subject]&&t.nodes[u.object]},!0)||n.push(`Each ${e.toLowerCase()} edge must have a valid "subject" and "object" property`),n):(n.push(`${e} requires an "edges" property`),n)):(n.push(`${e} requires a "nodes" property`),n)}function Pu(t){const e=[];if(!Array.isArray(t))return e.push("Message results should be an array"),e;for(let n=0;n<t.length&&("node_bindings"in t[n]?t[n].node_bindings.constructor!==Object&&e.push("Results node_bindings is not a valid JSON object"):e.push("No node_bindings in result object"),"analyses"in t[n]?Array.isArray(t[n].analyses)||e.push("Results analyses is not an array"):e.push("No analyses in result object"),!e.length);n+=1);return e}function Au(t){if(!t||t.constructor!==Object)return["The uploaded message isn't a valid JSON object."];if(!("message"in t))return['The uploaded message should have a parent property of "message".'];let e=Je(t.message.query_graph,"Query Graph");return t.message.knowledge_graph&&(e=[...e,...Je(t.message.knowledge_graph,"Knowledge Graph")]),t.message.results&&(e=[...e,...Pu(t.message.results)]),e}const sc={validateGraph:Je,validateMessage:Au};export{ic as D,ti as S,Oi as T,at as a,nc as b,Qu as c,uu as d,tc as e,ec as f,st as g,Nt as h,Zu as i,oc as j,Xu as k,rc as l,Yu as m,ne as n,Ku as o,Wu as p,V as s,sc as t,Ju as u,Yr as w};

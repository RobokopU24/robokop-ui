import{r as C,j as a,R as Fa,u as Do}from"./main-Bxfe4Qal.js";import{u as Ho,T as da,h as Y,w as vo,s as me,a as ye,d as zo,c as qo,g as te,l as Fo,b as Vo,e as Go,f as _o,i as Uo,j as Ie,D as So,k as ko,t as Va,m as Wo}from"./trapi-BJVMUwLk.js";import{u as Qa}from"./AuthContext-6RiyJAM4.js";import{u as jo}from"./usePasskey-B8nwSqM3.js";import{C as Ko,u as xa,a as Qo,r as Po,S as Jo,b as Yo}from"./AlertProvider-CS83QDva.js";import{s as ka,q as pa,P as Xo}from"./queryGraph-B-h_kUel.js";import{A as Ao,B as Aa}from"./biolink-CvyEhlA2.js";import{u as je}from"./queryBuilder-CRrFGo6j.js";import{C as Oa}from"./Close-CkfqEMVI.js";import{D as Ja,a as Ya,b as Xa}from"./DialogTitle-BsB0Df6C.js";import{u as ua,I as ke}from"./IconButton-D-WOROUy.js";import{B as ne}from"./Button-CpGhMJw8.js";import{a as Zo,b as ba,c as qe,d as et,B as co,C as at}from"./CircularProgress-B8CBKe07.js";import{g as Za,d as eo,e as ao,f as ce,h as $e,i as q,j as oo,m as Ee,l as pe,k as va,n as Ga}from"./createSimplePaletteValueFilter-BgnxeUzB.js";import{i as ze,a as _a}from"./Input-DrgcAPlg.js";import{u as Ua,A as ot,f as Qe,o as uo,C as tt,m as nt}from"./Loading-0cuKiJyU.js";import{u as it,P as Oo,T as $o}from"./Tooltip-CAcmB2zG.js";import{s as rt,M as st}from"./Modal-CENjY7I_.js";import{P as to}from"./Paper-BphQmbS1.js";import{a as Mo,L as lt}from"./listItemTextClasses-BH3kCDiK.js";import{D as Eo,L as po,a as xo}from"./ListItemText-BgG2IG-P.js";import{D as ct}from"./Divider-BbMkSAUy.js";import{R as ut}from"./main-CQIMZrt1.js";import"./Box-CViFGFuH.js";import"./Typography-S0UZMlvX.js";import"./isHostComponent-D3YBfmz0.js";import"./isFocusVisible-B8k4qzLc.js";import"./isMuiElement-CAkp5su4.js";import"./dividerClasses-FcsMuOnI.js";function Co(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function pt(e={}){const{ignoreAccents:o=!0,ignoreCase:t=!0,limit:n,matchFrom:i="any",stringify:u,trim:p=!1}=e;return(l,{inputValue:x,getOptionLabel:N})=>{let b=p?x.trim():x;t&&(b=b.toLowerCase()),o&&(b=Co(b));const S=b?l.filter(d=>{let f=(u||N)(d);return t&&(f=f.toLowerCase()),o&&(f=Co(f)),i==="start"?f.startsWith(b):f.includes(b)}):l;return typeof n=="number"?S.slice(0,n):S}}const dt=pt(),mo=5,xt=e=>{var o;return e.current!==null&&((o=e.current.parentElement)==null?void 0:o.contains(document.activeElement))},Ct=[];function go(e,o,t,n){if(o||e==null||n)return"";const i=t(e);return typeof i=="string"?i:""}function mt(e){const{unstable_isActiveElementInListbox:o=xt,unstable_classNamePrefix:t="Mui",autoComplete:n=!1,autoHighlight:i=!1,autoSelect:u=!1,blurOnSelect:p=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:x=!1,componentName:N="useAutocomplete",defaultValue:b=e.multiple?Ct:null,disableClearable:S=!1,disableCloseOnSelect:d=!1,disabled:f,disabledItemsFocusable:g=!1,disableListWrap:B=!1,filterOptions:V=dt,filterSelectedOptions:$=!1,freeSolo:G=!1,getOptionDisabled:F,getOptionKey:c,getOptionLabel:m=s=>s.label??s,groupBy:T,handleHomeEndKeys:k=!e.freeSolo,id:R,includeInputInList:I=!1,inputValue:D,isOptionEqualToValue:P=(s,r)=>s===r,multiple:y=!1,onChange:ae,onClose:A,onHighlightChange:L,onInputChange:H,onOpen:Fe,open:Ze,openOnFocus:ea=!1,options:aa,readOnly:de=!1,renderValue:ee,selectOnFocus:oa=!e.freeSolo,value:Ve}=e,oe=Zo(R);let O=m;O=s=>{const r=m(s);return typeof r!="string"?String(r):r};const ie=C.useRef(!1),re=C.useRef(!0),X=C.useRef(null),xe=C.useRef(null),[ta,no]=C.useState(null),[ue,Ca]=C.useState(-1),Ma=i?0:-1,Z=C.useRef(Ma),io=C.useRef(go(b??Ve,y,O)).current,[j,na]=Ua({controlled:Ve,default:b,name:N}),[_,we]=Ua({controlled:D,default:io,name:N,state:"inputValue"}),[Ge,ma]=C.useState(!1),_e=C.useCallback((s,r,h)=>{if(!(y?j.length<r.length:r!==null)&&!l)return;const v=go(r,y,O,ee);_!==v&&(we(v),H&&H(s,v,h))},[O,_,y,H,we,l,j,ee]),[be,Re]=Ua({controlled:Ze,default:!1,name:N,state:"open"}),[ro,Ue]=C.useState(!0),ga=!y&&j!=null&&_===O(j),se=be&&!de,U=se?V(aa.filter(s=>!($&&(y?j:[j]).some(r=>r!==null&&P(s,r)))),{inputValue:ga&&ro?"":_,getOptionLabel:O}):[],ge=it({filteredOptions:U,value:j,inputValue:_});C.useEffect(()=>{const s=j!==ge.value;Ge&&!s||G&&!s||_e(null,j,"reset")},[j,_e,Ge,ge.value,G]);const ha=be&&U.length>0&&!de,he=ba(s=>{if(s===-1)X.current.focus();else{const r=ee?"data-item-index":"data-tag-index";ta.querySelector(`[${r}="${s}"]`).focus()}});C.useEffect(()=>{y&&ue>j.length-1&&(Ca(-1),he(-1))},[j,y,ue,he]);function Ea(s,r){if(!xe.current||s<0||s>=U.length)return-1;let h=s;for(;;){const E=xe.current.querySelector(`[data-option-index="${h}"]`),v=g?!1:!E||E.disabled||E.getAttribute("aria-disabled")==="true";if(E&&E.hasAttribute("tabindex")&&!v)return h;if(r==="next"?h=(h+1)%U.length:h=(h-1+U.length)%U.length,h===s)return-1}}const ve=ba(({event:s,index:r,reason:h})=>{if(Z.current=r,r===-1?X.current.removeAttribute("aria-activedescendant"):X.current.setAttribute("aria-activedescendant",`${oe}-option-${r}`),L&&["mouse","keyboard","touch"].includes(h)&&L(s,r===-1?null:U[r],h),!xe.current)return;const E=xe.current.querySelector(`[role="option"].${t}-focused`);E&&(E.classList.remove(`${t}-focused`),E.classList.remove(`${t}-focusVisible`));let v=xe.current;if(xe.current.getAttribute("role")!=="listbox"&&(v=xe.current.parentElement.querySelector('[role="listbox"]')),!v)return;if(r===-1){v.scrollTop=0;return}const W=xe.current.querySelector(`[data-option-index="${r}"]`);if(W&&(W.classList.add(`${t}-focused`),h==="keyboard"&&W.classList.add(`${t}-focusVisible`),v.scrollHeight>v.clientHeight&&h!=="mouse"&&h!=="touch")){const K=W,Ce=v.clientHeight+v.scrollTop,qa=K.offsetTop+K.offsetHeight;qa>Ce?v.scrollTop=qa-v.clientHeight:K.offsetTop-K.offsetHeight*(T?1.3:0)<v.scrollTop&&(v.scrollTop=K.offsetTop-K.offsetHeight*(T?1.3:0))}}),fe=ba(({event:s,diff:r,direction:h="next",reason:E})=>{if(!se)return;const W=Ea((()=>{const K=U.length-1;if(r==="reset")return Ma;if(r==="start")return 0;if(r==="end")return K;const Ce=Z.current+r;return Ce<0?Ce===-1&&I?-1:B&&Z.current!==-1||Math.abs(r)>1?0:K:Ce>K?Ce===K+1&&I?-1:B||Math.abs(r)>1?K:0:Ce})(),h);if(ve({index:W,reason:E,event:s}),n&&r!=="reset")if(W===-1)X.current.value=_;else{const K=O(U[W]);X.current.value=K,K.toLowerCase().indexOf(_.toLowerCase())===0&&_.length>0&&X.current.setSelectionRange(_.length,K.length)}}),wa=()=>{const s=(r,h)=>{const E=r?O(r):"",v=h?O(h):"";return E===v};if(Z.current!==-1&&ge.filteredOptions&&ge.filteredOptions.length!==U.length&&ge.inputValue===_&&(y?j.length===ge.value.length&&ge.value.every((r,h)=>O(j[h])===O(r)):s(ge.value,j))){const r=ge.filteredOptions[Z.current];if(r)return U.findIndex(h=>O(h)===O(r))}return-1},ia=C.useCallback(()=>{if(!se)return;const s=wa();if(s!==-1){Z.current=s;return}const r=y?j[0]:j;if(U.length===0||r==null){fe({diff:"reset"});return}if(xe.current){if(r!=null){const h=U[Z.current];if(y&&h&&j.findIndex(v=>P(h,v))!==-1)return;const E=U.findIndex(v=>P(v,r));E===-1?fe({diff:"reset"}):ve({index:E});return}if(Z.current>=U.length-1){ve({index:U.length-1});return}ve({index:Z.current})}},[U.length,y?!1:j,$,fe,ve,se,_,y]),Ra=ba(s=>{rt(xe,s),s&&ia()});C.useEffect(()=>{ia()},[ia]);const le=s=>{be||(Re(!0),Ue(!0),Fe&&Fe(s))},Le=(s,r)=>{be&&(Re(!1),A&&A(s,r))},Se=(s,r,h,E)=>{if(y){if(j.length===r.length&&j.every((v,W)=>v===r[W]))return}else if(j===r)return;ae&&ae(s,r,h,E),na(r)},We=C.useRef(!1),Ne=(s,r,h="selectOption",E="options")=>{let v=h,W=r;if(y){W=Array.isArray(j)?j.slice():[];const K=W.findIndex(Ce=>P(r,Ce));K===-1?W.push(r):E!=="freeSolo"&&(W.splice(K,1),v="removeOption")}_e(s,W,v),Se(s,W,v,{option:r}),!d&&(!s||!s.ctrlKey&&!s.metaKey)&&Le(s,v),(p===!0||p==="touch"&&We.current||p==="mouse"&&!We.current)&&X.current.blur()};function fa(s,r){if(s===-1)return-1;let h=s;for(;;){if(r==="next"&&h===j.length||r==="previous"&&h===-1)return-1;const E=ee?"data-item-index":"data-tag-index",v=ta.querySelector(`[${E}="${h}"]`);if(!v||!v.hasAttribute("tabindex")||v.disabled||v.getAttribute("aria-disabled")==="true")h+=r==="next"?1:-1;else return h}}const Ia=(s,r)=>{if(!y)return;_===""&&Le(s,"toggleInput");let h=ue;ue===-1?_===""&&r==="previous"&&(h=j.length-1):(h+=r==="next"?1:-1,h<0&&(h=0),h===j.length&&(h=-1)),h=fa(h,r),Ca(h),he(h)},De=s=>{ie.current=!0,we(""),H&&H(s,"","clear"),Se(s,y?[]:null,"clear")},La=s=>r=>{if(s.onKeyDown&&s.onKeyDown(r),!r.defaultMuiPrevented&&(ue!==-1&&!["ArrowLeft","ArrowRight"].includes(r.key)&&(Ca(-1),he(-1)),r.which!==229))switch(r.key){case"Home":se&&k&&(r.preventDefault(),fe({diff:"start",direction:"next",reason:"keyboard",event:r}));break;case"End":se&&k&&(r.preventDefault(),fe({diff:"end",direction:"previous",reason:"keyboard",event:r}));break;case"PageUp":r.preventDefault(),fe({diff:-mo,direction:"previous",reason:"keyboard",event:r}),le(r);break;case"PageDown":r.preventDefault(),fe({diff:mo,direction:"next",reason:"keyboard",event:r}),le(r);break;case"ArrowDown":r.preventDefault(),fe({diff:1,direction:"next",reason:"keyboard",event:r}),le(r);break;case"ArrowUp":r.preventDefault(),fe({diff:-1,direction:"previous",reason:"keyboard",event:r}),le(r);break;case"ArrowLeft":!y&&ee?he(0):Ia(r,"previous");break;case"ArrowRight":!y&&ee?he(-1):Ia(r,"next");break;case"Enter":if(Z.current!==-1&&se){const h=U[Z.current],E=F?F(h):!1;if(r.preventDefault(),E)return;Ne(r,h,"selectOption"),n&&X.current.setSelectionRange(X.current.value.length,X.current.value.length)}else G&&_!==""&&ga===!1&&(y&&r.preventDefault(),Ne(r,_,"createOption","freeSolo"));break;case"Escape":se?(r.preventDefault(),r.stopPropagation(),Le(r,"escape")):x&&(_!==""||y&&j.length>0||ee)&&(r.preventDefault(),r.stopPropagation(),De(r));break;case"Backspace":if(y&&!de&&_===""&&j.length>0){const h=ue===-1?j.length-1:ue,E=j.slice();E.splice(h,1),Se(r,E,"removeOption",{option:j[h]})}!y&&ee&&!de&&(na(null),he(-1));break;case"Delete":if(y&&!de&&_===""&&j.length>0&&ue!==-1){const h=ue,E=j.slice();E.splice(h,1),Se(r,E,"removeOption",{option:j[h]})}!y&&ee&&!de&&(na(null),he(-1));break}},Da=s=>{ma(!0),ea&&!ie.current&&le(s)},He=s=>{if(o(xe)){X.current.focus();return}ma(!1),re.current=!0,ie.current=!1,u&&Z.current!==-1&&se?Ne(s,U[Z.current],"blur"):u&&G&&_!==""?Ne(s,_,"blur","freeSolo"):l&&_e(s,j,"blur"),Le(s,"blur")},ra=s=>{const r=s.target.value;_!==r&&(we(r),Ue(!1),H&&H(s,r,"input")),r===""?!S&&!y&&Se(s,null,"clear"):le(s)},sa=s=>{const r=Number(s.currentTarget.getAttribute("data-option-index"));Z.current!==r&&ve({event:s,index:r,reason:"mouse"})},Ha=s=>{ve({event:s,index:Number(s.currentTarget.getAttribute("data-option-index")),reason:"touch"}),We.current=!0},za=s=>{const r=Number(s.currentTarget.getAttribute("data-option-index"));Ne(s,U[r],"selectOption"),We.current=!1},Ta=s=>r=>{const h=j.slice();h.splice(s,1),Se(r,h,"removeOption",{option:j[s]})},so=s=>{Se(s,null,"removeOption",{option:j})},Ke=s=>{be?Le(s,"toggleInput"):le(s)},Q=s=>{s.currentTarget.contains(s.target)&&s.target.getAttribute("id")!==oe&&s.preventDefault()},J=s=>{s.currentTarget.contains(s.target)&&(X.current.focus(),oa&&re.current&&X.current.selectionEnd-X.current.selectionStart===0&&X.current.select(),re.current=!1)},Pe=s=>{!f&&(_===""||!be)&&Ke(s)};let la=G&&_.length>0;la=la||(y?j.length>0:j!==null);let Ba=U;return T&&(Ba=U.reduce((s,r,h)=>{const E=T(r);return s.length>0&&s[s.length-1].group===E?s[s.length-1].options.push(r):s.push({key:h,index:h,group:E,options:[r]}),s},[])),f&&Ge&&He(),{getRootProps:(s={})=>({...s,onKeyDown:La(s),onMouseDown:Q,onClick:J}),getInputLabelProps:()=>({id:`${oe}-label`,htmlFor:oe}),getInputProps:()=>({id:oe,value:_,onBlur:He,onFocus:Da,onChange:ra,onMouseDown:Pe,"aria-activedescendant":se?"":null,"aria-autocomplete":n?"both":"list","aria-controls":ha?`${oe}-listbox`:void 0,"aria-expanded":ha,autoComplete:"off",ref:X,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:De}),getItemProps:({index:s=0}={})=>({...y&&{key:s},...ee?{"data-item-index":s}:{"data-tag-index":s},tabIndex:-1,...!de&&{onDelete:y?Ta(s):so}}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ke}),getTagProps:({index:s})=>({key:s,"data-tag-index":s,tabIndex:-1,...!de&&{onDelete:Ta(s)}}),getListboxProps:()=>({role:"listbox",id:`${oe}-listbox`,"aria-labelledby":`${oe}-label`,ref:Ra,onMouseDown:s=>{s.preventDefault()}}),getOptionProps:({index:s,option:r})=>{const h=(y?j:[j]).some(v=>v!=null&&P(r,v)),E=F?F(r):!1;return{key:(c==null?void 0:c(r))??O(r),tabIndex:-1,role:"option",id:`${oe}-option-${s}`,onMouseMove:sa,onClick:za,onTouchStart:Ha,"data-option-index":s,"aria-disabled":E,"aria-selected":h}},id:oe,inputValue:_,value:j,dirty:la,expanded:se&&ta,popupOpen:se,focused:Ge||ue!==-1,anchorEl:ta,setAnchorEl:no,focusedItem:ue,focusedTag:ue,groupedOptions:Ba}}function gt(e){return Za("MuiListSubheader",e)}eo("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const ht=e=>{const{classes:o,color:t,disableGutters:n,inset:i,disableSticky:u}=e,p={root:["root",t!=="default"&&`color${q(t)}`,!n&&"gutters",i&&"inset",!u&&"sticky"]};return oo(p,gt,o)},ft=ce("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.color!=="default"&&o[`color${q(t.color)}`],!t.disableGutters&&o.gutters,t.inset&&o.inset,!t.disableSticky&&o.sticky]}})(Ee(({theme:e})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(e.vars||e).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:o})=>!o.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:o})=>o.inset,style:{paddingLeft:72}},{props:({ownerState:o})=>!o.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}}]}))),ja=C.forwardRef(function(o,t){const n=ao({props:o,name:"MuiListSubheader"}),{className:i,color:u="default",component:p="li",disableGutters:l=!1,disableSticky:x=!1,inset:N=!1,...b}=n,S={...n,color:u,component:p,disableGutters:l,disableSticky:x,inset:N},d=ht(S);return a.jsx(ft,{as:p,className:$e(d.root,i),ref:t,ownerState:S,...b})});ja&&(ja.muiSkipListHighlight=!0);const It=qe(a.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function Tt(e){return Za("MuiChip",e)}const w=eo("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Bt=e=>{const{classes:o,disabled:t,size:n,color:i,iconColor:u,onDelete:p,clickable:l,variant:x}=e,N={root:["root",x,t&&"disabled",`size${q(n)}`,`color${q(i)}`,l&&"clickable",l&&`clickableColor${q(i)}`,p&&"deletable",p&&`deletableColor${q(i)}`,`${x}${q(i)}`],label:["label",`label${q(n)}`],avatar:["avatar",`avatar${q(n)}`,`avatarColor${q(i)}`],icon:["icon",`icon${q(n)}`,`iconColor${q(u)}`],deleteIcon:["deleteIcon",`deleteIcon${q(n)}`,`deleteIconColor${q(i)}`,`deleteIcon${q(x)}Color${q(i)}`]};return oo(N,Tt,o)},Nt=ce("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e,{color:n,iconColor:i,clickable:u,onDelete:p,size:l,variant:x}=t;return[{[`& .${w.avatar}`]:o.avatar},{[`& .${w.avatar}`]:o[`avatar${q(l)}`]},{[`& .${w.avatar}`]:o[`avatarColor${q(n)}`]},{[`& .${w.icon}`]:o.icon},{[`& .${w.icon}`]:o[`icon${q(l)}`]},{[`& .${w.icon}`]:o[`iconColor${q(i)}`]},{[`& .${w.deleteIcon}`]:o.deleteIcon},{[`& .${w.deleteIcon}`]:o[`deleteIcon${q(l)}`]},{[`& .${w.deleteIcon}`]:o[`deleteIconColor${q(n)}`]},{[`& .${w.deleteIcon}`]:o[`deleteIcon${q(x)}Color${q(n)}`]},o.root,o[`size${q(l)}`],o[`color${q(n)}`],u&&o.clickable,u&&n!=="default"&&o[`clickableColor${q(n)})`],p&&o.deletable,p&&n!=="default"&&o[`deletableColor${q(n)}`],o[x],o[`${x}${q(n)}`]]}})(Ee(({theme:e})=>{const o=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${w.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${w.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:o,fontSize:e.typography.pxToRem(12)},[`& .${w.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${w.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${w.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${w.icon}`]:{marginLeft:5,marginRight:-6},[`& .${w.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:pe(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:pe(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${w.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${w.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(va(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText,[`& .${w.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t].contrastTextChannel} / 0.7)`:pe(e.palette[t].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t].contrastText}}}})),{props:t=>t.iconColor===t.color,style:{[`& .${w.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:o}}},{props:t=>t.iconColor===t.color&&t.color!=="default",style:{[`& .${w.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${w.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:pe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(va(["dark"])).map(([t])=>({props:{color:t,onDelete:!0},style:{[`&.${w.focusVisible}`]:{background:(e.vars||e).palette[t].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:pe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${w.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:pe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(va(["dark"])).map(([t])=>({props:{color:t,clickable:!0},style:{[`&:hover, &.${w.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${w.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${w.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${w.avatar}`]:{marginLeft:4},[`& .${w.avatarSmall}`]:{marginLeft:2},[`& .${w.icon}`]:{marginLeft:4},[`& .${w.iconSmall}`]:{marginLeft:2},[`& .${w.deleteIcon}`]:{marginRight:5},[`& .${w.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(va()).map(([t])=>({props:{variant:"outlined",color:t},style:{color:(e.vars||e).palette[t].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.7)`:pe(e.palette[t].main,.7)}`,[`&.${w.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:pe(e.palette[t].main,e.palette.action.hoverOpacity)},[`&.${w.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.focusOpacity})`:pe(e.palette[t].main,e.palette.action.focusOpacity)},[`& .${w.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.7)`:pe(e.palette[t].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t].main}}}}))]}})),yt=ce("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,o)=>{const{ownerState:t}=e,{size:n}=t;return[o.label,o[`label${q(n)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function ho(e){return e.key==="Backspace"||e.key==="Delete"}const Wa=C.forwardRef(function(o,t){const n=ao({props:o,name:"MuiChip"}),{avatar:i,className:u,clickable:p,color:l="default",component:x,deleteIcon:N,disabled:b=!1,icon:S,label:d,onClick:f,onDelete:g,onKeyDown:B,onKeyUp:V,size:$="medium",variant:G="filled",tabIndex:F,skipFocusWhenDisabled:c=!1,slots:m={},slotProps:T={},...k}=n,R=C.useRef(null),I=et(R,t),D=O=>{O.stopPropagation(),g&&g(O)},P=O=>{O.currentTarget===O.target&&ho(O)&&O.preventDefault(),B&&B(O)},y=O=>{O.currentTarget===O.target&&g&&ho(O)&&g(O),V&&V(O)},ae=p!==!1&&f?!0:p,A=ae||g?co:x||"div",L={...n,component:A,disabled:b,size:$,color:l,iconColor:C.isValidElement(S)&&S.props.color||l,onDelete:!!g,clickable:ae,variant:G},H=Bt(L),Fe=A===co?{component:x||"div",focusVisibleClassName:H.focusVisible,...g&&{disableRipple:!0}}:{};let Ze=null;g&&(Ze=N&&C.isValidElement(N)?C.cloneElement(N,{className:$e(N.props.className,H.deleteIcon),onClick:D}):a.jsx(It,{className:H.deleteIcon,onClick:D}));let ea=null;i&&C.isValidElement(i)&&(ea=C.cloneElement(i,{className:$e(H.avatar,i.props.className)}));let aa=null;S&&C.isValidElement(S)&&(aa=C.cloneElement(S,{className:$e(H.icon,S.props.className)}));const de={slots:m,slotProps:T},[ee,oa]=ua("root",{elementType:Nt,externalForwardedProps:{...de,...k},ownerState:L,shouldForwardComponentProp:!0,ref:I,className:$e(H.root,u),additionalProps:{disabled:ae&&b?!0:void 0,tabIndex:c&&b?-1:F,...Fe},getSlotProps:O=>({...O,onClick:ie=>{var re;(re=O.onClick)==null||re.call(O,ie),f==null||f(ie)},onKeyDown:ie=>{var re;(re=O.onKeyDown)==null||re.call(O,ie),P==null||P(ie)},onKeyUp:ie=>{var re;(re=O.onKeyUp)==null||re.call(O,ie),y==null||y(ie)}})}),[Ve,oe]=ua("label",{elementType:yt,externalForwardedProps:de,ownerState:L,className:H.label});return a.jsxs(ee,{as:A,...oa,children:[ea||aa,a.jsx(Ve,{...oe,children:d}),Ze]})});function bt(e){return Za("MuiAutocomplete",e)}const M=eo("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var fo,Io;const vt=e=>{const{classes:o,disablePortal:t,expanded:n,focused:i,fullWidth:u,hasClearIcon:p,hasPopupIcon:l,inputFocused:x,popupOpen:N,size:b}=e,S={root:["root",n&&"expanded",i&&"focused",u&&"fullWidth",p&&"hasClearIcon",l&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",x&&"inputFocused"],tag:["tag",`tagSize${q(b)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",N&&"popupIndicatorOpen"],popper:["popper",t&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return oo(S,bt,o)},St=ce("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e,{fullWidth:n,hasClearIcon:i,hasPopupIcon:u,inputFocused:p,size:l}=t;return[{[`& .${M.tag}`]:o.tag},{[`& .${M.tag}`]:o[`tagSize${q(l)}`]},{[`& .${M.inputRoot}`]:o.inputRoot},{[`& .${M.input}`]:o.input},{[`& .${M.input}`]:p&&o.inputFocused},o.root,n&&o.fullWidth,u&&o.hasPopupIcon,i&&o.hasClearIcon]}})({[`&.${M.focused} .${M.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${M.clearIndicator}`]:{visibility:"visible"}},[`& .${M.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${M.inputRoot}`]:{[`.${M.hasPopupIcon}&, .${M.hasClearIcon}&`]:{paddingRight:30},[`.${M.hasPopupIcon}.${M.hasClearIcon}&`]:{paddingRight:56},[`& .${M.input}`]:{width:0,minWidth:30}},[`& .${_a.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${_a.root}.${ze.sizeSmall}`]:{[`& .${_a.input}`]:{padding:"2px 4px 3px 0"}},[`& .${uo.root}`]:{padding:9,[`.${M.hasPopupIcon}&, .${M.hasClearIcon}&`]:{paddingRight:39},[`.${M.hasPopupIcon}.${M.hasClearIcon}&`]:{paddingRight:65},[`& .${M.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${M.endAdornment}`]:{right:9}},[`& .${uo.root}.${ze.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${M.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Qe.root}`]:{paddingTop:19,paddingLeft:8,[`.${M.hasPopupIcon}&, .${M.hasClearIcon}&`]:{paddingRight:39},[`.${M.hasPopupIcon}.${M.hasClearIcon}&`]:{paddingRight:65},[`& .${Qe.input}`]:{padding:"7px 4px"},[`& .${M.endAdornment}`]:{right:9}},[`& .${Qe.root}.${ze.sizeSmall}`]:{paddingBottom:1,[`& .${Qe.input}`]:{padding:"2.5px 4px"}},[`& .${ze.hiddenLabel}`]:{paddingTop:8},[`& .${Qe.root}.${ze.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${M.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Qe.root}.${ze.hiddenLabel}.${ze.sizeSmall}`]:{[`& .${M.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${M.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${M.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${M.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${M.inputRoot}`]:{flexWrap:"wrap"}}}]}),kt=ce("div",{name:"MuiAutocomplete",slot:"EndAdornment"})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),jt=ce(ke,{name:"MuiAutocomplete",slot:"ClearIndicator"})({marginRight:-2,padding:4,visibility:"hidden"}),Pt=ce(ke,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.popupIndicator,t.popupOpen&&o.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),At=ce(Oo,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[{[`& .${M.option}`]:o.option},o.popper,t.disablePortal&&o.popperDisablePortal]}})(Ee(({theme:e})=>({zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),Ot=ce(to,{name:"MuiAutocomplete",slot:"Paper"})(Ee(({theme:e})=>({...e.typography.body1,overflow:"auto"}))),$t=ce("div",{name:"MuiAutocomplete",slot:"Loading"})(Ee(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),Mt=ce("div",{name:"MuiAutocomplete",slot:"NoOptions"})(Ee(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),Et=ce("ul",{name:"MuiAutocomplete",slot:"Listbox"})(Ee(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${M.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${M.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${M.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pe(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${M.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:pe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${M.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:pe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}))),wt=ce(ja,{name:"MuiAutocomplete",slot:"GroupLabel"})(Ee(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8}))),Rt=ce("ul",{name:"MuiAutocomplete",slot:"GroupUl"})({padding:0,[`& .${M.option}`]:{paddingLeft:24}}),$a=C.forwardRef(function(o,t){const n=ao({props:o,name:"MuiAutocomplete"}),{autoComplete:i=!1,autoHighlight:u=!1,autoSelect:p=!1,blurOnSelect:l=!1,ChipProps:x,className:N,clearIcon:b=fo||(fo=a.jsx(Ko,{fontSize:"small"})),clearOnBlur:S=!n.freeSolo,clearOnEscape:d=!1,clearText:f="Clear",closeText:g="Close",componentsProps:B,defaultValue:V=n.multiple?[]:null,disableClearable:$=!1,disableCloseOnSelect:G=!1,disabled:F=!1,disabledItemsFocusable:c=!1,disableListWrap:m=!1,disablePortal:T=!1,filterOptions:k,filterSelectedOptions:R=!1,forcePopupIcon:I="auto",freeSolo:D=!1,fullWidth:P=!1,getLimitTagsText:y=z=>`+${z}`,getOptionDisabled:ae,getOptionKey:A,getOptionLabel:L,isOptionEqualToValue:H,groupBy:Fe,handleHomeEndKeys:Ze=!n.freeSolo,id:ea,includeInputInList:aa=!1,inputValue:de,limitTags:ee=-1,ListboxComponent:oa,ListboxProps:Ve,loading:oe=!1,loadingText:O="Loading…",multiple:ie=!1,noOptionsText:re="No options",onChange:X,onClose:xe,onHighlightChange:ta,onInputChange:no,onOpen:ue,open:Ca,openOnFocus:Ma=!1,openText:Z="Open",options:io,PaperComponent:j,PopperComponent:na,popupIcon:_=Io||(Io=a.jsx(ot,{})),readOnly:we=!1,renderGroup:Ge,renderInput:ma,renderOption:_e,renderTags:be,renderValue:Re,selectOnFocus:ro=!n.freeSolo,size:Ue="medium",slots:ga={},slotProps:se={},value:U,...ge}=n,{getRootProps:ha,getInputProps:he,getInputLabelProps:Ea,getPopupIndicatorProps:ve,getClearProps:fe,getItemProps:wa,getListboxProps:ia,getOptionProps:Ra,value:le,dirty:Le,expanded:Se,id:We,popupOpen:Ne,focused:fa,focusedItem:Ia,anchorEl:De,setAnchorEl:La,inputValue:Da,groupedOptions:He}=mt({...n,componentName:"Autocomplete"}),ra=!$&&!F&&Le&&!we,sa=(!D||I===!0)&&I!==!1,{onMouseDown:Ha}=he(),{ref:za,...Ta}=ia(),Ke=L||(z=>z.label??z),Q={...n,disablePortal:T,expanded:Se,focused:fa,fullWidth:P,getOptionLabel:Ke,hasClearIcon:ra,hasPopupIcon:sa,inputFocused:Ia===-1,popupOpen:Ne,size:Ue},J=vt(Q),Pe={slots:{paper:j,popper:na,...ga},slotProps:{chip:x,listbox:Ve,...B,...se}},[la,Ba]=ua("listbox",{elementType:Et,externalForwardedProps:Pe,ownerState:Q,className:J.listbox,additionalProps:Ta,ref:za}),[s,r]=ua("paper",{elementType:to,externalForwardedProps:Pe,ownerState:Q,className:J.paper}),[h,E]=ua("popper",{elementType:Oo,externalForwardedProps:Pe,ownerState:Q,className:J.popper,additionalProps:{disablePortal:T,style:{width:De?De.clientWidth:null},role:"presentation",anchorEl:De,open:Ne}});let v;const W=z=>({className:J.tag,disabled:F,...wa(z)});if(ie?le.length>0&&(be?v=be(le,W,Q):Re?v=Re(le,W,Q):v=le.map((z,Ae)=>{const{key:Oe,...ca}=W({index:Ae});return a.jsx(Wa,{label:Ke(z),size:Ue,...ca,...Pe.slotProps.chip},Oe)})):Re&&le!=null&&(v=Re(le,W,Q)),ee>-1&&Array.isArray(v)){const z=v.length-ee;!fa&&z>0&&(v=v.splice(0,ee),v.push(a.jsx("span",{className:J.tag,children:y(z)},v.length)))}const Ce=Ge||(z=>a.jsxs("li",{children:[a.jsx(wt,{className:J.groupLabel,ownerState:Q,component:"div",children:z.group}),a.jsx(Rt,{className:J.groupUl,ownerState:Q,children:z.children})]},z.key)),Lo=_e||((z,Ae)=>{const{key:Oe,...ca}=z;return a.jsx("li",{...ca,children:Ke(Ae)},Oe)}),lo=(z,Ae)=>{const Oe=Ra({option:z,index:Ae});return Lo({...Oe,className:J.option},z,{selected:Oe["aria-selected"],index:Ae,inputValue:Da},Q)},Na=Pe.slotProps.clearIndicator,ya=Pe.slotProps.popupIndicator;return a.jsxs(C.Fragment,{children:[a.jsx(St,{ref:t,className:$e(J.root,N),ownerState:Q,...ha(ge),children:ma({id:We,disabled:F,fullWidth:!0,size:Ue==="small"?"small":void 0,InputLabelProps:Ea(),InputProps:{ref:La,className:J.inputRoot,startAdornment:v,onMouseDown:z=>{z.target===z.currentTarget&&Ha(z)},...(ra||sa)&&{endAdornment:a.jsxs(kt,{className:J.endAdornment,ownerState:Q,children:[ra?a.jsx(jt,{...fe(),"aria-label":f,title:f,ownerState:Q,...Na,className:$e(J.clearIndicator,Na==null?void 0:Na.className),children:b}):null,sa?a.jsx(Pt,{...ve(),disabled:F,"aria-label":Ne?g:Z,title:Ne?g:Z,ownerState:Q,...ya,className:$e(J.popupIndicator,ya==null?void 0:ya.className),children:_}):null]})}},inputProps:{className:J.input,disabled:F,readOnly:we,...he()}})}),De?a.jsx(At,{as:h,...E,children:a.jsxs(Ot,{as:s,...r,children:[oe&&He.length===0?a.jsx($t,{className:J.loading,ownerState:Q,children:O}):null,He.length===0&&!D&&!oe?a.jsx(Mt,{className:J.noOptions,ownerState:Q,role:"presentation",onMouseDown:z=>{z.preventDefault()},children:re}):null,He.length>0?a.jsx(la,{as:oa,...Ba,children:He.map((z,Ae)=>Fe?Ce({key:z.key,group:z.group,children:z.options.map((Oe,ca)=>lo(Oe,z.index+ca))}):lo(z,Ae))}):null]})}):null]})}),Lt=["robokop"];function Dt({open:e,onClose:o}){const{displayAlert:t}=xa(),{user:n,setUser:i}=Qa(),{registerPasskey:u}=jo(),p=async()=>{try{await u(),n&&i({...n,_count:{...n._count,WebAuthnCredential:1}}),t("success","Passkey registered successfully!"),o()}catch(x){console.error("Error registering passkey:",x),t("error","Failed to register passkey. Please try again.")}},l=()=>{localStorage.setItem("passkeyPopupDenied","true"),o()};return a.jsxs(Ja,{open:e,onClose:o,maxWidth:"xs",fullWidth:!0,children:[a.jsx(Ya,{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("p",{style:{margin:0},children:"Set a passkey"}),a.jsx(ke,{style:{fontSize:"18px"},title:"Close",onClick:o,children:a.jsx(Oa,{})})]})}),a.jsx(Xa,{children:a.jsxs("div",{children:[a.jsx("p",{children:"You can set a passkey for your account to enable passwordless login. This is optional but recommended for enhanced security."}),a.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",marginTop:"20px",marginBottom:"20px"},children:[a.jsx(ne,{variant:"contained",color:"primary",onClick:p,children:"Register Passkey"}),a.jsx(ne,{onClick:l,children:"Skip for now"})]})]})})]})}const Ht=qe(a.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4z"})),zt=qe(a.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14zM7 11h10v2H7z"}));async function qt(e,o,t,n){const i=await Ao.nameResolver.entityLookup(e,1e3,t,n);return i.status==="error"?(o("error","Failed to contact name resolver to search curies. Please try again later."),[]):Array.isArray(i)?i.map(({curie:u,label:p,types:l,taxa:x})=>({name:p,categories:l,ids:[u],taxa:x})):[]}const Ft={"NCBITaxon:9606":"Homo sapiens","NCBITaxon:3702":"Arabidopsis thaliana","NCBITaxon:10090":"Mus musculus","NCBITaxon:9913":"Bos taurus","NCBITaxon:9823":"Sus scrofa","NCBITaxon:7227":"Drosophila melanogaster","NCBITaxon:10116":"Rattus norvegicus","NCBITaxon:7955":"Danio rerio","NCBITaxon:559292":"Saccharomyces cerevisiae S288C","NCBITaxon:4577":"Zea mays","NCBITaxon:4896":"Schizosaccharomyces pombe","NCBITaxon:352472":"Dictyostelium discoideum AX4","NCBITaxon:9031":"Gallus gallus","NCBITaxon:511145":"Escherichia coli str. K-12 substr. MG1655","NCBITaxon:192222":"Campylobacter jejuni subsp. jejuni NCTC 11168 = ATCC 700819","NCBITaxon:36329":"Plasmodium falciparum 3D7","NCBITaxon:8355":"Xenopus laevis","NCBITaxon:237561":"Candida albicans SC5314","NCBITaxon:9615":"Canis lupus familiaris","NCBITaxon:261594":'Bacillus anthracis str. "Ames Ancestor"',"NCBITaxon:8364":"Xenopus tropicalis","NCBITaxon:224308":"Bacillus subtilis subsp. subtilis str. 168","NCBITaxon:6239":"Caenorhabditis elegans","NCBITaxon:93061":"Staphylococcus aureus subsp. aureus NCTC 8325","NCBITaxon:1035377":"Yersinia pestis A1122","NCBITaxon:273123":"Yersinia pseudotuberculosis IP 32953","NCBITaxon:491078":"Treponema pallidum subsp. pertenue str. SamoaD","NCBITaxon:413999":"Clostridium botulinum A str. ATCC 3502","NCBITaxon:9986":"Oryctolagus cuniculus","NCBITaxon:2104":"Mycoplasmoides pneumoniae","NCBITaxon:39947":"Oryza sativa Japonica Group","NCBITaxon:83332":"Mycobacterium tuberculosis H37Rv","NCBITaxon:300852":"Thermus thermophilus HB8","NCBITaxon:208964":"Pseudomonas aeruginosa PAO1","NCBITaxon:2026186":"Bacillus paranthracis","NCBITaxon:309800":"Haloferax volcanii DS2","NCBITaxon:10359":"Human betaherpesvirus 5","NCBITaxon:483179":"Brucella canis ATCC 23365","NCBITaxon:311400":"Thermococcus kodakarensis","NCBITaxon:759272":"Thermochaetoides thermophila DSM 1495","NCBITaxon:185431":"Trypanosoma brucei brucei TREU927","NCBITaxon:1772":"Mycolicibacterium smegmatis","NCBITaxon:621":"Shigella boydii","NCBITaxon:1313":"Streptococcus pneumoniae","NCBITaxon:186497":"Pyrococcus furiosus DSM 3638","NCBITaxon:480808":"Mycobacterium phage Giles","NCBITaxon:70601":"Pyrococcus horikoshii OT3","NCBITaxon:37296":"Human gammaherpesvirus 8","NCBITaxon:1286640":"Sinorhizobium meliloti 2011","NCBITaxon:312017":"Tetrahymena thermophila SB210","NCBITaxon:10376":"Human gammaherpesvirus 4","NCBITaxon:10245":"Vaccinia virus","NCBITaxon:1076":"Rhodopseudomonas palustris","NCBITaxon:246197":"Myxococcus xanthus DK 1622","NCBITaxon:224914":"Brucella melitensis bv. 1 str. 16M","NCBITaxon:10029":"Cricetulus griseus","NCBITaxon:3055":"Chlamydomonas reinhardtii","NCBITaxon:272561":"Chlamydia trachomatis D/UW-3/CX","NCBITaxon:145262":"Methanothermobacter thermautotrophicus","NCBITaxon:10298":"Human alphaherpesvirus 1","NCBITaxon:359391":"Brucella abortus 2308","NCBITaxon:330879":"Aspergillus fumigatus Af293","NCBITaxon:33708":"Murid gammaherpesvirus 4","NCBITaxon:121224":"Pediculus humanus corporis","NCBITaxon:2681611":"Escherichia phage Lambda","NCBITaxon:1169293":"Enterococcus faecalis EnGen0336","NCBITaxon:2287":"Saccharolobus solfataricus","NCBITaxon:5693":"Trypanosoma cruzi","NCBITaxon:644":"Aeromonas hydrophila","NCBITaxon:44689":"Dictyostelium discoideum","NCBITaxon:10141":"Cavia porcellus","NCBITaxon:243230":"Deinococcus radiodurans R1 = ATCC 13939 = DSM 20539","NCBITaxon:243232":"Methanocaldococcus jannaschii DSM 2661","NCBITaxon:3562":"Spinacia oleracea","NCBITaxon:284591":"Yarrowia lipolytica CLIB122","NCBITaxon:210":"Helicobacter pylori","NCBITaxon:10036":"Mesocricetus auratus","NCBITaxon:1450527":"Francisella tularensis subsp. novicida D9876","NCBITaxon:235443":"Cryptococcus neoformans var. grubii H99","NCBITaxon:59241":"Streptococcus phage Dp-1","NCBITaxon:204722":"Brucella suis 1330","NCBITaxon:10335":"Human alphaherpesvirus 3","NCBITaxon:1048245":"Mycobacterium canettii CIPT 140010059","NCBITaxon:1509":"Clostridium sporogenes","NCBITaxon:565050":"Caulobacter vibrioides NA1000","NCBITaxon:7719":"Ciona intestinalis","NCBITaxon:367110":"Neurospora crassa OR74A","NCBITaxon:227377":"Coxiella burnetii RSA 493","NCBITaxon:7091":"Bombyx mori","NCBITaxon:44275":"Leptospira interrogans serovar Copenhageni","NCBITaxon:10366":"Murid betaherpesvirus 1","NCBITaxon:4097":"Nicotiana tabacum","NCBITaxon:10760":"Escherichia phage T7","NCBITaxon:444178":"Brucella ovis ATCC 25840","NCBITaxon:198214":"Shigella flexneri 2a str. 301","NCBITaxon:818":"Bacteroides thetaiotaomicron","NCBITaxon:4081":"Solanum lycopersicum","NCBITaxon:9544":"Macaca mulatta","NCBITaxon:28985":"Kluyveromyces lactis","NCBITaxon:1283":"Staphylococcus haemolyticus","NCBITaxon:470":"Acinetobacter baumannii","NCBITaxon:565042":"Bifidobacterium longum subsp. longum JCM 1217","NCBITaxon:662476":"Haloarcula sinaiiensis ATCC 33800","NCBITaxon:644223":"Komagataella phaffii GS115","NCBITaxon:442694":"Xanthomonas perforans","NCBITaxon:1341656":"Francisella tularensis subsp. tularensis str. SCHU S4 substr. NR-28534","NCBITaxon:1176649":"Agrobacterium fabrum","NCBITaxon:446":"Legionella pneumophila","NCBITaxon:485":"Neisseria gonorrhoeae","NCBITaxon:645":"Aeromonas salmonicida","NCBITaxon:666":"Vibrio cholerae","NCBITaxon:38323":"Bartonella henselae","NCBITaxon:4113":"Solanum tuberosum","NCBITaxon:10747":"Streptococcus phage Cp1","NCBITaxon:9796":"Equus caballus","NCBITaxon:1183413":"Agrobacterium salinitolerans","NCBITaxon:1396":"Bacillus cereus","NCBITaxon:9940":"Ovis aries","NCBITaxon:1140":"Synechococcus elongatus PCC 7942 = FACHB-805","NCBITaxon:1314":"Streptococcus pyogenes","NCBITaxon:182082":"Chlamydia pneumoniae TW-183","NCBITaxon:272942":"Rhodobacter capsulatus SB 1003","NCBITaxon:420247":"Methanobrevibacter smithii ATCC 35061","NCBITaxon:2681598":"Escherichia phage T4","NCBITaxon:622":"Shigella dysenteriae","NCBITaxon:24":"Shewanella putrefaciens","NCBITaxon:1914243":"Citrobacter europaeus","NCBITaxon:359110":"Pseudomonas extremaustralis","NCBITaxon:47715":"Lacticaseibacillus rhamnosus","NCBITaxon:227321":"Aspergillus nidulans FGSC A4","NCBITaxon:1197719":"Salmonella bongori N268-08","NCBITaxon:306263":"Campylobacter lari RM2100","NCBITaxon:1355477":"Bradyrhizobium diazoefficiens","NCBITaxon:45351":"Nematostella vectensis","NCBITaxon:1496":"Clostridioides difficile","NCBITaxon:72758":"Staphylococcus capitis subsp. capitis","NCBITaxon:306537":"Corynebacterium jeikeium K411","NCBITaxon:341663":"Aspergillus terreus NIH2624","NCBITaxon:198628":"Dickeya dadantii 3937","NCBITaxon:436717":"Acinetobacter oleivorans DR1","NCBITaxon:821":"Phocaeicola vulgatus","NCBITaxon:1311":"Streptococcus agalactiae","NCBITaxon:2317":"Methanosphaera stadtmanae","NCBITaxon:12509":"Human herpesvirus 4 type 2","NCBITaxon:630":"Yersinia enterocolitica","NCBITaxon:431895":"Monosiga brevicollis MX1","NCBITaxon:7165":"Anopheles gambiae","NCBITaxon:2026188":"Bacillus tropicus","NCBITaxon:108015":"Bradyrhizobium yuanmingense","NCBITaxon:6183":"Schistosoma mansoni","NCBITaxon:284813":"Encephalitozoon cuniculi GB-M1","NCBITaxon:10345":"Suid alphaherpesvirus 1","NCBITaxon:9598":"Pan troglodytes","NCBITaxon:557760":"Cereibacter sphaeroides KD131","NCBITaxon:508536":"Leptospira borgpetersenii serovar Ceylonica","NCBITaxon:283643":"Cryptococcus neoformans var. neoformans B-3501A","NCBITaxon:2026187":"Bacillus pacificus","NCBITaxon:663":"Vibrio alginolyticus","NCBITaxon:515620":"[Eubacterium] eligens ATCC 27750","NCBITaxon:211044":"Influenza A virus (A/Puerto Rico/8/1934(H1N1))","NCBITaxon:3847":"Glycine max","NCBITaxon:214684":"Cryptococcus neoformans var. neoformans JEC21","NCBITaxon:29518":"Borreliella afzelii","NCBITaxon:388396":"Aliivibrio fischeri MJ11","NCBITaxon:272944":"Rickettsia conorii str. Malish 7","NCBITaxon:568814":"Streptococcus suis BM407","NCBITaxon:6500":"Aplysia californica","NCBITaxon:208223":"Kosakonia cowanii","NCBITaxon:1344584":"Archaeoglobus fulgidus DSM 8774","NCBITaxon:1134454":"Cutibacterium acnes HL096PA1","NCBITaxon:2746961":"Streptomyces caniscabiei","NCBITaxon:93838":"Influenza A virus (A/goose/Guangdong/1/1996(H5N1))","NCBITaxon:318586":"Paracoccus denitrificans PD1222","NCBITaxon:1263550":"Edwardsiella piscicida","NCBITaxon:95485":"Burkholderia stabilis","NCBITaxon:79929":"Methanothermobacter marburgensis str. Marburg","NCBITaxon:1318":"Streptococcus parasanguinis","NCBITaxon:11676":"Human immunodeficiency virus 1","NCBITaxon:381666":"Cupriavidus necator H16","NCBITaxon:267377":"Methanococcus maripaludis S2","NCBITaxon:110321":"Sinorhizobium medicae","NCBITaxon:52242":"Lactobacillus gallinarum","NCBITaxon:187420":"Methanothermobacter thermautotrophicus str. Delta H","NCBITaxon:294747":"Candida tropicalis MYA-3404","NCBITaxon:347515":"Leishmania major strain Friedlin","NCBITaxon:272569":"Haloarcula marismortui ATCC 43049","NCBITaxon:8030":"Salmo salar","NCBITaxon:375899":"Trichormus variabilis 0441","NCBITaxon:520":"Bordetella pertussis","NCBITaxon:223283":"Pseudomonas syringae pv. tomato str. DC3000","NCBITaxon:186538":"Zaire ebolavirus","NCBITaxon:985002":"Staphylococcus argenteus","NCBITaxon:2908168":"Salmonella phage P22","NCBITaxon:7460":"Apis mellifera","NCBITaxon:488241":"Influenza A virus (A/Korea/426/1968(H2N2))","NCBITaxon:4952":"Yarrowia lipolytica","NCBITaxon:169963":"Listeria monocytogenes EGD-e","NCBITaxon:436113":"Mycoplasma mycoides subsp. capri str. GM12","NCBITaxon:300876":"Vibrio europaeus","NCBITaxon:9601":"Pongo abelii","NCBITaxon:937593":"Geobacillus stearothermophilus ATCC 7953","NCBITaxon:5478":"Nakaseomyces glabratus","NCBITaxon:487":"Neisseria meningitidis","NCBITaxon:637914":"Methanococcus maripaludis KA1","NCBITaxon:359385":"Xanthomonas campestris pv. raphani","NCBITaxon:3085316":null,"NCBITaxon:2026190":"Bacillus mobilis","NCBITaxon:10310":"Human alphaherpesvirus 2","NCBITaxon:2209":"Methanosarcina mazei","NCBITaxon:7237":"Drosophila pseudoobscura","NCBITaxon:129951":"Human mastadenovirus C","NCBITaxon:1389922":"Achromobacter mucicolens","NCBITaxon:9541":"Macaca fascicularis","NCBITaxon:5741":"Giardia intestinalis","NCBITaxon:7070":"Tribolium castaneum","NCBITaxon:28171":"Vibrio aestuarianus","NCBITaxon:9103":"Meleagris gallopavo","NCBITaxon:32603":"Human betaherpesvirus 6A","NCBITaxon:12643":"Ectromelia virus","NCBITaxon:518987":"Influenza B virus (B/Lee/1940)","NCBITaxon:284811":"Eremothecium gossypii ATCC 10895","NCBITaxon:3052225":"Henipavirus nipahense","NCBITaxon:83559":"Chlamydia suis","NCBITaxon:8022":"Oncorhynchus mykiss","NCBITaxon:294381":"Entamoeba histolytica HM-1:IMSS","NCBITaxon:665029":"Erwinia amylovora CFBP1430","NCBITaxon:57975":"Burkholderia thailandensis","NCBITaxon:2497436":"Enterobacter quasiroggenkampii","NCBITaxon:694008":"Pipistrellus bat coronavirus HKU5","NCBITaxon:445984":"Borreliella burgdorferi Bol26","NCBITaxon:158849":"Moellerella wisconsensis","NCBITaxon:572545":"Acetivibrio thermocellus DSM 2360","NCBITaxon:10600":"Human papillomavirus type 6b","NCBITaxon:5855":"Plasmodium vivax","NCBITaxon:330779":"Sulfolobus acidocaldarius DSM 639","NCBITaxon:3888":"Pisum sativum","NCBITaxon:10506":"Paramecium bursaria Chlorella virus 1","NCBITaxon:9483":"Callithrix jacchus","NCBITaxon:11909":"Human T-lymphotropic virus 2","NCBITaxon:10258":"Orf virus","NCBITaxon:333760":"Human papillomavirus type 16","NCBITaxon:10255":"Variola virus","NCBITaxon:328668":"Bombyx mori densovirus 3","NCBITaxon:331636":"Chlamydia psittaci 6BC","NCBITaxon:7245":"Drosophila yakuba","NCBITaxon:273063":"Sulfurisphaera tokodaii str. 7","NCBITaxon:7668":"Strongylocentrotus purpuratus","NCBITaxon:47716":"Streptomyces olivaceus","NCBITaxon:1309":"Streptococcus mutans","NCBITaxon:246410":"Coccidioides immitis RS","NCBITaxon:2587529":"Klebsiella pasteurii","NCBITaxon:559295":"Lachancea thermotolerans CBS 6340","NCBITaxon:2026240":"Klebsiella quasivariicola","NCBITaxon:47770":"Lactobacillus crispatus","NCBITaxon:332186":"Shewanella xiamenensis","NCBITaxon:823":"Parabacteroides distasonis","NCBITaxon:502780":"Paracoccidioides brasiliensis Pb18","NCBITaxon:271108":"Bombyx mori nucleopolyhedrovirus","NCBITaxon:2742203":"Staphylococcus borealis","NCBITaxon:129875":"Human mastadenovirus A","NCBITaxon:243275":"Treponema denticola ATCC 35405","NCBITaxon:3052505":"Orthomarburgvirus marburgense","NCBITaxon:10228":"Trichoplax adhaerens","NCBITaxon:10326":"Equid alphaherpesvirus 1","NCBITaxon:2912228":"Staphylococcus shinii","NCBITaxon:510516":"Aspergillus oryzae RIB40","NCBITaxon:222929":"Coccidioides posadasii C735 delta SOWgp","NCBITaxon:502779":"Paracoccidioides lutzii Pb01","NCBITaxon:242507":"Pyricularia oryzae 70-15","NCBITaxon:237631":"Ustilago maydis 521","NCBITaxon:1173064":"Anaplasma phagocytophilum str. JM","NCBITaxon:3046":"Dunaliella salina","NCBITaxon:527031":"Bacillus thuringiensis serovar berliner ATCC 10792","NCBITaxon:364410":"Granulibacter bethesdensis","NCBITaxon:2886895":"Halobacterium salinarum NRC-34001","NCBITaxon:3052223":"Henipavirus hendraense","NCBITaxon:2703794":"Serratia nevei","NCBITaxon:573729":"Thermothelomyces thermophilus ATCC 42464","NCBITaxon:680":"Vibrio campbellii","NCBITaxon:991791":"Clostridium acetobutylicum DSM 1731","NCBITaxon:333923":"Human papillomavirus 5","NCBITaxon:334380":"Orientia tsutsugamushi str. Ikeda","NCBITaxon:37636":"Thermus scotoductus","NCBITaxon:10621":"Human papillomavirus 9","NCBITaxon:674529":"Bacteroides faecis","NCBITaxon:195":"Campylobacter coli","NCBITaxon:334203":"Mupapillomavirus 1","NCBITaxon:218496":"Tropheryma whipplei TW08/27","NCBITaxon:122928":"Norovirus GI","NCBITaxon:1767":"Mycobacterium intracellulare","NCBITaxon:8090":"Oryzias latipes","NCBITaxon:7425":"Nasonia vitripennis","NCBITaxon:1134687":"Klebsiella michiganensis","NCBITaxon:490":"Neisseria sicca","NCBITaxon:11138":"Murine hepatitis virus","NCBITaxon:2886926":"Escherichia phage P1","NCBITaxon:3694":"Populus trichocarpa","NCBITaxon:694006":"Rousettus bat coronavirus HKU9","NCBITaxon:155322":"Bacillus toyonensis","NCBITaxon:1054460":"Streptococcus pseudopneumoniae IS7493","NCBITaxon:11908":"Human T-cell leukemia virus type I","NCBITaxon:265293":"Burkholderia ubonensis subsp. mesacidophila","NCBITaxon:2907838":"Streptococcus phage C1","NCBITaxon:803":"Bartonella quintana","NCBITaxon:588":"Providencia stuartii","NCBITaxon:392021":'Rickettsia rickettsii str. "Sheila Smith"',"NCBITaxon:624":"Shigella sonnei","NCBITaxon:6279":"Brugia malayi","NCBITaxon:336963":"Uncinocarpus reesii 1704","NCBITaxon:1525":"Moorella thermoacetica","NCBITaxon:223926":"Vibrio parahaemolyticus RIMD 2210633","NCBITaxon:1885902":"Xanthomonas cannabis pv. phaseoli","NCBITaxon:333763":"Human papillomavirus type 32","NCBITaxon:333761":"human papillomavirus 18","NCBITaxon:1714621":"Borna disease virus 1","NCBITaxon:269145":"Sulfolobus turreted icosahedral virus 1","NCBITaxon:2885909":"Bordetella phage BPP-1","NCBITaxon:5661":"Leishmania donovani","NCBITaxon:386585":"Escherichia coli O157:H7 str. Sakai","NCBITaxon:1354":"Enterococcus hirae","NCBITaxon:224325":"Archaeoglobus fulgidus DSM 4304","NCBITaxon:186540":"Sudan ebolavirus","NCBITaxon:523850":"Thermococcus onnurineus NA1","NCBITaxon:11801":"Moloney murine leukemia virus","NCBITaxon:3052310":"Mammarenavirus lassaense","NCBITaxon:67824":"Citrobacter farmeri","NCBITaxon:435258":"Leishmania infantum JPCM5","NCBITaxon:46015":"Autographa californica nucleopolyhedrovirus","NCBITaxon:559305":"Trichophyton rubrum CBS 118892","NCBITaxon:75985":"Mannheimia haemolytica","NCBITaxon:69966":"Macrococcus caseolyticus","NCBITaxon:11120":"Infectious bronchitis virus","NCBITaxon:10804":"adeno-associated virus 2","NCBITaxon:277944":"Human coronavirus NL63","NCBITaxon:10243":"Cowpox virus","NCBITaxon:1580":"Levilactobacillus brevis","NCBITaxon:9595":"Gorilla gorilla gorilla","NCBITaxon:672":"Vibrio vulnificus","NCBITaxon:41202":"Ewingella americana","NCBITaxon:2902907":"Mycobacterium phage Bxb1","NCBITaxon:7159":"Aedes aegypti","NCBITaxon:1343":"Streptococcus vestibularis","NCBITaxon:83555":"Chlamydia abortus","NCBITaxon:11886":"Rous sarcoma virus","NCBITaxon:11250":"Human orthopneumovirus","NCBITaxon:1226753":"Mycolicibacterium mucogenicum DSM 44124","NCBITaxon:2681617":"Escherichia phage HK97","NCBITaxon:735":"Haemophilus parahaemolyticus","NCBITaxon:730":"[Haemophilus] ducreyi","NCBITaxon:5888":"Paramecium tetraurelia","NCBITaxon:9365":"Erinaceus europaeus","NCBITaxon:7370":"Musca domestica","NCBITaxon:192":"Azospirillum brasilense","NCBITaxon:82541":"Cupriavidus gilardii","NCBITaxon:12558":"Sesbania mosaic virus","NCBITaxon:12639":"Duck hepatitis B virus","NCBITaxon:10724":"Bacillus phage SPP1","NCBITaxon:208962":"Escherichia albertii","NCBITaxon:649604":"Banna virus strain JKT-6423","NCBITaxon:2928686":"Pseudomonas phage phi6","NCBITaxon:2172043":"Bifidobacterium tibiigranuli","NCBITaxon:11277":"Vesicular stomatitis Indiana virus","NCBITaxon:62977":"Acinetobacter baylyi ADP1","NCBITaxon:213585":"Methanosarcina mazei S-6","NCBITaxon:7998":"Ictalurus punctatus","NCBITaxon:11723":"Simian immunodeficiency virus","NCBITaxon:1353":"Enterococcus gallinarum","NCBITaxon:82983":"Obesumbacterium proteus","NCBITaxon:1286":"Staphylococcus simulans","NCBITaxon:1281486":"Lactococcus formosensis","NCBITaxon:1642":"Listeria innocua","NCBITaxon:591001":"Acidaminococcus fermentans DSM 20731","NCBITaxon:529507":"Proteus mirabilis HI4320","NCBITaxon:280147":"Acinetobacter courvalinii","NCBITaxon:4558":"Sorghum bicolor","NCBITaxon:2494701":"Enterobacter chengduensis","NCBITaxon:1434109":"Methanosarcina barkeri str. Wiesmoor","NCBITaxon:9685":"Felis catus","NCBITaxon:10730":"Escherichia phage 933W","NCBITaxon:1310165":"Ralstonia pseudosolanacearum","NCBITaxon:12242":"Tobacco mosaic virus","NCBITaxon:1282":"Staphylococcus epidermidis","NCBITaxon:694581":"Marseillevirus marseillevirus","NCBITaxon:523849":"Thermococcus litoralis DSM 5473","NCBITaxon:2919548":"Thermus phage P23-77","NCBITaxon:11041":"Rubella virus","NCBITaxon:243265":"Photorhabdus laumondii subsp. laumondii TTO1","NCBITaxon:663331":"Trichophyton benhamiae CBS 112371","NCBITaxon:425944":"Sulfolobus islandicus L.D.8.5","NCBITaxon:1404":"Priestia megaterium","NCBITaxon:9925":"Capra hircus","NCBITaxon:13373":"Burkholderia mallei","NCBITaxon:3635":"Gossypium hirsutum","NCBITaxon:188937":"Methanosarcina acetivorans C2A","NCBITaxon:33945":"Enterococcus avium","NCBITaxon:655827":"Metarhizium acridum CQMa 102","NCBITaxon:10390":"Gallid alphaherpesvirus 2","NCBITaxon:243161":"Chlamydia muridarum str. Nigg","NCBITaxon:12302":"Brome mosaic virus","NCBITaxon:11577":"La Crosse virus","NCBITaxon:3052317":"Mammarenavirus machupoense","NCBITaxon:11553":"Influenza C virus (C/Ann Arbor/1/50)","NCBITaxon:1890302":"Bacillus wiedmannii","NCBITaxon:291644":"Bacteroides salyersiae","NCBITaxon:28295":"Porcine epidemic diarrhea virus","NCBITaxon:660122":"Fusarium vanettenii 77-13-4","NCBITaxon:186539":"Reston ebolavirus","NCBITaxon:537973":"Lacticaseibacillus paracasei subsp. paracasei 8700:2","NCBITaxon:3988":"Ricinus communis","NCBITaxon:1211579":"Pseudomonas putida NBRC 14164","NCBITaxon:431947":"Porphyromonas gingivalis ATCC 33277","NCBITaxon:11234":"Measles morbillivirus","NCBITaxon:10632":"JC polyomavirus","NCBITaxon:212035":"Acanthamoeba polyphaga mimivirus","NCBITaxon:5061":"Aspergillus niger","NCBITaxon:992212":"SFTS virus HB29","NCBITaxon:87883":"Burkholderia multivorans","NCBITaxon:417368":"Enterococcus thailandicus","NCBITaxon:453591":"Ignicoccus hospitalis KIN4/I","NCBITaxon:10497":"African swine fever virus","NCBITaxon:436907":"Vanderwaltozyma polyspora DSM 70294","NCBITaxon:363745":"Avian leukosis virus - RSA","NCBITaxon:29347":"[Clostridium] scindens","NCBITaxon:95486":"Burkholderia cenocepacia","NCBITaxon:1892":"Streptomyces anulatus","NCBITaxon:648":"Aeromonas caviae","NCBITaxon:59300":"Getah virus","NCBITaxon:36427":"Rotavirus C","NCBITaxon:227984":"SARS coronavirus Tor2","NCBITaxon:2907963":"Aeromonas phage 44RR2.8t","NCBITaxon:1905730":"Pectobacterium parmentieri","NCBITaxon:11569":"Thogotovirus thogotoense","NCBITaxon:3052307":"Mammarenavirus guanaritoense","NCBITaxon:12267":"Red clover necrotic mosaic virus","NCBITaxon:13689":"Sphingomonas paucimobilis","NCBITaxon:35269":"Woodchuck hepatitis virus","NCBITaxon:9209":"Phalacrocorax carbo","NCBITaxon:8839":"Anas platyrhynchos","NCBITaxon:381124":"Zea mays subsp. mays","NCBITaxon:249584":"Lyssavirus caucasicus","NCBITaxon:104628":"Helicobacter suis","NCBITaxon:130308":"Human mastadenovirus E","NCBITaxon:1330524":"Salivirus A","NCBITaxon:1124983":"Pseudomonas protegens CHA0","NCBITaxon:28875":"Rotavirus A","NCBITaxon:2911440":"Staphylococcus phage 80alpha","NCBITaxon:7029":"Acyrthosiphon pisum","NCBITaxon:1894":"Kitasatospora aureofaciens","NCBITaxon:480":"Moraxella catarrhalis","NCBITaxon:864596":"Bat coronavirus BM48-31/BGR/2008","NCBITaxon:211787":"Human papillomavirus type 92","NCBITaxon:661410":"Methylorubrum extorquens DM4","NCBITaxon:46473":"Breda virus","NCBITaxon:5874":"Theileria annulata","NCBITaxon:1434121":"Methanosarcina thermophila CHTI-55","NCBITaxon:11082":"West Nile virus","NCBITaxon:9669":"Mustela putorius furo","NCBITaxon:11047":"Equine arteritis virus","NCBITaxon:165432":"Cucumber leaf spot virus","NCBITaxon:998086":"Pseudomonas phage PhiPA3","NCBITaxon:229533":"Fusarium graminearum PH-1","NCBITaxon:515849":"Podospora anserina S mat+","NCBITaxon:12136":"Cricket paralysis virus","NCBITaxon:69014":"Thermococcus kodakarensis KOD1","NCBITaxon:440266":"WU Polyomavirus","NCBITaxon:157899":"Sulfolobus islandicus rod-shaped virus 2","NCBITaxon:9798":"Equus przewalskii","NCBITaxon:402880":"Methanococcus maripaludis C5","NCBITaxon:331117":"Aspergillus fischeri NRRL 181","NCBITaxon:553239":"Vibrio breoganii","NCBITaxon:42858":"Mammaliicoccus lentus","NCBITaxon:40215":"Acinetobacter junii","NCBITaxon:69656":"Sulfurisphaera ohwakuensis","NCBITaxon:2908095":"Prochlorococcus phage P-SSP7","NCBITaxon:28090":"Acinetobacter lwoffii","NCBITaxon:9534":"Chlorocebus aethiops","NCBITaxon:9531":"Cercocebus atys","NCBITaxon:12287":"Flock House virus","NCBITaxon:696472":"Ostreococcus tauri virus 2","NCBITaxon:61645":"Enterobacter asburiae","NCBITaxon:198110":"Pseudomonas phage 201phi2-1","NCBITaxon:35345":"Lactococcus phage TP901-1","NCBITaxon:91753":"Cucurbit aphid-borne yellows virus","NCBITaxon:1314884":"Lactobacillus acidophilus La-14","NCBITaxon:1756149":"Elizabethkingia bruuniana","NCBITaxon:1744":"Propionibacterium freudenreichii","NCBITaxon:6238":"Caenorhabditis briggsae","NCBITaxon:238":"Elizabethkingia meningoseptica","NCBITaxon:82633":"Cupriavidus pauculus","NCBITaxon:12131":"rhinovirus B14","NCBITaxon:1332244":"Influenza A virus (A/Shanghai/02/2013(H7N9))","NCBITaxon:28377":"Anolis carolinensis","NCBITaxon:81947":"Vagococcus lutrae","NCBITaxon:2905681":"Bacteriophage P2","NCBITaxon:212717":"Clostridium tetani E88","NCBITaxon:518":"Bordetella bronchiseptica","NCBITaxon:138950":"Enterovirus C","NCBITaxon:10617":"Human papillomavirus 4","NCBITaxon:1434114":"Methanosarcina mazei LYC","NCBITaxon:267818":"Lactobacillus kefiranofaciens","NCBITaxon:215158":"Salmonella phage epsilon15","NCBITaxon:154334":"Macacine gammaherpesvirus 5","NCBITaxon:7240":"Drosophila simulans","NCBITaxon:85698":"Achromobacter xylosoxidans","NCBITaxon:399550":"Staphylothermus marinus F1","NCBITaxon:2847087":"GB virus-B","NCBITaxon:1232383":"Corynebacterium glutamicum SCgG2","NCBITaxon:190061":"Fowl aviadenovirus A","NCBITaxon:12327":"Barley stripe mosaic virus","NCBITaxon:871585":"Acinetobacter pittii PHEA-2","NCBITaxon:11855":"Mason-Pfizer monkey virus","NCBITaxon:8502":"Crocodylus porosus","NCBITaxon:32264":"Tetranychus urticae","NCBITaxon:353152":"Cryptosporidium parvum Iowa II","NCBITaxon:12023":"Pseudomonas phage PP7","NCBITaxon:544580":"Actinomyces oris","NCBITaxon:180957":"Pectobacterium brasiliense","NCBITaxon:290008":"Isfahan virus","NCBITaxon:60711":"Chlorocebus sabaeus","NCBITaxon:71451":"Enterococcus malodoratus","NCBITaxon:120086":"Pseudomonas phage phi8","NCBITaxon:1454641":"Salmonella enterica subsp. enterica serovar Typhimurium str. CDC 2010K-1587","NCBITaxon:273133":"Pseudomonas phage EL","NCBITaxon:28037":"Streptococcus mitis","NCBITaxon:59729":"Taeniopygia guttata","NCBITaxon:2738":"Vagococcus fluvialis","NCBITaxon:53346":"Enterococcus mundtii","NCBITaxon:32536":"Acinonyx jubatus","NCBITaxon:11099":"Bovine viral diarrhea virus 1","NCBITaxon:1358":"Lactococcus lactis","NCBITaxon:344021":"Escherichia phage K1F","NCBITaxon:213633":"Providence virus","NCBITaxon:45455":"Macacine gammaherpesvirus 4","NCBITaxon:2905959":"Shigella phage Sf6","NCBITaxon:12161":"Beet yellows virus","NCBITaxon:664683":"Halomonas titanicae","NCBITaxon:356114":"Hepatitis C virus genotype 3","NCBITaxon:5599":"Alternaria alternata","NCBITaxon:431241":"Trichoderma reesei QM6a","NCBITaxon:11795":"Friend murine leukemia virus","NCBITaxon:31033":"Takifugu rubripes","NCBITaxon:10794":"Minute virus of mice","NCBITaxon:655813":"Streptococcus oralis ATCC 35037","NCBITaxon:10381":"Saimiriine gammaherpesvirus 2","NCBITaxon:2681609":"Staphylococcus phage phi 11","NCBITaxon:10224":"Saccoglossus kowalevskii","NCBITaxon:99287":"Salmonella enterica subsp. enterica serovar Typhimurium str. LT2","NCBITaxon:1891762":"Betapolyomavirus hominis","NCBITaxon:694007":"Tylonycteris bat coronavirus HKU4","NCBITaxon:72004":"Bos mutus","NCBITaxon:296":"Pseudomonas fragi","NCBITaxon:445987":"Borreliella valaisiana VS116","NCBITaxon:7897":"Latimeria chalumnae","NCBITaxon:29760":"Vitis vinifera","NCBITaxon:129956":"Murine mastadenovirus A","NCBITaxon:455632":"Streptomyces griseus subsp. griseus NBRC 13350","NCBITaxon:1501662":"Streptococcus parasuis","NCBITaxon:575":"Raoultella planticola","NCBITaxon:571":"Klebsiella oxytoca","NCBITaxon:217203":"Achromobacter spanius","NCBITaxon:573066":"Pseudomonas amygdali pv. tabaci str. ATCC 11528","NCBITaxon:85618":"Ateline gammaherpesvirus 3","NCBITaxon:945711":"Corynebacterium ulcerans 809","NCBITaxon:329":"Ralstonia pickettii","NCBITaxon:390157":"Senecavirus A","NCBITaxon:3885":"Phaseolus vulgaris","NCBITaxon:3880":"Medicago truncatula","NCBITaxon:11292":"Lyssavirus rabies","NCBITaxon:1502":"Clostridium perfringens","NCBITaxon:2907964":"Pseudomonas phage D3112","NCBITaxon:36914":"Lodderomyces elongisporus","NCBITaxon:419612":"Camelus ferus","NCBITaxon:505682":"Ureaplasma parvum serovar 3 str. ATCC 27815","NCBITaxon:3052322":"Mammarenavirus oliverosense","NCBITaxon:247269":"Human papillomavirus type 96","NCBITaxon:11224":"Human parainfluenza virus 4a","NCBITaxon:33745":"Hepatitis C virus genotype 4","NCBITaxon:11588":"Rift Valley fever virus","NCBITaxon:523841":"Haloferax mediterranei ATCC 33500","NCBITaxon:34839":"Chinchilla lanigera","NCBITaxon:35688":"Porphyridium purpureum","NCBITaxon:529":"Brucella anthropi","NCBITaxon:1648923":"Bacillus paralicheniformis","NCBITaxon:8496":"Alligator mississippiensis","NCBITaxon:102862":"Proteus penneri","NCBITaxon:2364647":"Pantoea piersonii","NCBITaxon:2884424":"Bacillus phage phi29","NCBITaxon:1891729":"Alphapolyomavirus mauratus","NCBITaxon:39152":"Methanococcus maripaludis","NCBITaxon:411470":"[Ruminococcus] gnavus ATCC 29149","NCBITaxon:714":"Aggregatibacter actinomycetemcomitans","NCBITaxon:132475":"Yaba-like disease virus","NCBITaxon:627343":"Zymomonas mobilis subsp. mobilis str. CP4 = NRRL B-14023","NCBITaxon:2890317":"Yersinia alsatica","NCBITaxon:2681603":"Escherichia phage Mu","NCBITaxon:284592":"Debaryomyces hansenii CBS767","NCBITaxon:4956":"Zygosaccharomyces rouxii","NCBITaxon:29438":"Pseudomonas savastanoi","NCBITaxon:11128":"Bovine coronavirus","NCBITaxon:2679898":"Bacillus phage GA1","NCBITaxon:7176":"Culex quinquefasciatus","NCBITaxon:310298":"Phocaeicola coprocola","NCBITaxon:11272":"Chandipura virus","NCBITaxon:1105094":"Rickettsia prowazekii str. Chernikova","NCBITaxon:12475":"Hepatitis delta virus","NCBITaxon:333762":"Human papillomavirus type 26","NCBITaxon:11657":"Bovine immunodeficiency virus","NCBITaxon:1886":"Streptomyces albidoflavus","NCBITaxon:28172":"Vibrio metschnikovii","NCBITaxon:12657":"Equid gammaherpesvirus 2","NCBITaxon:12336":"Clostridium phage c-st","NCBITaxon:11970":"Woolly monkey sarcoma virus","NCBITaxon:254785":"Streptococcus halichoeri","NCBITaxon:3708":"Brassica napus","NCBITaxon:847":"Oxalobacter formigenes","NCBITaxon:1605972":"Cricetid gammaherpesvirus 2","NCBITaxon:1220924":"Cyphellophora europaea CBS 101466","NCBITaxon:11039":"Western equine encephalitis virus","NCBITaxon:42631":"Brome streak mosaic virus","NCBITaxon:1125630":"Klebsiella pneumoniae subsp. pneumoniae HS11286","NCBITaxon:2890316":"Yersinia proxima","NCBITaxon:154654":"Mycobacterium montefiorense","NCBITaxon:1295826":"Lactococcus cremoris subsp. cremoris KW2","NCBITaxon:129394":"Xanthomonas oryzae pv. oryzicola","NCBITaxon:296210":"Penicillium stoloniferum virus F","NCBITaxon:204050":"Methanoculleus submarinus","NCBITaxon:905079":"Guillardia theta CCMP2712","NCBITaxon:32604":"Human betaherpesvirus 6B","NCBITaxon:747":"Pasteurella multocida","NCBITaxon:1323664":"Paraburkholderia caribensis MBA4","NCBITaxon:439334":"Mycobacterium avium subsp. hominissuis","NCBITaxon:1223261":"Pseudomonas phage JBD5","NCBITaxon:1223260":"Pseudomonas phage JBD30","NCBITaxon:11053":"dengue virus type 1","NCBITaxon:564":"Escherichia fergusonii","NCBITaxon:47740":"Groundnut rosette virus","NCBITaxon:317":"Pseudomonas syringae","NCBITaxon:480035":"Nocardia wallacei","NCBITaxon:37326":"Nocardia brasiliensis","NCBITaxon:2094":"Mycoplasmopsis arginini","NCBITaxon:10872":"Pseudomonas phage Pf3","NCBITaxon:10759":"Enterobacteria phage T3","NCBITaxon:11020":"Barmah Forest virus","NCBITaxon:425265":"Malassezia globosa CBS 7966","NCBITaxon:56867":"Marchantia paleacea","NCBITaxon:11029":"Ross River virus","NCBITaxon:29378":"Staphylococcus arlettae","NCBITaxon:28737":"Elephantulus edwardii","NCBITaxon:335103":"Adult diarrheal rotavirus strain J19","NCBITaxon:10334":"Felid alphaherpesvirus 1","NCBITaxon:2512240":"Sulfolobus sp. S-194","NCBITaxon:543939":"Sputnik virophage","NCBITaxon:1348662":"Corynebacterium argentoratense DSM 44202","NCBITaxon:240176":"Coprinopsis cinerea okayama7#130","NCBITaxon:90961":"Lyssavirus australis","NCBITaxon:46839":"Colorado tick fever virus","NCBITaxon:7244":"Drosophila virilis","NCBITaxon:12042":"Beet western yellows virus","NCBITaxon:290028":"Human coronavirus HKU1","NCBITaxon:72360":"Bacillus mojavensis","NCBITaxon:1705":"Corynebacterium stationis","NCBITaxon:9597":"Pan paniscus","NCBITaxon:12618":"Chicken anemia virus","NCBITaxon:54262":"Thermococcus chitonophagus","NCBITaxon:348780":"Natronomonas pharaonis DSM 2160","NCBITaxon:1901":"Streptomyces clavuligerus","NCBITaxon:9555":"Papio anubis","NCBITaxon:340047":"Mycoplasma capricolum subsp. capricolum ATCC 27343","NCBITaxon:10623":"Kappapapillomavirus 2","NCBITaxon:1293":"Staphylococcus gallinarum","NCBITaxon:1223561":"CAS virus","NCBITaxon:615":"Serratia marcescens","NCBITaxon:573826":"Candida dubliniensis CD36","NCBITaxon:28300":"Heron hepatitis B virus","NCBITaxon:1529886":"Bacillus atrophaeus subsp. globigii","NCBITaxon:83462":"Corallococcus exiguus","NCBITaxon:2787":"Porphyra purpurea","NCBITaxon:2994495":"Pseudomonas paraeruginosa","NCBITaxon:2593991":"Peste des petits ruminants virus","NCBITaxon:768679":"Thermoproteus tenax Kra 1","NCBITaxon:661":"Photobacterium angustum","NCBITaxon:1308":"Streptococcus thermophilus","NCBITaxon:11665":"Equine infectious anemia virus","NCBITaxon:11709":"Human immunodeficiency virus 2","NCBITaxon:255045":"Bradyrhizobium canariense"},Vt=qe(a.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),wo=qe(a.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}));function Gt(e){return e.categories&&e.categories.length>0||e.ids&&e.ids.length>0}function _t(e){if(!Array.isArray(e)||e.length<1)return null;const o=e[0],t=Ft[o];return t||o}const{CancelToken:Ut}=Qo;let Je;function Pa({id:e,properties:o,isReference:t,setReference:n,update:i,title:u,size:p,nameresCategoryFilter:l,options:x={}}){const{includeCuries:N=!0,includeExistingNodes:b=!0,existingNodes:S=[],includeCategories:d=!0,clearable:f=!0,includeSets:g=!1}=x,[B,V]=C.useState(!1),[$,G]=C.useState(""),[F,c]=C.useState(!1),[m,T]=C.useState([]),{displayAlert:k}=xa(),{concepts:R}=C.useContext(Aa),I=Ho($,500);async function D(){V(!0);const A=t?[{name:"New Term",key:null}]:[];if(b&&A.push(...S),d){let L=R.filter(H=>H.toLowerCase().includes(I.toLowerCase())).map(H=>({categories:[H],name:ka.displayCategory(H)}));g&&(L=R.filter(H=>H.toLowerCase().includes(I.toLowerCase())).flatMap(H=>[{categories:[H],name:ka.displayCategory(H)},{categories:[H],name:ka.setify(H),is_set:!0}])),A.push(...L)}if(N){I.includes(":")&&A.push({name:I,ids:[I]}),Je&&Je.cancel(),Je=Ut.source();const L=await qt(I,k,Je.token,l);A.push(...L)}V(!1),T(A)}C.useEffect(()=>{F&&I.length>=3?D():T([])},[F,I]),C.useEffect(()=>()=>{Je&&Je.cancel()},[]);function P(A){let L="";return A.key&&(L+=`${A.key}: `),A.name?L+A.name:A.ids&&Array.isArray(A.ids)&&A.ids.length?L+A.ids.join(", "):A.categories&&Array.isArray(A.categories)?A.categories.length?L+A.categories.join(", "):`${L} Something`:""}function y(A,L){G(""),L&&"key"in L?n(L.key??null):i(e,L)}const ae=C.useMemo(()=>Gt(o)?o:null,[o]);return a.jsx($a,{options:m,loading:B,className:`textEditorSelector${t?" referenceNode":""} highlight-${e}`,getOptionLabel:P,filterOptions:A=>A,autoComplete:!0,autoHighlight:!0,clearOnBlur:!0,blurOnSelect:!0,disableClearable:!f,inputValue:$,value:ae,isOptionEqualToValue:(A,L)=>A.name===L.name,open:F,onChange:y,onOpen:()=>c(!0),onClose:()=>c(!1),onInputChange:(A,L)=>G(L),renderOption:(A,L,H)=>a.jsx(Kt,{...L,...A}),renderInput:A=>a.jsx(da,{...A,variant:"outlined",className:"nodeDropdown",label:u||e,margin:"dense",onFocus:()=>{Y.highlightGraphNode(e),Y.highlightTextEditorNode(e)},onBlur:()=>{Y.clearGraphNode(e),Y.clearTextEditorNode(e)},InputProps:{...A.InputProps,classes:{root:`nodeSelector nodeSelector-${e}`},endAdornment:a.jsxs(a.Fragment,{children:[B?a.jsx(at,{color:"inherit",size:20}):null,A.InputProps.endAdornment]})}}),size:p||"medium"})}const Wt=vo(e=>({tooltip:{fontSize:e.typography.pxToRem(14)}}))($o);function Kt({name:e,ids:o,categories:t,taxa:n,...i}){const u=_t(n);return a.jsx(Wt,{arrow:!0,title:a.jsxs("div",{className:"node-option-tooltip-wrapper",children:[Array.isArray(o)&&o.length>0&&a.jsxs("div",{children:[a.jsx("span",{children:o[0]}),a.jsx(Qt,{textToCopy:o[0]})]}),Array.isArray(t)&&t.length>0&&a.jsx("span",{children:t[0]})]}),placement:"left",children:a.jsxs("div",{...i,children:[e," ",u?`(${u})`:null]})})}function Qt({textToCopy:e}){const[o,t]=C.useState(!1),n=i=>{i.stopPropagation(),navigator.clipboard.writeText(e),t(!0)};return typeof navigator.clipboard>"u"||typeof navigator.clipboard.writeText!="function"||typeof e!="string"?null:a.jsx(ke,{color:"inherit",size:"small",onClick:n,children:o?a.jsx(Vt,{}):a.jsx(wo,{})})}function To(e){return Array.isArray(e)&&e.length&&e||["biolink:NamedThing"]}function Ro({id:e}){const o=C.useContext(Aa),t=je(),{query_graph:n}=t,i=n.edges[e];function u(){if(!o||!o.predicates||!o.predicates.length||i.subject===void 0||i.object===void 0)return null;const x=n.nodes[i.subject],N=n.nodes[i.object],b=To(x.categories),S=To(N.categories),d=b.flatMap(g=>{var B;return((B=o.ancestorsMap)==null?void 0:B[g])??[]}),f=S.flatMap(g=>{var B;return((B=o.ancestorsMap)==null?void 0:B[g])??[]});return!d||!f?null:o.predicates.map(({predicate:g})=>g)}const p=C.useMemo(u,[i.subject!==void 0&&n.nodes[i.subject]?JSON.stringify(n.nodes[i.subject].categories):"",i.object!==void 0&&n.nodes[i.object]?JSON.stringify(n.nodes[i.object].categories):"",o])||[];function l(x){t.dispatch({type:"editPredicate",payload:{id:e,predicates:x}})}return C.useEffect(()=>{if(p&&p.length){const x=i.predicates&&i.predicates.filter(N=>p.indexOf(N)>-1)||[];l(x)}},[p]),a.jsx($a,{options:p,className:`textEditorSelector highlight-${e}`,value:i.predicates||[],onChange:(x,N)=>l(N),renderInput:x=>a.jsx(da,{...x,label:"Predicate",variant:"outlined",className:"edgeDropdown",margin:"dense",onFocus:()=>{Y.highlightGraphEdge(e),Y.highlightTextEditorEdge(e)},onBlur:()=>{Y.clearGraphEdge(e),Y.clearTextEditorEdge(e)},InputProps:{...x.InputProps,classes:{root:`edgeSelector edgeSelector-${e}`}}}),getOptionLabel:x=>ka.displayPredicate(x),clearOnBlur:!1,multiple:!0,limitTags:1,disableCloseOnSelect:!0,size:"small"})}const Ka=(e,o)=>{const t=[e];if(e.children)for(const n of e.children)t.push(...Ka(n,o));return e.mixinChildren,t},Jt=({range:e,subpropertyOf:o})=>{const t=[];return e&&(e.permissible_values?t.push(...Object.keys(e.permissible_values)):t.push(...Ka(e,!1).map(({name:n})=>n))),o&&t.push(...Ka(o,!1).map(({name:n})=>n)),t};function Yt({id:e,associations:o}){const t=je(),n=o.filter(d=>d.qualifiers.length>0).map(({association:d,qualifiers:f})=>({name:d.name,uuid:d.uuid,qualifiers:f.map(g=>({name:g.qualifier.name,options:Jt(g)}))})),[i,u]=Fa.useState(n[0]||null),[p,l]=Fa.useState({});if(Fa.useEffect(()=>{t.dispatch({type:"editQualifiers",payload:{id:e,qualifiers:p}})},[p]),n.length===0||n.length===1&&n[0].name==="association"||!i)return null;const x=i.qualifiers.filter(({name:d})=>d.includes("subject")),N=i.qualifiers.filter(({name:d})=>d.includes("predicate")),b=i.qualifiers.filter(({name:d})=>d.includes("object")),S=i.qualifiers.filter(d=>!x.includes(d)&&!N.includes(d)&&!b.includes(d));return a.jsxs("div",{className:"qualifiers-dropdown",children:[a.jsxs("div",{style:{marginRight:"2rem"},children:[a.jsx($a,{value:i,onChange:(d,f)=>{u(f)},disableClearable:!0,size:"small",options:n,getOptionLabel:d=>d.name,isOptionEqualToValue:(d,f)=>d.uuid===f.uuid,style:{width:300},renderInput:d=>a.jsx(da,{...d,label:"Association",variant:"outlined"})}),S.length>0&&a.jsx("hr",{}),a.jsx(Sa,{value:S,qualifiers:p,setQualifiers:l})]}),a.jsx(Sa,{value:x,qualifiers:p,setQualifiers:l}),a.jsx(Sa,{value:N,qualifiers:p,setQualifiers:l}),a.jsx(Sa,{value:b,qualifiers:p,setQualifiers:l})]})}function Sa({value:e,qualifiers:o,setQualifiers:t}){return e.length===0?null:a.jsx("div",{className:"qualifiers-list",children:e.map(({name:n,options:i})=>a.jsx($a,{value:o[n]||null,onChange:(u,p)=>{t(p===null?l=>{const x={...l};return delete x[n],x}:l=>({...l,[n]:p||null}))},options:i,renderInput:u=>a.jsx(da,{...u,label:n,variant:"outlined"}),size:"small"},n))})}function Xt(e,o,t,n){const i=[],u=n.classes.lookup.get(e),p=n.slots.lookup.get(o),l=n.classes.lookup.get(t),x=(d,f)=>{const g=(B,V)=>{for(const $ of B)if($===V||$.parent&&g([$.parent],V)||$.mixinParents&&g($.mixinParents,V))return!0;return!1};return g([d],f)},N=(d,f)=>{const g=(B,V)=>{for(const $ of B)if($===V||$.parent&&g([$.parent],V)||$.mixinParents&&g($.mixinParents,V))return!0;return!1};return g([f],d)},b=d=>{const f=n.classes.lookup.get("named thing"),g=n.slots.lookup.get("related to"),B=(F,c)=>{for(const m of F){if(m.slotUsage&&m.slotUsage[c])return m.slotUsage[c];if(m.parent){const T=B([m.parent],c);if(T!==null)return T}if(m.mixinParents){const T=B(m.mixinParents,c);if(T!==null)return T}}return null},V=B([d],"subject")||f,$=B([d],"predicate")||g,G=B([d],"object")||f;return{subject:V,predicate:$,object:G}},S=(d,f=0)=>{for(const g of d){if(g.slotUsage&&!g.abstract){const B=b(g),V=x(u,B.subject)||N(u,B.subject),$=x(l,B.object)||N(l,B.object),G=x(p,B.predicate)||N(p,B.predicate),F=Object.entries(g.slotUsage).map(([c,m])=>{if(m===null)return null;const T=n.slots.lookup.get(c);if(!T||!x(T,n.qualifiers))return null;let k;if(m&&m.range){const I=n.enums[m.range],D=n.classes.lookup.get(m.range);I&&(k=I),D&&(k=D)}let R;return m&&m.subproperty_of&&n.slots.lookup.has(m.subproperty_of)&&(R=n.slots.lookup.get(m.subproperty_of)),{qualifier:T,range:k,subpropertyOf:R}}).filter(c=>c!==null);V&&$&&G&&i.push({association:g,inheritedRanges:B,level:f,qualifiers:F})}g.children&&S(g.children,f+1)}};return S([n.associations]),i.sort((d,f)=>f.level-d.level),i}function Zt({row:e,index:o}){var m,T,k,R,I,D;const t=je(),{model:n}=C.useContext(Aa),[i,u]=C.useState(!1);if(!n)return"Loading...";const{query_graph:p}=t,l=p.edges[e.edgeId];if(!l)return null;const x=Array.isArray(l==null?void 0:l.qualifier_constraints)&&l.qualifier_constraints.length>0&&Array.isArray((m=l.qualifier_constraints[0])==null?void 0:m.qualifier_set)&&l.qualifier_constraints[0].qualifier_set.length>0,{edgeId:N,subjectIsReference:b,objectIsReference:S}=e;function d(P){if(!P)return"biolink:NamedThing";const y=p.nodes[P];return y&&Array.isArray(y.categories)&&y.categories[0]?y.categories[0]:"biolink:NamedThing"}const f=((T=d(l.subject).replace("biolink:","").match(/[A-Z][a-z]+/g))==null?void 0:T.join(" ").toLowerCase())||"named thing",g=(l.subject&&((k=p.nodes[l.subject])==null?void 0:k.categories)&&((R=l.predicates)==null?void 0:R[0])||"biolink:related_to").replace("biolink:","").replace(/_/g," "),B=((I=d(l.object).replace("biolink:","").match(/[A-Z][a-z]+/g))==null?void 0:I.join(" ").toLowerCase())||"named thing",V=Xt(f,g,B,n);function $(){t.dispatch({type:"deleteEdge",payload:{id:N}})}function G(P,y){t.dispatch({type:"editEdge",payload:{edgeId:N,endpoint:P,nodeId:y}})}function F(P,y){y&&t.dispatch({type:"editNode",payload:{id:P,node:y}})}function c(){t.dispatch({type:"addHop",payload:{nodeId:l.object}})}return a.jsxs("div",{className:"editor-row-wrapper",children:[a.jsxs("div",{className:"textEditorRow",children:[a.jsx(ke,{onClick:$,className:"textEditorIconButton",disabled:(((D=t.textEditorRows)==null?void 0:D.length)??0)<2,children:a.jsx(zt,{})}),a.jsxs("p",{children:[o===0&&"Find",o===1&&"where",o>1&&"and where"]}),a.jsx(Pa,{id:l.subject,properties:l.subject?p.nodes[l.subject]:"",setReference:P=>G("subject",P),update:b?()=>G("subject",null):F,isReference:b,options:{includeCuries:!b,includeCategories:!b,includeExistingNodes:o!==0,existingNodes:Object.keys(p.nodes).filter(P=>P!==l.object).map(P=>({...p.nodes[P],key:P,name:p.nodes[P].name||P}))}}),a.jsx(Ro,{id:N}),a.jsx(Pa,{id:l.object,properties:l.object?p.nodes[l.object]:"",setReference:P=>G("object",P),update:S?()=>G("object",null):F,isReference:S,options:{includeCuries:!S,includeCategories:!S,includeExistingNodes:o!==0,existingNodes:Object.keys(p.nodes).filter(P=>P!==l.subject).map(P=>({...p.nodes[P],key:P,name:p.nodes[P].name||P}))}}),a.jsx(ke,{onClick:c,className:"textEditorIconButton",children:a.jsx(Ht,{})})]}),a.jsx(tt,{in:i,children:a.jsx("div",{className:"qualifiers-wrapper",children:a.jsx(Yt,{id:N,associations:V})})}),a.jsxs("button",{type:"button",className:"dropdown-toggle",onClick:()=>{u(P=>!P)},style:{color:"#333"},children:[a.jsx("span",{style:{fontSize:"0.8em"},children:i?"▲":"▼"}),a.jsxs("span",{style:x?{fontWeight:"bold",fontStyle:"italic"}:void 0,children:[" Qualifiers",x&&"*"]})]})]})}function en({rows:e}){return a.jsx("div",{id:"queryTextEditor",children:e.map((o,t)=>a.jsx(Zt,{row:o,index:t},o.edgeId))})}const Me={w:50,h:25},Ye={x:-54,y:-90},Bo={x:(Ye.x+(Ye.x+Me.w))/2,y:(Ye.y+(Ye.y+Me.h))/2},Xe={x:4,y:-90},No={x:(Xe.x+(Xe.x+Me.w))/2,y:(Xe.y+(Xe.y+Me.h))/2};function an(e,o){const{nodeRadius:t,colorMap:n}=o;return e.append("g").attr("class","node").attr("id",i=>i.id).call(i=>i.append("circle").attr("class",u=>`nodeCircle node-${u.id}`).attr("r",t).attr("fill",u=>n(u.categories)[1]).style("cursor","pointer").call(u=>u.append("title").text(p=>{let l=p.id;return p.name&&(l+=`: ${p.name}`),l}))).call(i=>i.append("text").attr("class","nodeLabel").style("pointer-events","none").attr("text-anchor","middle").style("font-weight",600).attr("alignment-baseline","middle").text(u=>{const{name:p}=u;return p||"Something"}).each(te.fitTextIntoCircle)).call(i=>i.append("rect").attr("rx",5).attr("ry",5).attr("transform",`translate(${Ye.x},${Ye.y})`).attr("width",Me.w).attr("height",Me.h).attr("stroke","black").attr("fill","white").style("filter","url(#buttonShadow)").style("display","none").attr("class",u=>`${u.id} deleteRect`)).call(i=>i.append("text").attr("dx",Bo.x).attr("dy",Bo.y).style("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class",u=>`${u.id} deleteLabel`).style("display","none").text("delete")).call(i=>i.append("rect").attr("rx",5).attr("ry",5).attr("transform",`translate(${Xe.x},${Xe.y})`).attr("width",Me.w).attr("height",Me.h).attr("stroke","black").attr("fill","white").style("filter","url(#buttonShadow)").style("display","none").attr("class",u=>`${u.id} editRect`)).call(i=>i.append("text").attr("dx",No.x).attr("dy",No.y).style("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class",u=>`${u.id} editLabel`).style("display","none").text("edit"))}function on(e,o){const{colorMap:t}=o;return e.call(n=>n.select(".nodeCircle").attr("fill",i=>t(i.categories)[1])).style("filter",n=>n.is_set?"url(#setShadow)":"").call(n=>n.select("title").text(i=>{let u=i.id;return i.name&&(u+=`: ${i.name}`),u})).call(n=>n.select(".nodeLabel").text(i=>{const{name:u}=i;return u||"Something"}).each(te.fitTextIntoCircle))}function tn(e){return e.transition().ease(qo).duration(1e3).attr("transform",o=>`translate(${o.x},-40)`).call(o=>o.select("circle").attr("fill","red")).remove()}function nn(e){me(".nodeCircle").on("click",function(o,t){o.stopPropagation(),ye(this).attr("stroke","#e0dfdf").attr("stroke-width","5"),e(t.id)})}function rn(e,o){me(".nodeCircle").on("click",(t,n)=>{const{id:i}=n;ye("#nodeContainer").raise(),ye(`#${i}`).raise(),e!==i?(t.stopPropagation(),me(".deleteRect,.deleteLabel,.editRect,.editLabel").style("display","none"),me(`.${i}`).style("display","inherit").raise(),o(i),Y.clearAllNodes(),Y.clearAllEdges(),Y.highlightTextEditorNode(n.id),Y.highlightGraphNode(n.id)):(o(""),ye("#edgeContainer").raise())})}function sn(e){ye(`.nodeCircle.node-${e}`).dispatch("click")}function ln(e,o){me(".deleteRect").on("click",(t,n)=>{const{id:i}=n;ye("#edgeContainer").raise(),o(""),e(i)})}function cn(e,o){me(".editRect").on("click",(t,n)=>{const{id:i}=n,u=ye(`#${i} > .nodeCircle`).node();ye("#edgeContainer").raise(),o(""),e(i,u,"editNode")})}function un(e){me(".nodeCircle").on("mouseover",(o,t)=>{(e===t.id||!e)&&(Y.highlightTextEditorNode(t.id),Y.highlightGraphNode(t.id))}).on("mouseout",(o,t)=>{(e!==t.id||!e)&&(Y.clearTextEditorNode(t.id),Y.clearGraphNode(t.id))})}function pn(e,o,t,n){me(".node").call(zo.dragNode(e))}function dn(){me(".nodeCircle").on("click",null)}function xn(){me(".nodeCircle").on("mouseover",null).on("mouseout",null)}function Cn(){me(".nodeCircle").transition().delay(2e3).duration(1e3).attr("stroke-width","0")}const Be={enter:an,update:on,exit:tn,attachConnectionClick:nn,attachNodeClick:rn,attachEditClick:cn,attachDeleteClick:ln,attachMouseHover:un,attachDrag:pn,removeClicks:dn,removeMouseHover:xn,removeBorder:Cn,clickNode:sn},Te=48,mn=225;function gn({height:e,width:o,clickState:t,updateClickState:n}){var F;const{colorMap:i,predicates:u=[]}=C.useContext(Aa),p=(F=u==null?void 0:u.filter(c=>c==null?void 0:c.symmetric))==null?void 0:F.map(c=>c==null?void 0:c.predicate),l=je(),{query_graph:x}=l,{nodes:N,edges:b}=C.useMemo(()=>pa.getNodeAndEdgeListsForDisplay(x),[l.state]),S=C.useRef(null),d=C.useRef(null),f=C.useRef(null),g=C.useRef(null),B=C.useRef(null),V={nodeRadius:Te,colorMap:i||(()=>["",""])};C.useEffect(()=>{g.current=ye(f.current).attr("width",o).attr("height",e).attr("border","1px solid black").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",[0,0,o,e])},[]),C.useEffect(()=>{g.current.select("#nodeContainer").empty()&&g.current.append("g").attr("id","nodeContainer"),g.current.select("#edgeContainer").empty()&&g.current.append("g").attr("id","edgeContainer"),d.current=g.current.select("#edgeContainer").selectAll("g"),S.current=g.current.select("#nodeContainer").selectAll("g")},[]),C.useEffect(()=>{if(g.current.select("defs").empty()){const c=g.current.append("defs");c.append("marker").attr("id","arrow").attr("viewBox",[0,0,20,13]).attr("refX",20).attr("refY",6.5).attr("markerWidth",6.5).attr("markerHeight",25).attr("orient","auto-start-reverse").append("path").attr("d",Fo()([[0,0],[0,13],[25,6.5]])).attr("fill","#999");const m=c.append("filter").attr("id","setShadow").attr("width","250%").attr("height","250%");m.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",5).attr("result","blur"),m.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",0).attr("result","offsetBlur");let T=m.append("feMerge");T.append("feMergeNode").attr("in","offsetBlur"),T.append("feMergeNode").attr("in","SourceGraphic");const k=c.append("filter").attr("id","buttonShadow").attr("width","130%").attr("height","130%");k.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1).attr("result","blur"),k.append("feOffset").attr("in","blur").attr("dx",2).attr("dy",2).attr("result","offsetBlur"),T=k.append("feMerge"),T.append("feMergeNode").attr("in","offsetBlur"),T.append("feMergeNode").attr("in","SourceGraphic")}},[]),C.useEffect(()=>{B.current=Vo().force("collide",Go().radius(Te)).force("link",_o().id(c=>c.id).distance(mn).strength(1)).force("center",Uo(o/2,e/2).strength(.05)).on("tick",$)},[]);function $(){S.current&&S.current.attr("transform",c=>{let m=Te;return c.fx!==null&&c.fx!==void 0&&(m*=.5),c.x=te.getBoundedValue(c.x||0,o-m,m),c.y=te.getBoundedValue(c.y||0,e-m,m),`translate(${c.x},${c.y})`}),d.current&&(d.current.select(".edgePath").attr("d",c=>{var P,y,ae,A;const{x1:m,y1:T,qx:k,qy:R,x2:I,y2:D}=te.getCurvedEdgePos(((P=c.source)==null?void 0:P.x)||0,((y=c.source)==null?void 0:y.y)||0,((ae=c.target)==null?void 0:ae.x)||0,((A=c.target)==null?void 0:A.y)||0,c.numEdges||1,c.index||0,Te);return`M${m},${T}Q${k},${R} ${I},${D}`}),d.current.select(".edgeTransparent").attr("d",c=>{var ae,A,L,H;const{x1:m,y1:T,qx:k,qy:R,x2:I,y2:D}=te.getCurvedEdgePos(((ae=c.source)==null?void 0:ae.x)||0,((A=c.source)==null?void 0:A.y)||0,((L=c.target)==null?void 0:L.x)||0,((H=c.target)==null?void 0:H.y)||0,c.numEdges||1,c.index||0,Te),P=m>I?`${I},${D}`:`${m},${T}`,y=m>I?`${m},${T}`:`${I},${D}`;return`M${P}Q${k},${R} ${y}`}),d.current.select(".source").attr("cx",c=>{var k,R,I,D;const{x1:m}=te.getCurvedEdgePos(((k=c.source)==null?void 0:k.x)||0,((R=c.source)==null?void 0:R.y)||0,((I=c.target)==null?void 0:I.x)||0,((D=c.target)==null?void 0:D.y)||0,c.numEdges||1,c.index||0,Te),T=te.getBoundedValue(m,o);return c.x=T,T}).attr("cy",c=>{var k,R,I,D;const{y1:m}=te.getCurvedEdgePos(((k=c.source)==null?void 0:k.x)||0,((R=c.source)==null?void 0:R.y)||0,((I=c.target)==null?void 0:I.x)||0,((D=c.target)==null?void 0:D.y)||0,c.numEdges||1,c.index||0,Te),T=te.getBoundedValue(m,e);return c.y=T,T}),d.current.select(".target").attr("cx",c=>{var k,R,I,D;const{x2:m}=te.getCurvedEdgePos(((k=c.source)==null?void 0:k.x)||0,((R=c.source)==null?void 0:R.y)||0,((I=c.target)==null?void 0:I.x)||0,((D=c.target)==null?void 0:D.y)||0,c.numEdges||1,c.index||0,Te),T=te.getBoundedValue(m,o);return c.x=T,T}).attr("cy",c=>{var k,R,I,D;const{y2:m}=te.getCurvedEdgePos(((k=c.source)==null?void 0:k.x)||0,((R=c.source)==null?void 0:R.y)||0,((I=c.target)==null?void 0:I.x)||0,((D=c.target)==null?void 0:D.y)||0,c.numEdges||1,c.index||0,Te),T=te.getBoundedValue(m,e);return c.y=T,T}),d.current.select(".edgeButtons").attr("transform",c=>{const{x:m,y:T}=te.getEdgeMidpoint(c);return`translate(${m},${T})`}))}C.useEffect(()=>{var R;const c=new Map(S.current.data().map(I=>[I.id,{x:I.x,y:I.y}])),m=N.map(I=>Object.assign(c.get(I.id)||{x:Math.random()*o,y:Math.random()*e},I)),T=b.map(I=>({...I}));B.current.nodes(m),(R=B.current.force("link"))==null||R.links(T),B.current.alpha(1).restart(),S.current=S.current.data(m,I=>I.id).join(I=>Be.enter(I,V),I=>Be.update(I,V),I=>Be.exit(I));const k=Ie.addEdgeCurveProperties(T);k.forEach(I=>{I.symmetric=p}),d.current=d.current.data(k,I=>I.id).join(Ie.enter,Ie.update,Ie.exit)},[N,b]);function G(c,m,T){var k;l.dispatch({type:"editEdge",payload:{edgeId:c,endpoint:m,nodeId:T}}),l.state.isValid||(k=B.current)==null||k.alpha(.001).restart()}return C.useEffect(()=>{if(t.creatingConnection){const c=m=>n({type:"connectTerm",payload:{id:m}});Be.attachConnectionClick(c),Be.removeMouseHover(),Ie.removeClicks(),Ie.removeMouseHover()}else{const{clickedId:c}=t,m=k=>n({type:"click",payload:{id:k}}),T=(k,R,I)=>n({type:"openEditor",payload:{id:k,anchor:R,type:I}});Be.attachNodeClick(c,m),Be.attachEditClick(T,m),Be.attachDeleteClick(k=>l.dispatch({type:"deleteNode",payload:{id:k}}),m),Be.attachMouseHover(c),Be.attachDrag(B.current,o,e,Te),Ie.attachEdgeClick(c,m),Ie.attachEditClick(T,m),Ie.attachDeleteClick(k=>l.dispatch({type:"deleteEdge",payload:{id:k}}),m),Ie.attachMouseHover(c),Ie.attachDrag(B.current,o,e,Te,G)}g.current.on("click",c=>{me(".deleteRect,.deleteLabel,.editRect,.editLabel").style("display","none"),ye("#edgeContainer").raise(),Y.clearAllNodes(),Y.clearAllEdges(),t.clickedId!==""&&n({type:"click",payload:{id:""}}),c.stopPropagation()})},[t,N,b]),a.jsx("svg",{ref:f})}function hn({show:e,close:o}){const{displayAlert:t}=xa(),n=je(),i=pa.prune(n.query_graph),[u,p]=C.useState(""),l={message:{query_graph:i}};C.useEffect(()=>{e||p("")},[e]);const x=()=>{o()},N=()=>{Mo.post(Po.queryRoutes.base,{name:u,query:l}).then(()=>{t("success","Query bookmarked successfully"),o()}).catch(b=>{console.error("Error saving query:",b)})};return a.jsxs(Ja,{open:e,onClose:o,fullWidth:!0,maxWidth:"sm",children:[a.jsx(Ya,{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("p",{style:{margin:0},children:"Bookmark Query"}),a.jsx(ke,{style:{fontSize:"18px"},title:"Close Editor",onClick:o,children:a.jsx(Oa,{})})]})}),a.jsx(Xa,{children:a.jsx(da,{label:"Query name",fullWidth:!0,value:u,onChange:b=>p(b.target.value),autoFocus:!0})}),a.jsxs(Eo,{children:[a.jsx(ne,{onClick:x,color:"secondary",children:"Cancel"}),a.jsx(ne,{onClick:N,color:"primary",variant:"contained",disabled:!u.trim(),children:"Save"})]})]})}const yo=600,bo=400;function fn(e,o){switch(o.type){case"startConnection":{const{anchor:t}=o.payload;e.creatingConnection=!0,e.popoverId="",e.popoverAnchor=t,e.popoverType="newEdge";break}case"connectTerm":{const{id:t}=o.payload;e.chosenTerms=[...e.chosenTerms,t];break}case"connectionMade":{e.creatingConnection=!1,e.chosenTerms=[];break}case"click":{const{id:t}=o.payload;e.clickedId=t;break}case"openEditor":{const{id:t,type:n,anchor:i}=o.payload;e.popoverId=t,e.popoverType=n,e.popoverAnchor=i;break}case"closeEditor":{e.popoverId="",e.popoverType="",e.popoverAnchor=null;break}default:return e}return{...e}}function In(){const e=je(),{user:o}=Qa(),{query_graph:t}=e,[n,i]=C.useState(!1),[u,p]=C.useState(!1),[l,x]=C.useReducer(fn,{creatingConnection:!1,chosenTerms:[],clickedId:"",popoverId:"",popoverAnchor:null,popoverType:""});function N(){e.dispatch({type:"addEdge",payload:l.chosenTerms})}function b(){Object.keys(t.nodes).length?e.dispatch({type:"addHop",payload:{}}):e.dispatch({type:"addNode",payload:{}})}function S(d,f){e.dispatch({type:"editNode",payload:{id:d,node:f}})}return C.useEffect(()=>{l.creatingConnection&&l.chosenTerms.length>=2&&(N(),x({type:"connectionMade"}),Be.removeBorder())},[l]),a.jsx("div",{id:"queryGraphEditor",children:a.jsxs("div",{id:"graphContainer",style:{height:bo+50,width:yo},children:[a.jsx(gn,{height:bo,width:yo,clickState:l,updateClickState:x}),a.jsxs("div",{id:"graphBottomButtons",children:[a.jsx(ne,{onClick:()=>{b()},children:"Add New Term"}),a.jsx(ne,{onClick:d=>{x({type:"startConnection",payload:{anchor:d.currentTarget}}),setTimeout(()=>{x({type:"closeEditor"})},5e3)},children:"Connect Terms"}),a.jsx($o,{title:o?"":"Login to save your query",children:a.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(ne,{onClick:()=>p(!0),disabled:!o,children:"Bookmark Graph"})})})]}),a.jsxs(Xo,{open:!!l.popoverAnchor,anchorEl:l.popoverAnchor,onClose:()=>x({type:"closeEditor"}),anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(l.popoverType==="editNode"||l.popoverType==="newNode")&&a.jsx(Pa,{properties:t.nodes[l.popoverId],id:l.popoverId,update:(d,f)=>S(d,f),isReference:!1,setReference:()=>{},options:{includeExistingNodes:!1}}),l.popoverType==="editEdge"&&a.jsx(Ro,{id:l.popoverId}),l.popoverType==="newEdge"&&a.jsx(to,{style:{padding:"10px"},children:a.jsx("p",{children:"Select two terms to connect!"})})]}),a.jsx(So,{open:n,setOpen:i,message:e.query_graph,download_type:"query"}),a.jsx(hn,{show:u,close:()=>p(!1)})]})})}const Tn=[{type:"template",tags:"AOP",template:[{type:"text",text:"What adverse outcome pathways (AOPs) may explain the relationship between "},{type:"node",id:"n0",name:"chemical exposure",filterType:"biolink:ChemicalEntity"},{type:"text",text:" and "},{type:"node",id:"n4",name:"disease",filterType:"biolink:DiseaseOrPhenotypicFeature"},{type:"text",text:"?"}],structure:{nodes:{n1:{name:"Gene",category:"biolink:Gene"},n2:{name:"Biological Process",category:"biolink:BiologicalProcessOrActivity"},n3:{name:"Phenotypic Feature",category:"biolink:PhenotypicFeature"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:related_to"},e1:{subject:"n1",object:"n2",predicate:"biolink:related_to"},e3:{subject:"n2",object:"n3",predicate:"biolink:related_to"},e4:{subject:"n3",object:"n4",predicate:"biolink:related_to"}}}},{type:"template",tags:"COP",template:[{type:"text",text:"What clinical outcome pathways (COPs) may explain the relationship between "},{type:"node",id:"n0",name:"drug",filterType:"biolink:Drug"},{type:"text",text:" and "},{type:"node",id:"n4",name:"disease",filterType:"biolink:DiseaseOrPhenotypicFeature"},{type:"text",text:"?"}],structure:{nodes:{n1:{name:"Gene",category:"biolink:Gene"},n2:{name:"Biological Process",category:"biolink:BiologicalProcessOrActivity"},n3:{name:"Phenotypic Feature",category:"biolink:PhenotypicFeature"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:related_to"},e1:{subject:"n1",object:"n2",predicate:"biolink:related_to"},e3:{subject:"n2",object:"n3",predicate:"biolink:related_to"},e4:{subject:"n3",object:"n4",predicate:"biolink:related_to"}}}},{type:"template",tags:"AOP",template:[{type:"text",text:"What genes may relate "},{type:"node",id:"n0",name:"chemical exposure",filterType:"biolink:ChemicalEntity"},{type:"text",text:" and "},{type:"node",id:"n2",name:"disease",filterType:"biolink:DiseaseOrPhenotypicFeature"},{type:"text",text:"?"}],structure:{nodes:{n1:{name:"Gene",category:"biolink:Gene"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:related_to"},e1:{subject:"n1",object:"n2",predicate:"biolink:related_to"}}}},{type:"template",tags:"COP",template:[{type:"text",text:"What genes may relate "},{type:"node",id:"n0",name:"drug",filterType:"biolink:Drug"},{type:"text",text:" and "},{type:"node",id:"n2",name:"disease",filterType:"biolink:DiseaseOrPhenotypicFeature"},{type:"text",text:"?"}],structure:{nodes:{n1:{name:"Gene",category:"biolink:Gene"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:related_to"},e1:{subject:"n1",object:"n2",predicate:"biolink:related_to"}}}},{type:"example",template:[{type:"text",text:"Chemicals that might ameliorate Huntington's Disease"}],structure:{nodes:{n0:{name:"Chemical Entity",category:"biolink:ChemicalEntity"},n1:{name:"Huntington disease",category:"biolink:Disease",id:"MONDO:0007739"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:treats"}}}},{type:"example",template:[{type:"text",text:"Chemicals that interact with a gene related to Castleman disease"}],structure:{nodes:{n0:{name:"Chemical Entity",category:"biolink:ChemicalEntity"},n1:{name:"Gene",category:"biolink:Gene"},n2:{name:"Castleman disease",category:"biolink:DiseaseOrPhenotypicFeature",id:"MONDO:0015564"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:interacts_with"},e1:{subject:"n1",object:"n2",predicate:"biolink:related_to"}}}},{type:"example",template:[{type:"text",text:"Genes and chemicals related to GLUT 1 deficiency, and to each other"}],structure:{nodes:{n0:{name:"Chemical Entity",category:"biolink:ChemicalEntity"},n1:{name:"Gene",category:"biolink:Gene"},n2:{name:"GLUT 1 deficiency syndrome",category:"biolink:DiseaseOrPhenotypicFeature",id:"MONDO:0000188"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:related_to"},e1:{subject:"n1",object:"n2",predicate:"biolink:related_to"},e2:{subject:"n2",object:"n0",predicate:"biolink:related_to"}}}},{type:"example",template:[{type:"text",text:"Diseases associated with 2,3,7,8-tetrochlorodibenzo-p-dioxin"}],structure:{nodes:{n0:{name:"2,3,7,8-tetrochlorodibenzo-p-dioxin",category:"biolink:MolecularEntity",id:"PUBCHEM.COMPOUND:15625"},n1:{name:"Disease",category:"biolink:Disease"}},edges:{e0:{subject:"n0",object:"n1",predicate:"biolink:associated_with"}}}}],Bn=nt(e=>({modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],display:"flex",flexDirection:"row",width:1200,height:900,borderRadius:"8px"}}));function Nn(e){return a.jsx("span",{children:e.map((o,t)=>o.type==="text"?a.jsx("span",{children:o.text},t):o.type==="node"?a.jsx("code",{children:o.name},t):null)})}function yn(){return a.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2.5rem",fontStyle:"italic",color:"#acacac"},children:"Please select an example from the list"})}function bn(e){const o=e.template.filter(u=>u.type==="node").reduce((u,{id:p})=>({...u,[p]:{categories:[]}}),{}),t=Object.entries(e.structure.nodes).reduce((u,[p,l])=>({...u,[p]:{categories:[l.category],name:l.name,...l.id&&{ids:[l.id]}}}),{}),n=Object.entries({...o,...t}).sort(([u],[p])=>u.localeCompare(p)).reduce((u,[p,l])=>({...u,[p]:l}),{}),i=Object.entries(e.structure.edges).reduce((u,[p,l])=>({...u,[p]:{subject:l.subject,object:l.object,predicates:[l.predicate]}}),{});return{message:{query_graph:{nodes:n,edges:i}}}}function vn({open:e,setOpen:o}){const t=Bn(),n=je(),[i,u]=C.useState(null),[p,l]=C.useState([]),x=()=>{o(!1),u(null)},N=d=>{u(d);const f=bn(d);n.dispatch({type:"saveGraph",payload:f})},b=(d,f)=>{n.dispatch({type:"editNode",payload:{id:d,node:f}})},S=d=>{const f={type:"example",template:[{text:JSON.stringify(d.query.message.query_graph,null,2),type:"json_text"}],structure:{nodes:{},edges:{}}};u(f),n.dispatch({type:"saveGraph",payload:d.query})};return C.useEffect(()=>{Mo.get(Po.queryRoutes.base).then(d=>{l(d.data)}).catch(()=>{})},[e]),a.jsx(st,{open:e,onClose:x,className:t.modal,children:a.jsxs("div",{className:t.paper,children:[a.jsxs(lt,{style:{flexBasis:350,overflowY:"auto"},subheader:a.jsx(ja,{component:"div",style:{background:"white",borderBottom:"2px solid rgba(0, 0, 0, 0.12)"},children:"Please select an example below"}),children:[Tn.map((d,f)=>a.jsx(po,{divider:!0,onClick:()=>{N(d)},children:a.jsx(xo,{primary:a.jsxs(a.Fragment,{children:[d.tags&&a.jsxs(a.Fragment,{children:[a.jsx(Wa,{size:"small",label:d.tags})," "]}),Nn(d.template)]})})},f)),p.map((d,f)=>a.jsx(po,{divider:!0,onClick:()=>{S(d)},children:a.jsx(xo,{primary:a.jsxs(a.Fragment,{children:[a.jsx(Wa,{size:"small",label:"Bookmarked",color:"secondary"})," ",d.name]})})},f))]}),a.jsx(ct,{orientation:"vertical",flexItem:!0}),a.jsxs("div",{style:{display:"flex",flex:"1",padding:"1rem",flexDirection:"column"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:a.jsx(ke,{size:"small",onClick:x,children:a.jsx(Oa,{})})}),a.jsx("div",{style:{flex:"1"},children:i===null?a.jsx(yn,{}):i.template.map((d,f)=>d.type==="text"?a.jsx("span",{style:{fontSize:"16px"},children:d.text},f):d.type==="node"?a.jsx("div",{style:{maxWidth:"300px",display:"inline-flex",transform:"translateY(-16px)",marginLeft:"-1ch",marginRight:"-1ch"},children:a.jsx(Pa,{id:d.id,title:d.name,size:"small",properties:n.query_graph.nodes[d.id],nameresCategoryFilter:d.filterType,update:b,isReference:!1,setReference:()=>{},options:{includeCuries:!0,includeCategories:!1,includeExistingNodes:!1}})},f):d.type==="json_text"?a.jsx("pre",{id:"resultJSONContainer",children:d.text}):null)}),a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:a.jsx(ne,{variant:"contained",color:"primary",onClick:x,children:"Done"})})]})]})})}const Sn=qe(a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),kn=qe(a.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}));function jn({startIcon:e,displayText:o,clipboardText:t,notificationText:n,disabled:i}){const[u,p]=C.useState("");function l(){const x=document.createElement("textarea");x.innerHTML=t(),document.body.appendChild(x),x.select(),x.focus(),typeof navigator.clipboard<"u"&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(x.innerHTML):document.execCommand("copy"),x.remove(),p(n)}return a.jsxs(a.Fragment,{children:[a.jsx(ne,{startIcon:e,variant:"contained",onClick:l,disabled:i,children:o}),a.jsx(Jo,{open:!!u,autoHideDuration:6e3,onClose:()=>p(""),anchorOrigin:{vertical:"top",horizontal:"center"},children:a.jsx(Yo,{severity:"success",children:u})})]})}function Pn({show:e,close:o}){const t=je(),[n,i]=C.useState([]),{message:u}=t.state,[p,l]=C.useState(u),x=ko(!1,""),{displayAlert:N}=xa();function b(g){const B=g.updated_src;i(Va.validateMessage(B)),l(B)}function S(g){const{files:B}=g.target;B&&(Array.from(B).forEach(V=>{const $=new window.FileReader;$.onloadstart=()=>x.setLoading("Loading Query Graph"),$.onloadend=()=>x.setSuccess(),$.onload=G=>{const F=G.target&&G.target.result;try{const c=JSON.parse(F);c.message&&c.message.knowledge_graph&&delete c.message.knowledge_graph,c.message&&c.message.results&&delete c.message.results;const m=Va.validateMessage(c);i(m),m.length||(c.message.query_graph=pa.toCurrentTRAPI(c.message.query_graph)),l(c)}catch(c){console.error("Error reading query graph file:",c),N("error","Failed to read this query graph. Are you sure this is valid JSON?")}},$.onerror=()=>{N("error","Sorry but there was a problem uploading the file. The file may be invalid JSON.")},$.readAsText(V)}),g.target.value="")}C.useEffect(()=>{e&&(i(Va.validateMessage(u)),l(u))},[e]);function d(){t.dispatch({type:"saveGraph",payload:p})}function f(){const g=pa.prune(p.message.query_graph);return JSON.stringify({message:{...p.message,query_graph:g}},null,2)}return a.jsxs(Ja,{open:e,fullWidth:!0,maxWidth:"lg",onClose:()=>{i([]),o()},children:[a.jsx(Ya,{style:{padding:0},children:a.jsxs("div",{id:"jsonEditorTitle",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"jsonEditorUpload",id:"uploadIconLabel",children:[a.jsx("input",{accept:".json",style:{display:"none"},type:"file",id:"jsonEditorUpload",onChange:g=>S(g),disabled:!x.displayPage}),a.jsx(ne,{component:"span",variant:"contained",disabled:!x.displayPage,style:{margin:"0px 10px"},title:"Load Message",startIcon:a.jsx(Sn,{}),children:"Upload"})]}),a.jsx(jn,{startIcon:a.jsx(wo,{}),displayText:"Copy",clipboardText:f,notificationText:"Copied JSON to clipboard!",disabled:!x.displayPage})]}),a.jsx("div",{style:{color:"#777"},children:"Query Graph JSON Editor"}),a.jsx(ke,{style:{fontSize:"18px"},title:"Close Editor",onClick:()=>{i([]),o()},children:a.jsx(Oa,{})})]})}),a.jsxs(Xa,{dividers:!0,style:{padding:0,height:"10000px"},children:[a.jsx(x.Display,{}),x.displayPage&&a.jsxs("div",{style:{display:"flex",height:"100%"},children:[a.jsx("div",{style:{overflowY:"auto",paddingBottom:"5px",flexGrow:1},children:a.jsx(ut,{name:!1,theme:"rjv-default",collapseStringsAfterLength:15,indentWidth:2,iconStyle:"triangle",enableClipboard:!1,displayObjectSize:!1,displayDataTypes:!1,defaultValue:"",src:p,onEdit:b,onAdd:b,onDelete:b})}),n.length>0&&a.jsxs("div",{style:{flexShrink:1,paddingRight:"20px"},children:[a.jsx("h4",{children:"This query graph is not valid."}),n.map((g,B)=>a.jsx("p",{children:g},B))]})]})]}),a.jsx(Eo,{children:a.jsx(ne,{startIcon:a.jsx(kn,{}),disabled:n.length>0||!x.displayPage,variant:"contained",title:"Save Changes",onClick:()=>{d(),o()},children:"Save"})})]})}const An=vo(e=>({root:{marginLeft:"auto",color:e.palette.getContrastText(Ga[600]),backgroundColor:Ga[600],"&:hover":{backgroundColor:Ga[700]}}}))(ne);function On(){const e=je(),o=ko(!1),{user:t}=Qa(),{browserSupport:n}=jo(),[i,u]=C.useState(!1),[p,l]=C.useState(!1),[x,N]=C.useState(!1),[b]=C.useState(Lt[0]),{displayAlert:S}=xa(),d=Do(),[f,g]=C.useState(!1),B=localStorage.getItem("passkeyPopupDenied");C.useEffect(()=>{var $;t&&n&&(($=t._count)==null?void 0:$.WebAuthnCredential)===0&&B!=="true"&&l(!0)},[t,n,B]);async function V(){o.setLoading("Fetching answer, this may take a while");const $=pa.prune(e.query_graph),G=await Ao.ara.getQuickAnswer(b,{message:{query_graph:$}});G.status==="error"?(S("error",`${G.message}. Please try asking this question later.`),o.setSuccess()):Wo("quick_message",JSON.stringify(G)).then(()=>{S("success","Your answer is ready!"),d({to:"/answer"})}).catch(F=>{S("error",`Failed to locally store this answer. Please try again later. Error: ${F}`),o.setSuccess()})}return a.jsxs(a.Fragment,{children:[a.jsx(o.Display,{}),o.displayPage&&a.jsx("div",{id:"queryBuilderContainer",children:a.jsxs("div",{id:"queryEditorContainer",children:[a.jsx(Dt,{open:p,onClose:()=>l(!1)}),a.jsx("div",{style:{flex:1},children:a.jsx(en,{rows:e.textEditorRows||[]})}),a.jsxs("div",{children:[a.jsx(In,{}),a.jsxs("div",{id:"queryBuilderButtons",children:[a.jsx(ne,{onClick:()=>g(!0),variant:"outlined",children:"Load Example"}),a.jsx(vn,{open:f,setOpen:g}),a.jsx(ne,{onClick:()=>u(!0),variant:"outlined",children:"Edit JSON"}),a.jsx(ne,{onClick:()=>N(!0),variant:"outlined",children:"Download Query"}),a.jsx("div",{style:{flexGrow:1}}),a.jsx(An,{onClick:()=>V(),variant:"contained",children:"Submit"})]})]}),a.jsx(Pn,{show:i,close:()=>u(!1)}),a.jsx(So,{open:x,setOpen:N,message:e.query_graph,download_type:"all_queries"})]})})]})}const si=function(){return a.jsx(On,{})};export{si as component};

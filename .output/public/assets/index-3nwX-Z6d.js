import{r as i,j as o,N as De,R as Ee}from"./main-Bxfe4Qal.js";import{u as Gt}from"./AuthContext-6RiyJAM4.js";import{u as Jt,r as et}from"./AlertProvider-CS83QDva.js";import{B as _t,u as Me,b as xt,c as Ae,C as ke}from"./CircularProgress-B8CBKe07.js";import{C as Zt}from"./Close-CkfqEMVI.js";import{R as Le}from"./main-CQIMZrt1.js";import{u as qt,b as dt,L as Nt,a as ot}from"./listItemTextClasses-BH3kCDiK.js";import{u as We}from"./usePasskey-B8nwSqM3.js";import{B as F}from"./Box-CViFGFuH.js";import{G as St}from"./Grid-Dy529OcM.js";import{P as Ht}from"./Paper-BphQmbS1.js";import{A as $e}from"./Avatar-DvzzZ9N9.js";import{T as E}from"./Typography-S0UZMlvX.js";import{d as yt,g as vt,e as wt,h as N,f as K,i as te,j as Ct,m as jt,o as ze}from"./createSimplePaletteValueFilter-BgnxeUzB.js";import{d as ee}from"./isHostComponent-D3YBfmz0.js";import{o as oe}from"./Modal-CENjY7I_.js";import{u as J,o as Fe,I as ut}from"./IconButton-D-WOROUy.js";import{K as Ne,a as He}from"./KeyboardArrowRight-Comv3Gqf.js";import{L as Oe,a as Ot,D as le}from"./ListItemText-BgG2IG-P.js";import{L as Xt}from"./ListItem-hRsCqYjX.js";import{B as lt}from"./Button-CpGhMJw8.js";import{D as Xe}from"./Divider-BbMkSAUy.js";import{D as re,a as ne,b as se}from"./DialogTitle-BsB0Df6C.js";import"./isFocusVisible-B8k4qzLc.js";import"./useThemeProps-CsLVBKd8.js";import"./isMuiElement-CAkp5su4.js";import"./dividerClasses-FcsMuOnI.js";function Ue(e){return vt("MuiTab",e)}const T=yt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Ye=e=>{const{classes:t,textColor:s,fullWidth:a,wrapped:c,icon:p,label:m,selected:h,disabled:f}=e,v={root:["root",p&&m&&"labelIcon",`textColor${te(s)}`,a&&"fullWidth",c&&"wrapped",h&&"selected",f&&"disabled"],icon:["iconWrapper","icon"]};return Ct(v,Ue,t)},Ke=K(_t,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.label&&s.icon&&t.labelIcon,t[`textColor${te(s.textColor)}`],s.fullWidth&&t.fullWidth,s.wrapped&&t.wrapped,{[`& .${T.iconWrapper}`]:t.iconWrapper},{[`& .${T.icon}`]:t.icon}]}})(jt(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="top",style:{[`& > .${T.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="bottom",style:{[`& > .${T.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="start",style:{[`& > .${T.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:s})=>t.icon&&t.label&&s==="end",style:{[`& > .${T.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${T.selected}`]:{opacity:1},[`&.${T.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${T.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${T.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${T.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${T.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),Ut=i.forwardRef(function(t,s){const a=wt({props:t,name:"MuiTab"}),{className:c,disabled:p=!1,disableFocusRipple:m=!1,fullWidth:h,icon:f,iconPosition:v="top",indicator:w,label:g,onChange:x,onClick:I,onFocus:P,selected:S,selectionFollowsFocus:y,textColor:Q="inherit",value:C,wrapped:j=!1,...B}=a,W={...a,disabled:p,disableFocusRipple:m,selected:S,icon:!!f,iconPosition:v,label:!!g,fullWidth:h,textColor:Q,wrapped:j},H=Ye(W),O=f&&g&&i.isValidElement(f)?i.cloneElement(f,{className:N(H.icon,f.props.className)}):f,V=r=>{!S&&x&&x(r,C),I&&I(r)},$=r=>{y&&!S&&x&&x(r,C),P&&P(r)};return o.jsxs(Ke,{focusRipple:!m,className:N(H.root,c),ref:s,role:"tab","aria-selected":S,disabled:p,onClick:V,onFocus:$,ownerState:W,tabIndex:S?0:-1,...B,children:[v==="top"||v==="start"?o.jsxs(i.Fragment,{children:[O,g]}):o.jsxs(i.Fragment,{children:[g,O]}),w]})});function Qe(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Ve(e,t,s,a={},c=()=>{}){const{ease:p=Qe,duration:m=300}=a;let h=null;const f=t[e];let v=!1;const w=()=>{v=!0},g=x=>{if(v){c(new Error("Animation cancelled"));return}h===null&&(h=x);const I=Math.min(1,(x-h)/m);if(t[e]=p(I)*(s-f)+f,I>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(g)};return f===s?(c(new Error("Element already at target position")),w):(requestAnimationFrame(g),w)}const Ge={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Je(e){const{onChange:t,...s}=e,a=i.useRef(),c=i.useRef(null),p=()=>{a.current=c.current.offsetHeight-c.current.clientHeight};return Me(()=>{const m=ee(()=>{const f=a.current;p(),f!==a.current&&t(a.current)}),h=oe(c.current);return h.addEventListener("resize",m),()=>{m.clear(),h.removeEventListener("resize",m)}},[t]),i.useEffect(()=>{p(),t(a.current)},[t]),o.jsx("div",{style:Ge,...s,ref:c})}function _e(e){return vt("MuiTabScrollButton",e)}const Ze=yt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),qe=e=>{const{classes:t,orientation:s,disabled:a}=e;return Ct({root:["root",s,a&&"disabled"]},_e,t)},to=K(_t,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.orientation&&t[s.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Ze.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),eo=i.forwardRef(function(t,s){const a=wt({props:t,name:"MuiTabScrollButton"}),{className:c,slots:p={},slotProps:m={},direction:h,orientation:f,disabled:v,...w}=a,g=qt(),x={isRtl:g,...a},I=qe(x),P=p.StartScrollButtonIcon??Ne,S=p.EndScrollButtonIcon??He,y=dt({elementType:P,externalSlotProps:m.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:x}),Q=dt({elementType:S,externalSlotProps:m.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:x});return o.jsx(to,{component:"div",className:N(I.root,c),ref:s,role:null,ownerState:x,tabIndex:null,...w,style:{...w.style,...f==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${g?-90:90}deg)`}},children:h==="left"?o.jsx(P,{...y}):o.jsx(S,{...Q})})});function oo(e){return vt("MuiTabs",e)}const gt=yt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Yt=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,Kt=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ct=(e,t,s)=>{let a=!1,c=s(e,t);for(;c;){if(c===e.firstChild){if(a)return;a=!0}const p=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||p)c=s(e,c);else{c.focus();return}}},lo=e=>{const{vertical:t,fixed:s,hideScrollbar:a,scrollableX:c,scrollableY:p,centered:m,scrollButtonsHideMobile:h,classes:f}=e;return Ct({root:["root",t&&"vertical"],scroller:["scroller",s&&"fixed",a&&"hideScrollbar",c&&"scrollableX",p&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",m&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",h&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},oo,f)},ro=K("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${gt.scrollButtons}`]:t.scrollButtons},{[`& .${gt.scrollButtons}`]:s.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,s.vertical&&t.vertical]}})(jt(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${gt.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),no=K("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.scroller,s.fixed&&t.fixed,s.hideScrollbar&&t.hideScrollbar,s.scrollableX&&t.scrollableX,s.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),so=K("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.list,t.flexContainer,s.vertical&&t.flexContainerVertical,s.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),ao=K("span",{name:"MuiTabs",slot:"Indicator"})(jt(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),io=K(Je)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Qt={},co=i.forwardRef(function(t,s){const a=wt({props:t,name:"MuiTabs"}),c=ze(),p=qt(),{"aria-label":m,"aria-labelledby":h,action:f,centered:v=!1,children:w,className:g,component:x="div",allowScrollButtonsMobile:I=!1,indicatorColor:P="primary",onChange:S,orientation:y="horizontal",ScrollButtonComponent:Q,scrollButtons:C="auto",selectionFollowsFocus:j,slots:B={},slotProps:W={},TabIndicatorProps:H={},TabScrollButtonProps:O={},textColor:V="primary",value:$,variant:r="standard",visibleScrollbar:R=!1,...pt}=a,M=r==="scrollable",D=y==="vertical",_=D?"scrollTop":"scrollLeft",rt=D?"top":"left",nt=D?"bottom":"right",ft=D?"clientHeight":"clientWidth",Z=D?"height":"width",k={...a,component:x,allowScrollButtonsMobile:I,indicatorColor:P,orientation:y,vertical:D,scrollButtons:C,textColor:V,variant:r,visibleScrollbar:R,fixed:!M,hideScrollbar:M&&!R,scrollableX:M&&!D,scrollableY:M&&D,centered:v&&!M,scrollButtonsHideMobile:!I},z=lo(k),ae=dt({elementType:B.StartScrollButtonIcon,externalSlotProps:W.startScrollButtonIcon,ownerState:k}),ie=dt({elementType:B.EndScrollButtonIcon,externalSlotProps:W.endScrollButtonIcon,ownerState:k}),[Bt,ce]=i.useState(!1),[X,It]=i.useState(Qt),[Tt,de]=i.useState(!1),[Pt,ue]=i.useState(!1),[Rt,pe]=i.useState(!1),[Dt,fe]=i.useState({overflow:"hidden",scrollbarWidth:0}),Et=new Map,L=i.useRef(null),U=i.useRef(null),G={slots:B,slotProps:{indicator:H,scrollButton:O,...W}},Mt=()=>{const l=L.current;let n;if(l){const u=l.getBoundingClientRect();n={clientWidth:l.clientWidth,scrollLeft:l.scrollLeft,scrollTop:l.scrollTop,scrollWidth:l.scrollWidth,top:u.top,bottom:u.bottom,left:u.left,right:u.right}}let d;if(l&&$!==!1){const u=U.current.children;if(u.length>0){const b=u[Et.get($)];d=b?b.getBoundingClientRect():null}}return{tabsMeta:n,tabMeta:d}},q=xt(()=>{const{tabsMeta:l,tabMeta:n}=Mt();let d=0,u;D?(u="top",n&&l&&(d=n.top-l.top+l.scrollTop)):(u=p?"right":"left",n&&l&&(d=(p?-1:1)*(n[u]-l[u]+l.scrollLeft)));const b={[u]:d,[Z]:n?n[Z]:0};if(typeof X[u]!="number"||typeof X[Z]!="number")It(b);else{const A=Math.abs(X[u]-b[u]),Y=Math.abs(X[Z]-b[Z]);(A>=1||Y>=1)&&It(b)}}),ht=(l,{animation:n=!0}={})=>{n?Ve(_,L.current,l,{duration:c.transitions.duration.standard}):L.current[_]=l},At=l=>{let n=L.current[_];D?n+=l:n+=l*(p?-1:1),ht(n)},kt=()=>{const l=L.current[ft];let n=0;const d=Array.from(U.current.children);for(let u=0;u<d.length;u+=1){const b=d[u];if(n+b[ft]>l){u===0&&(n=l);break}n+=b[ft]}return n},he=()=>{At(-1*kt())},be=()=>{At(kt())},[me,{onChange:st,...xe}]=J("scrollbar",{className:N(z.scrollableX,z.hideScrollbar),elementType:io,shouldForwardComponentProp:!0,externalForwardedProps:G,ownerState:k}),Se=i.useCallback(l=>{st==null||st(l),fe({overflow:null,scrollbarWidth:l})},[st]),[Lt,Wt]=J("scrollButtons",{className:N(z.scrollButtons,O.className),elementType:eo,externalForwardedProps:G,ownerState:k,additionalProps:{orientation:y,slots:{StartScrollButtonIcon:B.startScrollButtonIcon||B.StartScrollButtonIcon,EndScrollButtonIcon:B.endScrollButtonIcon||B.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:ae,endScrollButtonIcon:ie}}}),ge=()=>{const l={};l.scrollbarSizeListener=M?o.jsx(me,{...xe,onChange:Se}):null;const d=M&&(C==="auto"&&(Tt||Pt)||C===!0);return l.scrollButtonStart=d?o.jsx(Lt,{direction:p?"right":"left",onClick:he,disabled:!Tt,...Wt}):null,l.scrollButtonEnd=d?o.jsx(Lt,{direction:p?"left":"right",onClick:be,disabled:!Pt,...Wt}):null,l},$t=xt(l=>{const{tabsMeta:n,tabMeta:d}=Mt();if(!(!d||!n)){if(d[rt]<n[rt]){const u=n[_]+(d[rt]-n[rt]);ht(u,{animation:l})}else if(d[nt]>n[nt]){const u=n[_]+(d[nt]-n[nt]);ht(u,{animation:l})}}}),at=xt(()=>{M&&C!==!1&&pe(!Rt)});i.useEffect(()=>{const l=ee(()=>{L.current&&q()});let n;const d=A=>{A.forEach(Y=>{Y.removedNodes.forEach(tt=>{n==null||n.unobserve(tt)}),Y.addedNodes.forEach(tt=>{n==null||n.observe(tt)})}),l(),at()},u=oe(L.current);u.addEventListener("resize",l);let b;return typeof ResizeObserver<"u"&&(n=new ResizeObserver(l),Array.from(U.current.children).forEach(A=>{n.observe(A)})),typeof MutationObserver<"u"&&(b=new MutationObserver(d),b.observe(U.current,{childList:!0})),()=>{l.clear(),u.removeEventListener("resize",l),b==null||b.disconnect(),n==null||n.disconnect()}},[q,at]),i.useEffect(()=>{const l=Array.from(U.current.children),n=l.length;if(typeof IntersectionObserver<"u"&&n>0&&M&&C!==!1){const d=l[0],u=l[n-1],b={root:L.current,threshold:.99},A=mt=>{de(!mt[0].isIntersecting)},Y=new IntersectionObserver(A,b);Y.observe(d);const tt=mt=>{ue(!mt[0].isIntersecting)},Ft=new IntersectionObserver(tt,b);return Ft.observe(u),()=>{Y.disconnect(),Ft.disconnect()}}},[M,C,Rt,w==null?void 0:w.length]),i.useEffect(()=>{ce(!0)},[]),i.useEffect(()=>{q()}),i.useEffect(()=>{$t(Qt!==X)},[$t,X]),i.useImperativeHandle(f,()=>({updateIndicator:q,updateScrollButtons:at}),[q,at]);const[ye,ve]=J("indicator",{className:N(z.indicator,H.className),elementType:ao,externalForwardedProps:G,ownerState:k,additionalProps:{style:X}}),zt=o.jsx(ye,{...ve});let it=0;const we=i.Children.map(w,l=>{if(!i.isValidElement(l))return null;const n=l.props.value===void 0?it:l.props.value;Et.set(n,it);const d=n===$;return it+=1,i.cloneElement(l,{fullWidth:r==="fullWidth",indicator:d&&!Bt&&zt,selected:d,selectionFollowsFocus:j,onChange:S,textColor:V,value:n,...it===1&&$===!1&&!l.props.tabIndex?{tabIndex:0}:{}})}),Ce=l=>{if(l.altKey||l.shiftKey||l.ctrlKey||l.metaKey)return;const n=U.current,d=Fe(n).activeElement;if(d.getAttribute("role")!=="tab")return;let b=y==="horizontal"?"ArrowLeft":"ArrowUp",A=y==="horizontal"?"ArrowRight":"ArrowDown";switch(y==="horizontal"&&p&&(b="ArrowRight",A="ArrowLeft"),l.key){case b:l.preventDefault(),ct(n,d,Kt);break;case A:l.preventDefault(),ct(n,d,Yt);break;case"Home":l.preventDefault(),ct(n,null,Yt);break;case"End":l.preventDefault(),ct(n,null,Kt);break}},bt=ge(),[je,Be]=J("root",{ref:s,className:N(z.root,g),elementType:ro,externalForwardedProps:{...G,...pt,component:x},ownerState:k}),[Ie,Te]=J("scroller",{ref:L,className:z.scroller,elementType:no,externalForwardedProps:G,ownerState:k,additionalProps:{style:{overflow:Dt.overflow,[D?`margin${p?"Left":"Right"}`:"marginBottom"]:R?void 0:-Dt.scrollbarWidth}}}),[Pe,Re]=J("list",{ref:U,className:N(z.list,z.flexContainer),elementType:so,externalForwardedProps:G,ownerState:k,getSlotProps:l=>({...l,onKeyDown:n=>{var d;Ce(n),(d=l.onKeyDown)==null||d.call(l,n)}})});return o.jsxs(je,{...Be,children:[bt.scrollButtonStart,bt.scrollbarSizeListener,o.jsxs(Ie,{...Te,children:[o.jsx(Pe,{"aria-label":m,"aria-labelledby":h,"aria-orientation":y==="vertical"?"vertical":null,role:"tablist",...Re,children:we}),Bt&&zt]}),bt.scrollButtonEnd]})}),uo=({children:e})=>{const{user:t,loading:s}=Gt(),{displayAlert:a}=Jt();return s?o.jsx("div",{children:o.jsx("p",{children:"Loading..."})}):t?e:(a("error","You must be logged in to access this page."),o.jsx(De,{to:"/",replace:!0}))},Vt=Ae(o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}));function po({open:e,onClose:t,onConfirm:s,deviceType:a}){return o.jsxs(re,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[o.jsx(ne,{children:o.jsxs(F,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[o.jsx(E,{variant:"h6",children:"Delete Passkey"}),o.jsx(ut,{onClick:t,children:o.jsx(Zt,{})})]})}),o.jsx(se,{children:o.jsxs(E,{children:["Are you sure you want to delete this passkey ",a?`(${a})`:"","? This action cannot be undone."]})}),o.jsxs(le,{children:[o.jsx(lt,{onClick:t,color:"secondary",children:"Cancel"}),o.jsx(lt,{onClick:s,variant:"contained",color:"primary",children:"Delete"})]})]})}function fo({open:e,onClose:t,onConfirm:s,queryName:a}){return o.jsxs(re,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[o.jsx(ne,{children:o.jsxs(F,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[o.jsx(E,{variant:"h6",children:"Delete Query"}),o.jsx(ut,{onClick:t,children:o.jsx(Zt,{})})]})}),o.jsx(se,{children:o.jsxs(E,{children:['Are you sure you want to delete the query "',a,'"? This action cannot be undone.']})}),o.jsxs(le,{children:[o.jsx(lt,{onClick:t,color:"secondary",children:"Cancel"}),o.jsx(lt,{onClick:s,variant:"contained",color:"primary",children:"Delete"})]})]})}function ho(){const{user:e}=Gt(),{displayAlert:t}=Jt(),{registerPasskey:s}=We(),[a,c]=i.useState([]),[p,m]=i.useState([]),[h,f]=i.useState(null),[v,w]=i.useState(!0),[g,x]=i.useState(0),[I,P]=i.useState(!1),[S,y]=i.useState(null),[Q,C]=i.useState(!1),[j,B]=i.useState(null);i.useEffect(()=>{async function r(){try{const[R,pt]=await Promise.all([ot.get(et.passkeyRoutes.list),ot.get(et.queryRoutes.base)]);c(R.data),m(pt.data)}catch(R){console.error("Failed to load profile data:",R),t("error","Failed to load profile data")}finally{w(!1)}}r()},[t]);const W=r=>{y(r),P(!0)},H=async()=>{if(S)try{await ot.delete(`${et.passkeyRoutes.base}/${S.id}`),c(a.filter(r=>(r==null?void 0:r.id)!==S.id)),t("success","Passkey deleted")}catch{t("error","Failed to delete passkey")}finally{P(!1),y(null)}},O=r=>{B(r),C(!0)},V=async()=>{try{await ot.delete(`${et.queryRoutes.base}/${j==null?void 0:j.id}`),m(p.filter(r=>(r==null?void 0:r.id)!==(j==null?void 0:j.id))),f(null),t("success","Query deleted")}catch{t("error","Failed to delete query")}finally{C(!1),B(null)}},$=async()=>{try{await s(),t("success","Passkey registered");const{data:r}=await ot.get(et.passkeyRoutes.list);c(r)}catch(r){t("error",r.message||"Failed to register passkey")}};return v?o.jsx(F,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:o.jsx(ke,{})}):o.jsxs(St,{container:!0,direction:"column",spacing:3,sx:{px:4,pb:4},children:[o.jsx(St,{children:o.jsx(Ht,{sx:{p:4,width:"100%"},children:o.jsxs(F,{display:"flex",alignItems:"center",flexWrap:"wrap",gap:3,children:[o.jsx($e,{src:e==null?void 0:e.profilePicture,alt:e==null?void 0:e.name,sx:{width:100,height:100}}),o.jsxs(F,{children:[o.jsx(E,{variant:"h4",children:e==null?void 0:e.name}),o.jsxs(E,{children:["Email: ",e==null?void 0:e.email]}),(e==null?void 0:e.createdAt)&&o.jsxs(E,{variant:"body2",color:"text.secondary",children:["Member since: ",new Date(e.createdAt).toLocaleDateString()]})]})]})})}),o.jsx(St,{children:o.jsxs(Ht,{sx:{p:4,width:"100%"},children:[o.jsxs(co,{value:g,onChange:(r,R)=>x(R),indicatorColor:"primary",textColor:"primary",sx:{mb:2},children:[o.jsx(Ut,{label:"Saved Queries"}),o.jsx(Ut,{label:"Passkeys"})]}),g===0&&o.jsxs(F,{display:"flex",sx:{height:600},children:[o.jsx(Nt,{sx:{width:350,overflowY:"auto",borderRight:1,borderColor:"divider"},children:p.length===0?o.jsx(E,{color:"text.secondary",sx:{p:2},children:"No saved queries"}):p.map(r=>o.jsx(Oe,{selected:(h==null?void 0:h.id)===(r==null?void 0:r.id),onClick:()=>f(r),children:o.jsx(Xt,{sx:{p:0},secondaryAction:o.jsx(ut,{edge:"end",onClick:()=>{r&&O(r)},children:o.jsx(Vt,{})}),children:o.jsx(Ot,{primary:r==null?void 0:r.name,secondary:r!=null&&r.createdAt?new Date(r.createdAt).toLocaleDateString():"Unknown Date"})})},r==null?void 0:r.id))}),o.jsx(F,{flex:1,sx:{p:2,overflowY:"auto"},children:h?o.jsx(Le,{src:h.query.message.query_graph,name:!1,theme:"rjv-default",collapseStringsAfterLength:15,indentWidth:2,iconStyle:"triangle",enableClipboard:!1,displayObjectSize:!1,displayDataTypes:!1}):o.jsx(E,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic",color:"text.disabled"},children:"Please select a query from the list"})})]}),g===1&&o.jsxs(o.Fragment,{children:[o.jsxs(F,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[o.jsx(E,{variant:"h5",children:"Passkeys"}),o.jsx(lt,{variant:"contained",onClick:$,children:"Add Passkey"})]}),a.length===0?o.jsx(E,{color:"text.secondary",children:"No passkeys registered"}):o.jsx(Nt,{children:a.map((r,R)=>o.jsxs(Ee.Fragment,{children:[o.jsx(Xt,{secondaryAction:o.jsx(ut,{edge:"end",onClick:()=>{r&&W(r)},children:o.jsx(Vt,{})}),children:o.jsx(Ot,{primary:(r==null?void 0:r.deviceType)||"Unknown Device",secondary:`Created: ${r!=null&&r.createdAt?new Date(r.createdAt).toLocaleDateString():"Unknown Date"}`})}),R<a.length-1&&o.jsx(Xe,{})]},r==null?void 0:r.id))})]})]})}),o.jsx(po,{open:I,onClose:()=>{P(!1),y(null)},onConfirm:H,deviceType:S==null?void 0:S.deviceType}),o.jsx(fo,{open:Q,onClose:()=>{C(!1),B(null)},onConfirm:V,queryName:j==null?void 0:j.name})]})}const Oo=function(){return o.jsx(uo,{children:o.jsx(ho,{})})};export{Oo as component};

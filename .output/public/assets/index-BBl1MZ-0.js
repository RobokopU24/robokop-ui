import{r as T,j as r,R as p,u as me,L as he}from"./main-Bxfe4Qal.js";import{c as S}from"./CircularProgress-B8CBKe07.js";import{f as J,c as fe,u as ve,g as xe,T as be,a as ye,b as A,d as E,e as Ce,h as je}from"./index-jKozFsgT.js";import{a as Oe}from"./queryGraph-B-h_kUel.js";import{c as Pe}from"./listItemTextClasses-BH3kCDiK.js";import{F as Se,I as ze,a as Re,C as Be,m as Fe,L as Ie}from"./Loading-0cuKiJyU.js";import{u as Te}from"./queryBuilder-CRrFGo6j.js";import{d as Z,g as G,e as K,h as X,f as L,i as g,j as Y,m as ee,k as we}from"./createSimplePaletteValueFilter-BgnxeUzB.js";import{u as Le,F as $e}from"./Input-DrgcAPlg.js";import{T as P}from"./Typography-S0UZMlvX.js";import{u as V,I as w}from"./IconButton-D-WOROUy.js";import{u as te,T as N}from"./Tooltip-CAcmB2zG.js";import{B as Me}from"./Button-CpGhMJw8.js";import{C as _e}from"./Container-DfbZCbhd.js";import{B as H}from"./Box-CViFGFuH.js";import"./isFocusVisible-B8k4qzLc.js";import"./KeyboardArrowRight-Comv3Gqf.js";import"./Toolbar-phJB3H_S.js";import"./dividerClasses-FcsMuOnI.js";import"./isHostComponent-D3YBfmz0.js";import"./Modal-CENjY7I_.js";import"./AlertProvider-CS83QDva.js";import"./Paper-BphQmbS1.js";import"./isMuiElement-CAkp5su4.js";import"./useThemeProps-CsLVBKd8.js";function De(e){const{badgeContent:t,invisible:n=!1,max:i=99,showZero:a=!1}=e,c=te({badgeContent:t,max:i});let l=n;n===!1&&t===0&&!a&&(l=!0);const{badgeContent:d,max:u=i}=l?c:e,m=d&&Number(d)>u?`${u}+`:d;return{badgeContent:d,invisible:l,max:u,displayValue:m}}function ke(e){return G("MuiBadge",e)}const y=Z("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),F=10,I=4,Ae=e=>{const{color:t,anchorOrigin:n,invisible:i,overlap:a,variant:c,classes:l={}}=e,d={root:["root"],badge:["badge",c,i&&"invisible",`anchorOrigin${g(n.vertical)}${g(n.horizontal)}`,`anchorOrigin${g(n.vertical)}${g(n.horizontal)}${g(a)}`,`overlap${g(a)}`,t!=="default"&&`color${g(t)}`]};return Y(d,ke,l)},Ee=L("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Ve=L("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${g(n.anchorOrigin.vertical)}${g(n.anchorOrigin.horizontal)}${g(n.overlap)}`],n.color!=="default"&&t[`color${g(n.color)}`],n.invisible&&t.invisible]}})(ee(({theme:e})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:F*2,lineHeight:1,padding:"0 6px",height:F*2,borderRadius:F,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.entries(e.palette).filter(we(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:I,height:I*2,minWidth:I*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]})));function U(e){return{vertical:(e==null?void 0:e.vertical)??"top",horizontal:(e==null?void 0:e.horizontal)??"right"}}const Ne=T.forwardRef(function(t,n){const i=K({props:t,name:"MuiBadge"}),{anchorOrigin:a,className:c,classes:l,component:d,components:u={},componentsProps:m={},children:C,overlap:j="rectangular",color:h="default",invisible:b=!1,max:f=99,badgeContent:O,slots:v,slotProps:x,showZero:z=!1,variant:o="standard",...s}=i,{badgeContent:R,invisible:re,max:oe,displayValue:ne}=De({max:f,invisible:b,badgeContent:O,showZero:z}),ae=te({anchorOrigin:U(a),color:h,overlap:j,variant:o,badgeContent:O}),$=re||R==null&&o!=="dot",{color:ie=h,overlap:se=j,anchorOrigin:le,variant:M=o}=$?ae:i,ce=U(le),_=M!=="dot"?ne:void 0,B={...i,badgeContent:R,invisible:$,max:oe,displayValue:_,showZero:z,anchorOrigin:ce,color:ie,overlap:se,variant:M},D=Ae(B),k={slots:{root:(v==null?void 0:v.root)??u.Root,badge:(v==null?void 0:v.badge)??u.Badge},slotProps:{root:(x==null?void 0:x.root)??m.root,badge:(x==null?void 0:x.badge)??m.badge}},[de,pe]=V("root",{elementType:Ee,externalForwardedProps:{...k,...s},ownerState:B,className:X(D.root,c),ref:n,additionalProps:{as:d}}),[ge,ue]=V("badge",{elementType:Ve,externalForwardedProps:k,ownerState:B,className:D.badge});return r.jsxs(de,{...pe,children:[C,r.jsx(ge,{...ue,children:_})]})});function He(e){return G("MuiInputAdornment",e)}const W=Z("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var q;const Ue=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${g(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},We=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:i,position:a,size:c,variant:l}=e,d={root:["root",n&&"disablePointerEvents",a&&`position${g(a)}`,l,i&&"hiddenLabel",c&&`size${g(c)}`]};return Y(d,He,t)},qe=L("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Ue})(ee(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${W.positionStart}&:not(.${W.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),Qe=T.forwardRef(function(t,n){const i=K({props:t,name:"MuiInputAdornment"}),{children:a,className:c,component:l="div",disablePointerEvents:d=!1,disableTypography:u=!1,position:m,variant:C,...j}=i,h=Le()||{};let b=C;C&&h.variant,h&&!b&&(b=h.variant);const f={...i,hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:d,position:m,variant:b},O=We(f);return r.jsx($e.Provider,{value:null,children:r.jsx(qe,{as:l,ownerState:f,className:X(O.root,c),ref:n,...j,children:typeof a=="string"&&!u?r.jsx(P,{color:"textSecondary",children:a}):r.jsxs(T.Fragment,{children:[m==="start"?q||(q=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,a]})})})}),Je=S(r.jsx("path",{d:"m10 17 5-5-5-5z"})),Ze={async getDrugChemicalPairs({pagination:e,sort:t,filters:n}){let i;try{i=await Pe.post("/api/explore/drug-disease",{pagination:{offset:e.pageIndex*e.pageSize,limit:e.pageSize},sort:t,filters:n})}catch(a){return Oe.handleAxiosError(a)}return i.data}},Ge=S(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),Ke=S(r.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),Xe=S(r.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),Ye=S(r.jsx("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99zM9 3 5 6.99h3V14h2V6.99h3z"})),et=S(r.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function tt({value:e,onChange:t,debounce:n=500,...i}){const[a,c]=p.useState(e);return p.useEffect(()=>{c(e)},[e]),p.useEffect(()=>{const l=setTimeout(()=>{t(a)},n);return()=>clearTimeout(l)},[a]),r.jsxs(Se,{fullWidth:!0,variant:"filled",children:[r.jsx(ze,{htmlFor:"filter",children:"Filter"}),r.jsx(Re,{value:a,onChange:l=>c(l.target.value),margin:"dense",endAdornment:r.jsx(Qe,{position:"end",children:r.jsx(w,{"aria-label":"Clear filter",onClick:()=>c(""),size:"small",children:r.jsx(et,{})})}),...i})]})}const rt=p.memo(tt);function ot({header:e}){const[t,n]=p.useState(e.column.getIsFiltered());return r.jsxs("div",{style:{display:"flex",gap:8,flexDirection:"column"},children:[r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[r.jsx("h2",{style:{margin:0,fontSize:18,flex:"1"},children:J(e.column.columnDef.header,e.getContext())}),(e.column.getCanFilter()||e.column.getCanSort())&&r.jsxs("div",{style:{display:"flex",gap:8},children:[e.column.getCanSort()&&r.jsx(N,{placement:"top",title:{asc:"Sort ascending",desc:"Sort descending"}[e.column.getNextSortingOrder()]||"Unsort",children:r.jsx(w,{size:"small",color:e.column.getIsSorted()?"primary":void 0,onClick:e.column.getToggleSortingHandler(),children:{asc:r.jsx(Ge,{}),desc:r.jsx(Ke,{})}[e.column.getIsSorted()]||r.jsx(Ye,{})})}),e.column.getCanFilter()&&r.jsx(N,{title:"Filter column",placement:"top",children:r.jsx(Ne,{variant:"dot",color:"primary",invisible:!e.column.getIsFiltered(),children:r.jsx(w,{size:"small",onClick:()=>{n(!t)},children:r.jsx(Xe,{})})})})]})]}),e.column.getCanFilter()&&r.jsx(Be,{in:t,children:r.jsx(rt,{value:e.column.getFilterValue()||"",onChange:i=>e.column.setFilterValue(i)})})]})}const nt=Fe({hover:{"& .MuiButtonBase-root":{visibility:"hidden"},"&:hover .MuiButtonBase-root":{visibility:"visible"}},table:{fontSize:"1.6rem",width:"100%","& td, & th":{paddingLeft:12},"& td:first-of-type, & th:first-of-type":{paddingLeft:0}}}),at=Ze.getDrugChemicalPairs;function Q({children:e}){return r.jsx("span",{style:{fontSize:"0.75rem",backgroundColor:"#e9e9e9",borderRadius:"4px",padding:"2px 4px",marginLeft:"1ch"},children:e})}function it(){const[e,t]=p.useState({pageIndex:0,pageSize:20}),[n,i]=p.useState([]),[a,c]=p.useState([]),[l,d]=p.useState({rows:[],num_of_results:0,limit:0,offset:0}),[u,m]=p.useState(!0),C=Te(),j=me(),h=o=>{const s={message:{query_graph:{nodes:{n0:{name:o.disease_name,ids:[o.disease_id]},n1:{name:o.drug_name,ids:[o.drug_id]}},edges:{e0:{subject:"n0",object:"n1",predicates:["biolink:related_to"]}}}}};C.dispatch({type:"saveGraph",payload:s}),j({to:"/question-builder"})},b=nt(),f=fe(),O=p.useMemo(()=>[f.accessor("disease_name",{header:"Disease",cell:o=>r.jsxs(r.Fragment,{children:[o.row.original.disease_name,r.jsx(Q,{children:o.row.original.disease_id})]})}),f.accessor("drug_name",{header:"Drug",cell:o=>r.jsxs(r.Fragment,{children:[o.row.original.drug_name,r.jsx(Q,{children:o.row.original.drug_id})]})}),f.accessor("score",{header:"Score",cell:o=>o.row.original.known?r.jsxs("span",{style:{textDecoration:"underline"},children:[o.row.original.score.toFixed(6),"*"]}):o.row.original.score.toFixed(6)}),f.display({id:"startQueryButton",cell:o=>r.jsx(Me,{variant:"contained",size:"small",sx:{fontSize:"0.75rem",textTransform:"none"},endIcon:r.jsx(Je,{}),onClick:()=>h(o.row.original),children:"Start a query"})})],[]),v=p.useMemo(()=>Object.fromEntries(n.map(({id:o,desc:s})=>[o,s?"desc":"asc"])),[n]),x=p.useMemo(()=>Object.fromEntries(a.map(({id:o,value:s})=>[o,s])),[a]);p.useEffect(()=>{let o=!1;return m(!0),(async()=>{try{if(o)return;const s=await at({pagination:e,sort:v,filters:x});d(s)}catch(s){console.error("Error fetching drug-disease pairs:",s)}finally{m(!1)}})(),()=>{o=!0}},[e,JSON.stringify(v),JSON.stringify(x)]);const z=ve({data:l.rows||[],columns:O,getCoreRowModel:xe(),manualPagination:!0,enableMultiSort:!1,manualSorting:!0,manualFiltering:!0,rowCount:l.num_of_results,state:{pagination:e,sorting:n,columnFilters:a},onSortingChange:i,onColumnFiltersChange:c});return r.jsxs(_e,{sx:{my:6},children:[r.jsx(P,{variant:"body2",component:he,to:"/explore",children:"← View all datasets"}),r.jsx(P,{variant:"h4",gutterBottom:!0,children:"Drug - Disease Pairs"}),r.jsx(P,{gutterBottom:!0,children:"These drug-disease pairs were generated using a machine learning model to align with the nodes in the ROBOKOP knowledge graph. They highlight potential associations between various drugs and a broad range of diseases, suggesting possible avenues for further research. These connections can serve as a starting point for a new query by hovering over a pair and clicking “Start a Query”."}),r.jsx(P,{sx:{mb:4},children:"Scores with an asterisk and underline means the drug-disease pair is already known. The score is still predicted using the trained model."}),r.jsxs(H,{sx:{position:"relative"},children:[u&&r.jsx(H,{sx:{position:"absolute",inset:"-20px",backgroundColor:"rgba(255,255,255,0.3)",backdropFilter:"blur(2px)",borderRadius:2,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Ie,{})}),r.jsxs(be,{size:"small",className:b.table,children:[r.jsx(ye,{children:z.getHeaderGroups().map(o=>r.jsx(A,{children:o.headers.map(s=>r.jsx(E,{children:s.isPlaceholder?null:r.jsx(ot,{header:s})},s.id))},o.id))}),r.jsx(Ce,{children:z.getRowModel().rows.map(o=>r.jsx(A,{className:b.hover,children:o.getVisibleCells().map(s=>r.jsx(E,{children:J(s.column.columnDef.cell,s.getContext())},s.id))},o.id))})]}),l.num_of_results>0?r.jsx(je,{component:"div",count:l.num_of_results,page:e.pageIndex,onPageChange:(o,s)=>t(R=>({...R,pageIndex:s})),rowsPerPage:e.pageSize,onRowsPerPageChange:o=>{t({pageIndex:0,pageSize:parseInt(o.target.value,10)})},rowsPerPageOptions:[10,20,50,100]}):r.jsx(P,{align:"center",sx:{my:4},children:"No results found. Please try a different filter."})]})]})}const wt=function(){return r.jsx(it,{})};export{wt as component};
